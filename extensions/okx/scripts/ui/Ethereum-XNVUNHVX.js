import{b as Mo,f as Go,g as Do,h as Oo}from"./chunk-3OSFEYEP.js";import{a as Bo,b as tt,c as H,d as vo,e as Lo}from"./chunk-A6E4YGIZ.js";import{m as bo}from"./chunk-2A7OXRFA.js";import"./chunk-R2CJJDI4.js";import{a as No}from"./chunk-5UIKXIUM.js";import{a as So}from"./chunk-E2BWGM53.js";import{a as et}from"./chunk-3TLJJ3DH.js";import"./chunk-DKWIA6GD.js";import{a as Po}from"./chunk-GEWIZ4GA.js";import{a as pt}from"./chunk-6NMIA3BE.js";import{a as Ao}from"./chunk-7NZI2WVC.js";import"./chunk-VIL7IDQ3.js";import{a as Eo}from"./chunk-KVC25X33.js";import{h as wo}from"./chunk-74FDEN4I.js";import{a as Fo}from"./chunk-34U7HVOO.js";import"./chunk-MRJI34GT.js";import"./chunk-O2ZAUKTP.js";import{a as Je}from"./chunk-YUU6WMAM.js";import{d as ko}from"./chunk-URHEQFFQ.js";import{a as fo,b as To,c as xo,e as ho}from"./chunk-45MY2MVD.js";import{d as Co,e as yo,h as Ee}from"./chunk-AMZN2EAS.js";import{d as de}from"./chunk-4FRWD727.js";import{a as go}from"./chunk-7WAPJBDH.js";import{a as ee,e as uo}from"./chunk-GE7QYBP5.js";import"./chunk-QEKVDPIG.js";import{a as _o}from"./chunk-WJYVGS4V.js";import{a as ie}from"./chunk-CSJR56CD.js";import{a as co,b as lo,d as po}from"./chunk-5D7TO4KC.js";import"./chunk-P3HGPAYY.js";import"./chunk-I4WXKCYQ.js";import"./chunk-7SJN24EA.js";import"./chunk-G5K5AHVE.js";import"./chunk-SK7ZM24Q.js";import"./chunk-F4M2S35A.js";import"./chunk-LLR77RUB.js";import"./chunk-5VYKPDIW.js";import{d as mo}from"./chunk-T4SJQSS7.js";import"./chunk-XWRXEU7I.js";import"./chunk-3V4N3SLP.js";import"./chunk-ZBRU2CAM.js";import"./chunk-V3INX46H.js";import"./chunk-JTVJ673F.js";import{a as Ze}from"./chunk-MIZXVXK6.js";import"./chunk-GNBB55K5.js";import"./chunk-EC67JB7S.js";import"./chunk-WINPS5JO.js";import{a as J,c as Le,d as $,h as Ie}from"./chunk-GANFA4Y3.js";import"./chunk-BNPYGBEA.js";import{a as ao,e as N}from"./chunk-75JFJJ6E.js";import"./chunk-WOF2MG5G.js";import"./chunk-6QV7GAE5.js";import{c as so}from"./chunk-QT2MBFKK.js";import"./chunk-MUF5KFVU.js";import"./chunk-BSWNOA7X.js";import{a as lt}from"./chunk-NWOIYLOG.js";import"./chunk-JLHU3WBU.js";import{a as Io}from"./chunk-RV4CTONM.js";import"./chunk-5GIEDSLN.js";import{d as $e}from"./chunk-PL466WLP.js";import{a as he}from"./chunk-WPUSOCZ5.js";import"./chunk-6NFIXY6G.js";import"./chunk-IGLJY5RQ.js";import"./chunk-BOYKE4FM.js";import"./chunk-UF32D7MW.js";import"./chunk-CR7XMKUK.js";import{a as io}from"./chunk-SSZF4QIS.js";import"./chunk-M24SOKF4.js";import"./chunk-SSTSMCPU.js";import"./chunk-LF7H3MNC.js";import"./chunk-KCCATSGJ.js";import"./chunk-CK3VDP7L.js";import"./chunk-BQUWM53Y.js";import"./chunk-XEXJRJUY.js";import"./chunk-3DNJNRLL.js";import"./chunk-FPIWIEGC.js";import{a as to}from"./chunk-CW4HK4TW.js";import"./chunk-3MOQA4IF.js";import"./chunk-2I7TRLZ4.js";import"./chunk-V3JNXBKP.js";import"./chunk-5JA7QTRT.js";import"./chunk-ZVGQRWB5.js";import"./chunk-HLX5DVID.js";import{b as ro}from"./chunk-5D6FMALX.js";import"./chunk-BPSSG62G.js";import{b as oo}from"./chunk-ZDO7TFIW.js";import"./chunk-MTJW726U.js";import"./chunk-I3X2I3EE.js";import{a as $t,b as eo}from"./chunk-4JU7MQBN.js";import"./chunk-25SZ52UW.js";import"./chunk-SGHBHZD2.js";import"./chunk-DAXYD52J.js";import"./chunk-3VDT32YX.js";import"./chunk-RNBNCNHM.js";import"./chunk-ZUBJ4HSQ.js";import{a as Ve,c as jt,d as zt,g as st,h as Vt,i as Qt}from"./chunk-NRDSUSOX.js";import"./chunk-OLBL2ESK.js";import"./chunk-WFHUBXJH.js";import"./chunk-YL2OEBEM.js";import"./chunk-UBREW6HU.js";import"./chunk-33LBA2KN.js";import{P as Bt,fa as vt}from"./chunk-NPTEYWCZ.js";import"./chunk-BYUE2OWP.js";import"./chunk-ZLXZXLBF.js";import"./chunk-3SFQGMQT.js";import"./chunk-PCTAUYQN.js";import{a as Ke}from"./chunk-ZW25VTKR.js";import{c as Xt,p as no}from"./chunk-OZL64JKT.js";import"./chunk-SF4X4VPT.js";import"./chunk-EUVFIXQT.js";import"./chunk-WJQMDYRJ.js";import"./chunk-OANAR4PZ.js";import"./chunk-DY3DHSF2.js";import"./chunk-LZKLGZM5.js";import"./chunk-DM55GZK5.js";import"./chunk-OVX2PTCV.js";import"./chunk-Y57SQLFF.js";import"./chunk-C6D3UGMF.js";import"./chunk-VHMLJAAA.js";import{n as Qe}from"./chunk-DS7KEGTF.js";import"./chunk-GWV4SS46.js";import{l as St}from"./chunk-AVQA7GPY.js";import{a as Xe}from"./chunk-YFSBCNC7.js";import"./chunk-OFUXQTAD.js";import"./chunk-AJGKE3VO.js";import{a as ye}from"./chunk-NRCRSATA.js";import"./chunk-LANQTZFO.js";import"./chunk-NZHMCNZN.js";import"./chunk-CBDQQ72I.js";import{a as Kt}from"./chunk-4HJMB7P7.js";import"./chunk-A2W6OJDL.js";import{o as Jt,q as ct}from"./chunk-U7RD3Z4E.js";import"./chunk-CJVER5MJ.js";import"./chunk-S5IEFQ34.js";import{o as Ce}from"./chunk-XHNZXPBB.js";import{J as Yt,Qa as qt,Ra as ze,ac as mt}from"./chunk-ZTS7374H.js";import"./chunk-QXE433GW.js";import{Na as ge,Ra as Ot}from"./chunk-EY7FXYAJ.js";import{d as Dt,f as Br}from"./chunk-B26CCOB3.js";import"./chunk-RRPGPABV.js";import"./chunk-D2RJYC6D.js";import"./chunk-VMA4KAKW.js";import"./chunk-XJYCT5UP.js";import"./chunk-XIAMW27T.js";import{$ as Ut,Q as Rt,U as Ht,Z as at,d as Wt,m as je}from"./chunk-QYHQY2ME.js";import"./chunk-FT7VATMT.js";import{a as vr}from"./chunk-YYAHGUV5.js";import{a as R,b as fe}from"./chunk-QJGSL63Z.js";import{e as Zt,h as ve}from"./chunk-7ZE3XWQE.js";import"./chunk-42AETIVN.js";import"./chunk-DKCCIZ3Q.js";import"./chunk-C77R5D6K.js";import{c as E}from"./chunk-HBMVMNWX.js";import{Db as Re,Fb as pe,Gb as He,Ib as kt,Kb as K,Lb as Ue,Lc as Nr,Mb as Se,Nb as Ft,Sb as At,Tc as Mt,V as be,Vc as br,Wc as Gt,Xa as wt,Xc as Sr,Ya as nt,cc as ue,gc as Pt,lc as Pr,vb as Ar,w as ne,xc as Lt,y as Fr}from"./chunk-IS2B3ORW.js";import"./chunk-YGSCKFAL.js";import{H as Z,c as X,o as bt,q as it,r as qe}from"./chunk-TDPA2BUG.js";import{K as Pe,a as ht,b as It,o as Et,pa as We}from"./chunk-BJO2AFCW.js";import{M as W,l as Ne,w as p}from"./chunk-OIAB2YVD.js";import"./chunk-QHMZGTYF.js";import"./chunk-X5EUMZZI.js";import"./chunk-PJSODKKF.js";import{T as Ye,c as Nt,ca as Be}from"./chunk-VXVCGVBA.js";import"./chunk-G6JM4G2M.js";import{a as M}from"./chunk-DAL2TMJA.js";import"./chunk-IEDGM2AY.js";import"./chunk-DAX5D55P.js";import"./chunk-UAZMAR7J.js";import"./chunk-BQF3XODK.js";import"./chunk-I5RKKMWZ.js";import"./chunk-4LMFSJNF.js";import"./chunk-VNO3IDCT.js";import"./chunk-P5TEJB3G.js";import"./chunk-AXAVBTOG.js";import"./chunk-SEHRB2F7.js";import"./chunk-IH7OWVTK.js";import"./chunk-RF2WJL7B.js";import"./chunk-K5MXWGTT.js";import"./chunk-OTDALOBJ.js";import"./chunk-JCKY6H7C.js";import"./chunk-6AWMYHRK.js";import"./chunk-5VBNU5MN.js";import{f as h,m as s,o as m}from"./chunk-JEQEC2HU.js";s();m();var me=h(M());Fr();s();m();var Me=h(M()),Uo=h(mt()),Yo=h(vr()),qo=h(Ce());s();m();We();var Lr=e=>{let t=H(e?.chainId),n=e?.image;return ht(n)?e.image=n[0]:It(n)&&(e.image=null),{token:e,baseCoin:t}},Wo=Lr;s();m();var Ro=h(mt()),ut=h(Ce());W();Ot();var Mr=(e={},t={},n=!0)=>{let o=(0,Ro.useDispatch)(),a=e.address,c=Ke(),l=Bo(),i=ie(),d=(0,ut.useMemoizedFn)(async()=>{i({all_confirmation:"cancel",trade:"add_token"}),await l(a,!1),await ge(o)}),{loading:r,onClick:u}=J(d),T={actionType:N.ACTION_TYPE.CANCEL,btnText:p("wallet_dapp_connection_btn_reject"),onClick:u,loading:r},f=(0,ut.useMemoizedFn)(async()=>{try{i({all_confirmation:"confirm",trade:"add_token"});let g=await Ve(t.localType,c),I={...e,contractAddress:a,blockChain:g.shortName,localType:t.localType};await oo(I),await l(a,!0),await ge(o)}catch(g){Z.error(g?.data?.originalError?.msg||p("wallet_extenshion_toast_add_failed"))}}),{loading:_,onClick:x}=J(f),C={actionType:N.ACTION_TYPE.CONFIRM,disabled:!n,onClick:x,loading:_};return[T,C]},Ho=Mr;var Gr=({unapproved:e})=>{let t=(0,Uo.useSelector)(eo),{token:n,baseCoin:o}=Wo(e),[a,c]=(0,Me.useState)(!0),l=Ke();(0,qo.useMount)(async()=>{let d=await Ve(o.localType,l);c(!!d)});let i=Ho(n,o,a);return!n||t!==$t.addToken?Me.default.createElement(Yo.Redirect,{to:Kt}):Me.default.createElement(So,{token:n,supported:a,buttonGroup:i,networkName:o.chainName})},jo=Gr;s();m();var b=h(M()),Jo=h(Ce());W();s();m();var zo=h(M());We();ue();var Dr=({unapproved:e,walletAccount:t,customGasInfo:n={}})=>{let{params:o}=e,{walletId:a}=t,c=H(),{coinId:l}=c,i=_o(l,a)?.coinAmountInt,{gasType:d,isNetworkFeeLoading:r,networkFee:u,getLimit:T}=n,{minGasFee:f}=co(n),_=lo(n),x=(0,zo.useMemo)(()=>{if(Pe(i))return o;let F=i,A=[];return o.forEach(G=>{F=He(F,u),K(F,0)&&A.push(G)}),A},[i,o,u]),C=r&&Se(T,0),g={level:d||Ht.STANDARD,loading:r,coinId:c?.coinId,networkFee:C?void 0:f,maxNetworkFee:C?void 0:u,estimateFailed:_},I=r||x.length&&x.length===o.length,k=Pe(i)||Ue(i,u);return{isNetworkFeeLoading:r,estimateFailed:_,networkFeeProps:g,canApproveTxs:x,isSufficientGas:k,canApproveAll:I}},Vo=Dr;s();m();var Ko=h(M());W();Pr();Nr();Ar();Sr();br();ue();var Qo=100,Or=e=>e.msg||p("wallet_home_toast_network_error"),Wr=({txParams:e,gasLimit:t,supportEip1559:n})=>({...e,value:R(e.value),gas:t,gasPrice:R(n?e.maxFeePerGas:e.gasPrice),priorityFee:R(n?e.maxPriorityFeePerGas:0),nonce:R(e.nonce),repeatTxType:Wt.CONFIRMING,oldTxHash:"",inscriptionType:1}),Rr=({ext:e,signature:t,coinId:n,txParams:o,fromAdr:a,toAdr:c,networkFee:l,txHash:i,walletId:d,walletAccount:r})=>({extJson:JSON.stringify(e),signedTx:t,coinId:n,coinAmount:R(o.value||0),fromAdr:a,toAdr:c,serviceCharge:l,txHash:i,txSource:Lt.DAPP,inputData:o.data,accountId:d,txType:1,walletType:r?.serverWalletType}),Hr=({unapproved:e,walletAccount:t,isSufficientGas:n,canApproveTxs:o,customGasInfo:a,isNetworkFeeLoading:c})=>{let{id:l}=e,{walletId:i,address:d}=t,r=Qe(i),u=ie(i),{coinId:T}=H(),f=No(),_=et(),x=(0,Ko.useCallback)(async()=>{u({trade:"sendEvmInscriptions",all_confirmation:"cancel"}),await f({id:l})},[f,u,l]),{loading:C,onClick:g}=J(x),I={loading:C,onClick:g,actionType:N.ACTION_TYPE.CANCEL,btnText:p("wallet_dapp_connection_btn_reject")},k=r||c,{gasPrice:F,supportEip1559:A,gasLimitInfo:G={},gasLimit:D,maxFeePerGas:O,maxPriorityFeePerGas:Y,networkFee:L}=a,q=mo({fromAddr:o[0]?.txParams?.from,walletId:i,localType:nt}),ce=async()=>{try{let V=o.length,Te=o[0],{from:Fe,to:Ae,value:oe}=Te.txParams;if(u({trade:"sendEvmInscriptions",all_confirmation:"confirm"}),!await he({callback:x,walletId:i}))return;let{data:Q}=await Yt({checkTypes:[at.OVERWRITTEN],coinId:T,from:Fe,to:Ae,amount:R(oe||0),gasPrice:F}),rt=Q.find(({checkType:xe})=>xe===at.OVERWRITTEN)||{},{newNonce:gr,toastType:Cr,pendingNum:yr}=rt;if(Cr===Ut.FAILED){Z.error(p("wallet_extension_function_toast_failed_single")),await lt(1500),await f({id:l});return}let Tt=pe(yr,V);if(K(Tt,Qo)){Z.error(p("wallet_extension_function_toast_pending",{TotalNum:Tt,ExceededNum:Qo}));return}let xt=[],gt=[];for(let xe=0;xe<o.length;xe++){let Oe=o[xe],{txParams:v}=Oe,{from:hr,to:Ir}=v;v.nonce=Pt(fe(pe(gr,xe))),A?(delete Oe.gasPrice,v.maxFeePerGas=fe(O),v.maxPriorityFeePerGas=fe(Y),v.type=je.FEE_MARKET):(delete v.maxFeePerGas,delete v.maxPriorityFeePerGas,delete v.type,v.gasPrice=fe(F)),v.gas=fe(D),v.gasLimit=fe(D),v.gasLimitInfo=G,v.gasType=a.gasType;let Er=to(Oe.txParams),Ct=await q({params:Er}),yt=await ao(nt,Ct),wr=Wr({txParams:v,gasLimit:D,supportEip1559:A}),kr=Rr({ext:wr,signature:Ct,coinId:T,txParams:v,fromAdr:hr,toAdr:Ir,networkFee:L,txHash:yt,walletId:i,walletAccount:t});gt.push(kr),xt.push({id:Oe.id,txHash:yt})}await Mt(Gt.postSendEvmInscriptions,{txList:gt}),await _({id:l,result:xt})}catch(V){Z.error(Or(V)),await lt(1500),await _({id:l,error:"Failed"})}},{loading:le,onClick:j}=J(ce),z={loading:le,disabled:k,actionType:N.ACTION_TYPE.CONFIRM,onClick:j};return k?[I,z]:(n||(z={actionType:N.ACTION_TYPE.FILL_UP,txId:l,coinId:T,walletId:i,address:d,receiveOnly:n}),[I,z])},Xo=Hr;s();m();W();var Ur=e=>{for(let t=0;t<e.length;t++){let n=e[t],o=n();if(o)return o}return null},Yr=({walletAccount:e,canApproveTxs:t,canApproveAll:n,isSufficientGas:o})=>{let a=Qe(e.walletId),c=()=>a?{type:X.TYPE.error,message:p("wallet_extension_function_alert_wallet_unsupported")}:null,l=H(),i=wo({baseCoin:l,isSufficientGas:o});return Ur([c,i,()=>n?null:{type:X.TYPE.warn,message:p("wallet_extension_function_alert_available_balance",{gasToken:l.symbol,num:t.length})}])},Zo=Yr;var qr=({unapproved:e})=>{let{coinId:t}=H(),{txParams:n={}}=e?.params?.[0],{from:o,to:a,data:c,value:l}=n,{walletId:i}=e,d=Io(e),r=ie(i),u=Je(e),[T,f]=(0,b.useState)({}),_=(0,b.useCallback)(Y=>{f(Y)},[]),{networkFeeProps:x,canApproveTxs:C,canApproveAll:g,isSufficientGas:I,isNetworkFeeLoading:k}=Vo({unapproved:e,walletAccount:d,customGasInfo:T}),F=Xo({unapproved:e,walletAccount:d,canApproveTxs:C,customGasInfo:T,isSufficientGas:I,isNetworkFeeLoading:k}),A=Zo({walletAccount:d,canApproveTxs:C,canApproveAll:g,isSufficientGas:I}),[G,{setTrue:D,setFalse:O}]=(0,Jo.useBoolean)(!1);return b.default.createElement(E.Container,null,b.default.createElement(Xe,{title:p("wallet_extension_function_title_bulk_signing"),closeable:!1,backable:!1}),b.default.createElement($,null,b.default.createElement(ko,{...u})),b.default.createElement($,null,b.default.createElement(Ze,{onClick:D,...x})),b.default.createElement($,{bordered:!1},b.default.createElement(Le,{title:p("wallet_extension_network_address_title_walletused"),address:d.address,walletId:d.walletId,onCopyCallback:()=>{r({trade:"sendEvmInscriptions",all_confirmation:"wallet_used_address"})}})),b.default.createElement(ye,{placeholder:!0,offsetBottom:0,borderTop:!0},b.default.createElement(Ie,{...A}),b.default.createElement(N,{buttonGroup:F})),b.default.createElement(po,{visible:G,coinId:t,address:o,inputData:c,tokenAddress:a,value:R(l),onBack:O,onClose:null,onGasChange:_}))},$o=qr;s();m();var te=h(M());wt();ue();s();m();var sr=h(M()),Ge=h(mt()),ot=h(Ce());W();Ot();s();m();var U=h(M());s();m();Br();var we=()=>(0,U.useCallback)(async(t,n)=>{await Dt().updateReportTimestamp(t,n)},[]);var jr=()=>{let e=we();return(0,U.useCallback)(async n=>{await e(n,"CAN_CONFIRM")},[e])},er=(e,t)=>{let n=jr(),o=(0,U.useRef)(!1);(0,U.useEffect)(()=>{!t&&!o.current&&(o.current=!0,n(e))},[e,t,n])},tr=()=>{let e=we();return(0,U.useCallback)(async n=>{await e(n,"CLICK_CONFIRM")},[e])},or=()=>{let e=we();return(0,U.useCallback)(async t=>{await e(t,"SIGN")},[e])},rr=()=>{let e=we();return(0,U.useCallback)(async t=>{await e(t,"START_PUBLISH")},[e])},nr=()=>{let e=we();return(0,U.useCallback)(async t=>{await e(t,"FINISH_PUBLISH")},[e])},ir=()=>{let e=we();return(0,U.useCallback)(async t=>{await e(t,"END_REQUEST")},[e])};s();m();We();var ar=({isMev:e,mevInfo:t,unapproved:n,modifiedData:o,customGasInfo:a,updateData:c,gasReturnActivity:l})=>{let{nonce:i,updateGasInfo:d}=c,r=Et(n);r.txParams=r.params,delete r.params;let{supportEip1559:u,gasLimitInfo:T={},gasLimit:f,maxFeePerGas:_,gasPrice:x,maxPriorityFeePerGas:C}=a;if(o&&r.txParams&&(r.txParams.data=o),r.txParams.supportEip1559=u,u?(delete r?.txParams.gasPrice,r.txParams.maxFeePerGas=ee(_),r.txParams.maxPriorityFeePerGas=ee(C),r.txParams.type=je.FEE_MARKET):(delete r?.txParams.maxFeePerGas,delete r?.txParams.maxPriorityFeePerGas,delete r?.txParams.type,r.txParams.gasPrice=ee(x)),d){let g=Object.entries(d).reduce((I,[k,F])=>(I[k]=ee(F),I),{});r.txParams={...r.txParams,...g}}return r.txParams.gas=ee(f),r.txParams.gasLimit=ee(f),r.txParams.nonce=ee(i),r.txParams.chainId=ee(r.chainId),r.gasLimitInfo=T||{},r.mev=e?t.name:"",r.activityId=l?.activityId,r.gasType=a.gasType,r?.txParams?.data||(r.isBaseCoinTransfer=!0),r};var zr=(e,t)=>{let n=(0,Ge.useSelector)(a=>zt(a,e)),o=(0,Ge.useSelector)(a=>jt(a,e)??t??!1);return{mevInfo:n,isMev:o}},Vr=({unapproved:e})=>{let{id:t,params:n={},extParams:o={},chainId:a}=e,c=(0,Ge.useDispatch)(),l=H(a),i=Je(e),{from:d,to:r,value:u}=n,{coinId:T,chainName:f}=l,{walletId:_}=tt(e.origin,d)||{},{isMev:x,mevInfo:C}=zr(t,o?.isMev),g=tr(),I=or(),k=rr(),F=nr(),A=ir(),G=(0,ot.useMemoizedFn)((le,j)=>{c(st.setIsMev({isMev:le,id:t})),c(st.setMevInfo({mevInfo:j,id:t}))});er();let D=ie(_),O=uo({walletId:_,fromAddr:d,coinId:T}),Y=(0,ot.useMemoizedFn)(async()=>{D({trade:"contract_interaction",all_confirmation:"cancel",network:f,dapp_url:e.origin}),Bt(),await c(Vt(t)),await ge(c)}),L=fo(),q=et(),ce=(0,ot.useMemoizedFn)(async({modifiedData:le,customGasInfo:j,gasReturnActivity:z,reportGasReturnActivityDataInConfirm:V})=>{let{gasPrice:Te}=j;if(g(t),await he({callback:Y,walletId:_})){D({all_confirmation:"confirm",trade:"contract_interaction",network:f,dapp_url:e.origin});let Ae=await L({to:r,from:d,coinId:T,gasPrice:Te,userGasInfo:j,amount:R(u||0),baseCoinAmountUse:R(u||0)});V();try{let oe=ar({isMev:x,mevInfo:C,unapproved:e,updateData:Ae,modifiedData:le,customGasInfo:j,gasReturnActivity:z});I(t);let re=await O(oe.txParams);k(t);let Q=await c(Qt(t,{...oe,signedTx:re,walletId:_,coinId:T}));if(F(t),pt(Q?.code))z?.clear(),Z.error({title:Q?.msg||p("wallet_home_toast_network_error"),duration:3});else{let{serverTxId:rt}=Q||{};St({tx_id:rt}),A(t)}}catch(oe){let re=oe?.data?.originalError;pt(re?.code)?(z?.clear(),Z.error({title:re?.msg||p("wallet_home_toast_network_error"),duration:3})):q({id:t,error:re?.msg||"Failed"})}await ge(c)}});return sr.default.createElement(ho,{needMev:!0,coinId:T,openMev:x,onConfirmReplace:!0,dappInfo:i,txParams:n,txType:e?.type,walletId:_,isShowBlockSwapMevTooltip:o?.isShowBlockSwapMevTooltip,onMevChange:G,onCancel:Y,onConfirm:ce})},ft=Vr;s();m();var P=h(M());W();ue();s();m();var _e=h(M()),dt=h(Nt());We();W();ue();s();m();var ke={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function Qr({nonce:e,suggestedNonce:t,setNonce:n}){let o=c=>{n(c)},a;return e&&(K(e,t)?a=p("developer_mode_send_tooltip_higher",{num:t}):kt(e,t)&&(a=p("developer_mode_send_tooltip_lower",{num:t}))),_e.default.createElement(Po.Row,{className:ke.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},_e.default.createElement("div",{className:ke.content},_e.default.createElement("div",{className:ke.inner},_e.default.createElement(it.Number,{innerClassName:(0,dt.default)({"rpc-evm-send-edit-nonce__warning-input":!!a}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:p("developer_mode_send_maintitle_nonce"),placeholder:`${Pe(t)?"":Ne.thousandFormat(t)}`,size:it.SIZE.xl,value:e,onAdd:()=>!e&&t!==null?(o(pe(t,1)),!1):!0,onSub:()=>!e&&K(t,0)?(o(He(t-1)),!1):!0,onChange:o})),a&&_e.default.createElement("div",{className:ke.warningText},_e.default.createElement(Ye,{className:(0,dt.default)(ke.icon,"okx-wallet-plugin-warning-circle")}),a)))}var mr=Qr;s();m();var ae=h(M());W();ue();s();m();var y=h(M()),De=h(Ce()),cr=h(Nt());W();s();m();var S={root:"_root_424m3_1",icon:"_icon_424m3_1",editApproveAmountModal:"_editApproveAmountModal_424m3_10",content:"_content_424m3_22",editArea:"_editArea_424m3_25",unlimitedText:"_unlimitedText_424m3_30",unlimitedSymbol:"_unlimitedSymbol_424m3_39",symbolClassName:"_symbolClassName_424m3_45",quickHandler:"_quickHandler_424m3_48",balanceWrap:"_balanceWrap_424m3_55",balance:"_balance_424m3_55",maxBalance:"_maxBalance_424m3_68",maxDisabled:"_maxDisabled_424m3_76",unlimited:"_unlimited_424m3_30",text:"_text_424m3_84",authQuantityWarnTip:"_authQuantityWarnTip_424m3_91",danger:"_danger_424m3_98",info:"_info_424m3_101",approveTip:"_approveTip_424m3_104",footerActions:"_footerActions_424m3_112"};var Kr=e=>{typeof e!="string"&&(e=e.toString());let t=e?.length;return t<=9?36:t>=10&&t<12?32:t===12?30:t>=13&&t<=15?24:t>=16&&t<=18?20:t>=19&&t<=24?16:12},Xr=({txTypeInfo:e,approve:t,onUpdateAuthAmount:n})=>{let{tokenInfo:o,amount:a}=t||{},{decimals:c,symbol:l}=o,i=de(l,12),[d,r]=(0,y.useState)(!1),[u,{toggle:T,setFalse:f,setTrue:_}]=(0,De.useBoolean)(!1),[x,C]=(0,y.useState)(0),g=(0,y.useMemo)(()=>u?{type:S.danger,text:p("wallet_extension_approve_alert_high_risk_unlimited")}:!u&&Ne.eq(x||0,0)?{type:S.info,text:p("wallet_extension_approve_cannot_zero")}:null,[u,x]),I=(0,De.useMemoizedFn)((A=a)=>{ze(A)?(C(0),_()):(C(go(A,c)),f()),r(!0)}),k=(0,y.useMemo)(()=>u?!1:!Ne.gt(`${x||0}`,0),[u,x]),F=(0,De.useMemoizedFn)(()=>{r(!1),n(u?qt:x)});return y.default.createElement(E.Box,{className:S.root},y.default.createElement(E.Box,{className:S.icon,onClick:()=>{I()}},y.default.createElement(Ye,{className:"okx-wallet-plugin-draw-20"})),y.default.createElement(bt.Action,{hideCloseBtn:!0,noContentPadding:!0,visible:d},y.default.createElement(E.Box,{className:S.editApproveAmountModal},y.default.createElement(E.Box,{className:S.content},y.default.createElement(Ee,{txTypeInfo:e,bordered:!1}),y.default.createElement(E.Box,{className:S.editArea},u?y.default.createElement(ct.Text,{className:S.unlimitedText},p("wallet_extension_transfer_title_unlimited_amount",{token:y.default.createElement(ct.Text,{className:S.unlimitedSymbol},i)})):y.default.createElement(so,{symbol:i,autoSize:Kr,placeholder:"0",decimals:c,value:x,onChange:C,style:{fontWeight:700,height:"42px"},symbolClassName:S.symbolClassName})),y.default.createElement(E.Box,{className:S.quickHandler},y.default.createElement(E.Box,{onClick:T,className:S.unlimited},y.default.createElement(E.Box,{className:S.text},p("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),y.default.createElement(qe,{checked:u}))),!!g&&y.default.createElement(E.Box,{className:(0,cr.default)(S.authQuantityWarnTip,g.type)},g.text)),y.default.createElement(E.Box,{className:S.approveTip},p("wallet_extension_approve_desc_dapp_right")),y.default.createElement(ye,{affixStyle:{position:"none"},placeholder:!1,className:S.footerActions},y.default.createElement(Be,{block:!0,disabled:k,category:Be.CATEGORY.fill,type:Be.TYPE.primary,size:Be.SIZE.lg,onClick:F},p("wallet_extension_approve_btn_amount_confirmation"))))))},lr=Xr;var Zr=({onUpdateAuthAmount:e,dappInfo:t,loading:n,approveToken:o,title:a})=>{let{isApprove:c,isRevoke:l,address:i,customApproveAmount:d=0,symbol:r=ve,decimals:u=0,icon:T=Zt}=o,f=Re(d,Ft.pow(10,u)),_=de(r,12);if(n)return ae.default.createElement(Fo,null);if(c){let x={title:{text:a},subTitle:t.host};if(l){let g={image:{light:"/cdn/assets/imgs/2411/55679A63BA670217.png",dark:"/cdn/assets/imgs/2411/E42714B599040ADC.png"},...x};return ae.default.createElement(Ee,{txTypeInfo:{baseInfo:g}},ae.default.createElement(Co,{imageUrl:T,text:_}))}let C={image:{light:"/cdn/assets/imgs/2411/EF6FBB80F8021B76.png",dark:"/cdn/assets/imgs/2411/E457296ACFFE1EA9.png"},...x};return ae.default.createElement(Ee,{txTypeInfo:{baseInfo:C}},ae.default.createElement(yo,{isRpcMode:!0,approveInfoList:[{amount:f,canEditAmount:!0,autoOpen:!1,tokenInfo:{address:i,decimals:u,symbol:r}}],renderEditApproveAmount:g=>ae.default.createElement(lr,{txTypeInfo:{baseInfo:C},approve:g,onUpdateAuthAmount:e})}))}return ae.default.createElement(Ee,{txTypeInfo:{baseInfo:{image:{light:"/cdn/assets/imgs/2411/E917E86725EBEB35.png",dark:"/cdn/assets/imgs/2411/3B767A859A18470E.png"},title:{text:p("wallet_extension_transaction_page_title_unknown_transaction")},subTitle:t.host}}})},pr=Zr;s();m();W();var Jr=({chainGasLoadFailed:e,isSufficientBalance:t,transaction:n,actions:o,modifiedDataError:a,walletInfo:c,params:l,rpcInfo:i})=>{let{chain:d,nonce:r,loading:u,gas:T}=n,{sign:f,cancel:_}=o,{chainGasLoading:x}=T,{loading:C,onClick:g}=J(_),I={actionType:N.ACTION_TYPE.CANCEL,onClick:g,loading:C},k=async()=>{try{if(!await he({walletId:c?.walletId,callback:_}))return}catch(L){console.error(L)}let Y=L=>{let q=Xt[c?.keyringIdentityType];vt({tx_source:"dapp",from_addr:l.from,to_addr:l.to,main_token_symbol:i?.symbol,token_symbol:L?.extraParams?.coinSymbol||"",contract_address:l?.to,volume_token:l?.value,volume_usdt:"",tx_hash_unique:L?.txHash,wallet_type:q,chain_id:parseInt(d.chainId,16)})};f(c?.walletId,Y,i)},F=()=>{globalThis.open(i.faucetUrl)},A=x||e||!t&&!i?.faucetUrl||r.pending||u.sign||u.token||a,{loading:G,onClick:D}=J(k),O={disabled:A,actionType:N.ACTION_TYPE.CONFIRM,onClick:D,loading:G};return!t&&i?.faucetUrl&&(O.actionType=N.ACTION_TYPE.FILL_UP,O.onClick=F,O.btnText=p("wallet_extension_transfer_btn_via_faucet")),[I,O]},ur=Jr;s();m();W();ue();var $r=({customGasInfo:e,chainGasLoadFailed:t,modifiedDataError:n,isSufficientBalance:o,isRevokeTx:a,transaction:c,loading:l})=>{let{auth:i,chain:d}=c,r=de(i.name||ve),u=de(i.symbol||ve),T=()=>e?.baseFeePerGas==="0"?{type:X.TYPE.warn,message:p("wallet_extension_transaction_error_base_zero")}:null,f=()=>n?{}:null,_=()=>o?null:{type:X.TYPE.warn,message:p("wallet_extension_popup_insufficient_network_fee",{token:d.symbol})},x=()=>t?{type:Ie.TIP_TYPE.FEE_ERROR}:null,C=()=>a?{type:X.TYPE.info,message:p("extension_revoke_approval_alert_evoke_authorization",{contract:r,asset:u})}:null,g=()=>ze(i.customApproveAmount)?{type:X.TYPE.warn,message:p("wallet_extension_popup_unlimited_transfer",{contract:r,asset:u})}:K(i.customApproveAmount,0)?{type:X.TYPE.warn,message:p("extension_approve_alert_authorized_tips",{contract:r,asset:u})}:null;if(l)return null;let I=[f,_,C,g,x,T];for(let k=0;k<I.length;k++){let F=I[k],A=F();if(A)return A}return null},fr=$r;var _t=({unapproved:e,rpcInfo:t})=>{let{origin:n,params:o}=e,{from:a,value:c,to:l}=o,[i,d]=(0,P.useState)(""),[r,u]=(0,P.useState)(!1),T=xo(i),f=tt(n,a),[_,x]=bo({...o,...e,walletId:f?.walletId},t),{title:C,auth:g,meta:I,nonce:k,gas:F,loading:A,data:G}=_,{setNonce:D,setAuthAmount:O}=x,{chainGasInfo:Y,customGasInfo:L,chainGasLoading:q,chainGasLoadFailed:ce,stopPollingGasPrice:le,updateCustomGasInfo:j,chainGasLimitLoadFailed:z}=F,V=no(void 0,void 0,t),Te=Mo(L);Ao(t),Go(a,t),Oo();let Fe=Ue(V?.balance,pe(Te,At(c||0))),Ae=fr({customGasInfo:L,chainGasLoadFailed:ce,isSufficientBalance:Fe,isRevokeTx:g.isRevoke,modifiedDataError:T,transaction:_,loading:q}),oe=ur({chainGasLoadFailed:ce,isSufficientBalance:Fe,transaction:_,actions:x,modifiedDataError:T,walletInfo:f,params:o,rpcInfo:t}),re=Q=>{j(Q),u(!1)};return P.default.createElement(E.Container,null,P.default.createElement(pr,{title:C,confirmBuryPointFn:()=>{},onUpdateAuthAmount:Q=>{O(Q)},dappInfo:I.originInfo,loading:A.token,approveToken:g}),P.default.createElement($,null,P.default.createElement(Ze,{onClick:()=>{u(!0)},injectCoin:V,loading:q,estimateFailed:ce,networkFee:q?void 0:Re(Te,10**V?.decimals)})),P.default.createElement($,null,P.default.createElement(Le,{title:p("wallet_extension_network_address_title_walletused"),address:f.address,walletId:f.walletId}),!!l&&P.default.createElement(Le,{title:p("wallet_extension_popup_text_interact_with"),address:l})),P.default.createElement(mr,{nonce:k.custom,suggestedNonce:k.suggested,setNonce:D}),G?P.default.createElement($,{bordered:!1},P.default.createElement(Eo,{data:G,copyable:{hideDesc:!0}})):P.default.createElement($,{bordered:!1},P.default.createElement(To,{value:i,error:T,onChange:d})),P.default.createElement(ye,{placeholder:!0,offsetBottom:0,borderTop:!0},!T&&P.default.createElement(Ie,{...Ae}),P.default.createElement(N,{buttonGroup:oe})),r?P.default.createElement(Do,{onBack:()=>{u(!1)},rpcInfo:t,chainGasInfo:Y,customGasInfo:L,updateCustomGasInfo:re,stopPollingGasPrice:le,chainGasLimitLoadFailed:z}):null)};s();m();var B=h(M()),_r=h(Ce());W();wt();s();m();var se={root:"_root_184nf_1",main:"_main_184nf_5",tips:"_tips_184nf_10",list:"_list_184nf_16",item:"_item_184nf_16",title:"_title_184nf_22",footer:"_footer_184nf_29"};var dr={uniqueId:be,rpcUrl:p("wallet_extension_rpc_title_official")},en=({targetRpcChain:e,targetMainChain:t,handleSelect:n})=>{let[o,a]=(0,B.useState)({}),c=[...e],l=!!t.length;l&&c.unshift(dr);let[i,d]=(0,B.useState)(!1),{updateRpcNetwork:r}=$e(),u=(0,B.useCallback)(async()=>{try{d(!0);let f=e.find(_=>!!_.isDefaultRpc);if(o.isDefaultRpc||o.uniqueId===be&&!f)return;f&&await r({...f,isDefaultRpc:!1}),await r({...o,isDefaultRpc:!0})}catch(f){console.log(f)}finally{d(!1)}},[o,e,r]),T=(0,B.useCallback)(async()=>{await u(),n(o)},[o,n,u]);return(0,_r.useMount)(()=>{let f=e.find(_=>_.isDefaultRpc);f?a(f):l&&a(dr)}),B.default.createElement(E.FlexBox,{className:se.root,direction:E.DIRECTION.vertical},B.default.createElement(Xe,{backable:!1,closeable:!1,title:p("wallet_extension_rpc_title_select_rpc")}),B.default.createElement(E.Box,{className:se.main},B.default.createElement(E.Box,{className:se.tips},p("wallet_extension_rpc_desc_select_rpc_current")),B.default.createElement(E.Box,{className:se.list},c.map(f=>B.default.createElement(E.Box,{className:se.item,onClick:()=>{a(f)}},B.default.createElement(Jt,{ellipsis:!0,className:se.title},f.rpcUrl),B.default.createElement(qe.Circle,{checked:f.uniqueId===o.uniqueId}))))),B.default.createElement(E.Box,{className:se.footer},B.default.createElement(N,{buttonGroup:[{loading:i,disabled:!o.uniqueId,actionType:N.ACTION_TYPE.CONFIRM,onClick:T}]})))},Tr=en;var tn=e=>{let{unapproved:t}=e,{rpcNetworks:n,status:o}=$e(),a=io({appBaseChain:"ethereum"})||[],c=a.filter(r=>Se(r.realChainIdHex,t.chainId)),l=n.filter(r=>Se(r.chainId,t.chainId)),[i,d]=(0,te.useState)(null);return o==="loading"||!a?.length?te.default.createElement(ro,null):c.length+l.length>1?i?i.uniqueId===be?te.default.createElement(ft,{...e}):te.default.createElement(_t,{...e,rpcInfo:i}):te.default.createElement(Tr,{networkType:t.networkType,targetRpcChain:l,targetMainChain:c,handleSelect:d}):c.length?te.default.createElement(ft,{...e}):te.default.createElement(_t,{...e,rpcInfo:l[0]})},xr=tn;var Qm=(0,me.memo)(({unapproved:e})=>{switch(e.method){case Rt.SEND_EVM_INSCRIPTIONS:return me.default.createElement($o,{unapproved:e});default:break}switch(e.type){case ne.ETH_SIGN:case ne.PERSONAL_SIGN:case ne.ETH_SIGN_TYPED_DATA:case ne.ETH_GET_ENCRYPTION_PUBLIC_KEY:case ne.ETH_DECRYPT:return me.default.createElement(vo,{unapproved:e});case ne.WATCH_ASSET:return me.default.createElement(jo,{unapproved:e});case ne.ADD_ETHEREUM_CHAIN:return me.default.createElement(Lo,{unapproved:e});default:return me.default.createElement(xr,{unapproved:e})}});export{Qm as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Ethereum-XNVUNHVX.js.map
