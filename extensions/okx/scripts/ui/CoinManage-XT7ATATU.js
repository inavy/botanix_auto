import{a as Ne}from"./chunk-XTIUEDQS.js";import{a as Te}from"./chunk-XOVJBJ4C.js";import{a as Ie}from"./chunk-5KEHB47Y.js";import{a as H,b as q}from"./chunk-4X63GWKJ.js";import{a as xe,b as be}from"./chunk-ZHGQXCUR.js";import"./chunk-4KRBAMDM.js";import"./chunk-RHAJGQZT.js";import{a as Ae}from"./chunk-QWOSC34H.js";import{a as N}from"./chunk-AEU3J7K7.js";import{a as W}from"./chunk-ZBRU2CAM.js";import"./chunk-6QV7GAE5.js";import"./chunk-MUF5KFVU.js";import"./chunk-CR7XMKUK.js";import{c as we}from"./chunk-SSZF4QIS.js";import{l as ye}from"./chunk-3DNJNRLL.js";import"./chunk-FPIWIEGC.js";import{c as Le,d as O}from"./chunk-ZDO7TFIW.js";import"./chunk-MTJW726U.js";import"./chunk-I3X2I3EE.js";import"./chunk-4JU7MQBN.js";import"./chunk-25SZ52UW.js";import"./chunk-SGHBHZD2.js";import"./chunk-DAXYD52J.js";import"./chunk-3VDT32YX.js";import{d as h}from"./chunk-OLBL2ESK.js";import"./chunk-WFHUBXJH.js";import"./chunk-YL2OEBEM.js";import"./chunk-UBREW6HU.js";import"./chunk-33LBA2KN.js";import"./chunk-BYUE2OWP.js";import"./chunk-ZW25VTKR.js";import"./chunk-OZL64JKT.js";import"./chunk-SF4X4VPT.js";import"./chunk-EUVFIXQT.js";import"./chunk-WJQMDYRJ.js";import"./chunk-OANAR4PZ.js";import"./chunk-DY3DHSF2.js";import"./chunk-DM55GZK5.js";import{d as fe}from"./chunk-OVX2PTCV.js";import"./chunk-VHMLJAAA.js";import{h as he}from"./chunk-DS7KEGTF.js";import"./chunk-GWV4SS46.js";import{a as Se}from"./chunk-YFSBCNC7.js";import"./chunk-OFUXQTAD.js";import{a as ve}from"./chunk-NRCRSATA.js";import"./chunk-LANQTZFO.js";import"./chunk-NZHMCNZN.js";import"./chunk-CBDQQ72I.js";import{G as pe,H as D,a as ue}from"./chunk-4HJMB7P7.js";import{b as Ce}from"./chunk-A2W6OJDL.js";import{q as b}from"./chunk-U7RD3Z4E.js";import"./chunk-CJVER5MJ.js";import"./chunk-S5IEFQ34.js";import{o as T}from"./chunk-XHNZXPBB.js";import{ac as so,m as se,r as de,sa as _e,v as me}from"./chunk-ZTS7374H.js";import"./chunk-EY7FXYAJ.js";import"./chunk-B26CCOB3.js";import"./chunk-D2RJYC6D.js";import"./chunk-VMA4KAKW.js";import"./chunk-XJYCT5UP.js";import"./chunk-XIAMW27T.js";import"./chunk-QYHQY2ME.js";import"./chunk-FT7VATMT.js";import{a as ge}from"./chunk-YYAHGUV5.js";import"./chunk-7ZE3XWQE.js";import"./chunk-42AETIVN.js";import"./chunk-DKCCIZ3Q.js";import"./chunk-C77R5D6K.js";import{c as A}from"./chunk-HBMVMNWX.js";import{Tc as le,Vc as io,Wc as ce,Xc as ao,pb as re,vb as no}from"./chunk-IS2B3ORW.js";import"./chunk-YGSCKFAL.js";import{q as J,y as ae}from"./chunk-TDPA2BUG.js";import"./chunk-BJO2AFCW.js";import{M,w as _}from"./chunk-OIAB2YVD.js";import"./chunk-QHMZGTYF.js";import"./chunk-X5EUMZZI.js";import"./chunk-PJSODKKF.js";import{T as ie,Z as P,c as ne}from"./chunk-VXVCGVBA.js";import"./chunk-G6JM4G2M.js";import{a as v}from"./chunk-DAL2TMJA.js";import"./chunk-IEDGM2AY.js";import"./chunk-DAX5D55P.js";import"./chunk-UAZMAR7J.js";import"./chunk-BQF3XODK.js";import"./chunk-I5RKKMWZ.js";import"./chunk-4LMFSJNF.js";import"./chunk-P5TEJB3G.js";import"./chunk-AXAVBTOG.js";import"./chunk-SEHRB2F7.js";import"./chunk-IH7OWVTK.js";import"./chunk-RF2WJL7B.js";import"./chunk-K5MXWGTT.js";import"./chunk-OTDALOBJ.js";import"./chunk-JCKY6H7C.js";import"./chunk-6AWMYHRK.js";import"./chunk-5VBNU5MN.js";import{f as a,m as t,o as r}from"./chunk-JEQEC2HU.js";t();r();var d=a(v()),Ve=a(ge()),Xe=a(ne());M();t();r();var ke=a(Ne()),Z=a(v());M();t();r();var y={"list-title":"_list-title_7pub3_1",listTitle:"_list-title_7pub3_1","empty-box":"_empty-box_7pub3_6",emptyBox:"_empty-box_7pub3_6","search-text":"_search-text_7pub3_10",searchText:"_search-text_7pub3_10","coin-box":"_coin-box_7pub3_13",coinBox:"_coin-box_7pub3_13","icon-add":"_icon-add_7pub3_13",iconAdd:"_icon-add_7pub3_13","icon-remove":"_icon-remove_7pub3_16",iconRemove:"_icon-remove_7pub3_16","icon-not-remove":"_icon-not-remove_7pub3_19",iconNotRemove:"_icon-not-remove_7pub3_19","clear-icon":"_clear-icon_7pub3_22",clearIcon:"_clear-icon_7pub3_22"};var Ee=({renderCoin:e,list:n})=>Z.default.createElement(A.Box,null,Z.default.createElement(b.Text,{className:y.listTitle,size:b.SIZE.xs,type:b.TYPE.secondary},_("wallet_manage_crypto_list_added_crypto")),Z.default.createElement(h,{itemKey:"coinId",renderEmpty:!1,renderItem:e,dataSource:n,component:ke.default,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade-added"}));t();r();var K=a(v()),Be=a(T());M();no();var Q=({coin:e,deleteAddedCoinAbled:n,onAction:o,isSearchStatus:s})=>{let i="",m="",c=be(),u=e?.aggregation;e?.added?n?(i="okx-wallet-plugin-take",m="icon-remove"):(i="okx-wallet-plugin-take",m="icon-not-remove"):(i="okx-wallet-plugin-add",m="icon-add");let g=de({coinId:e?.baseCoinId})&&!!e?.address,S=s&&!u&&!g&&!!e?.address,w=(0,Be.useCreation)(()=>c(e),[e?.coinId,c]);return K.default.createElement(h.Coin,{className:y["coin-box"],hovered:!1,name:e?.coinId===re?e?.chainName:e?.name,icon:e.image,symbol:e.symbol,address:S&&`${_("wallet_manage_crypto_label_contract_address")}: ${se(e?.address)}`,tag:u?_("wallet_manage_crypto_labels_crypto_multichain"):e.tokenType},!w&&e?.added?K.default.createElement(xe,{coinId:e?.coinId,from:pe}):K.default.createElement(Ce.IconButton,{className:y[m],disabled:e?.added&&!n,onClick:()=>{o(e)},icon:{icon:i}}))};t();r();var Y=a(v()),Fe=a(ne());var Me=Y.default.memo(({search:e,setSearch:n,spinLoading:o})=>!e||e.length===0?null:o?Y.default.createElement(P.Circle,{size:P.SIZE.sm}):Y.default.createElement(ie,{className:(0,Fe.default)("okds-clear-fill",y.clearIcon),onClick:()=>{n("")}}));t();r();var V=a(v());t();r();var Pe=a(v()),Re=a(ge());M();var ze=()=>{let e=(0,Re.useHistory)();return Pe.default.createElement(ae.State,{className:y["empty-box"],title:_("wallet_search_text_search_no_results"),buttonText:_("wallet_manage_crypto_text_add_custom_crypto"),onButtonClick:()=>{e.push(D)}})};var Ue=({loadingMore:e,searchCoins:n,renderCoin:o,spinLoading:s})=>V.default.createElement(h,{itemKey:"coinId",dataSource:n,renderItem:o,loadingMore:e,renderEmpty:()=>s?null:V.default.createElement(ze,null)});t();r();var k=a(v()),De=a(Ne());M();var Oe=(0,k.forwardRef)(({unAddedLoadingMore:e,renderCoin:n,unAddedLoading:o,unAddedList:s})=>s.length===0?null:k.default.createElement(A.Box,null,k.default.createElement(b.Text,{className:y.listTitle,size:b.SIZE.xs,type:b.TYPE.secondary},_("wallet_manage_crypto_subtitle_popular_crypto")),k.default.createElement(h,{itemKey:"coinId",renderEmpty:!1,renderItem:n,dataSource:s,component:!o&&De.default,loadingMore:e,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade"})));t();r();var He=a(T());t();r();var X=a(v()),We=a(T());function $(e,n){let o=(0,X.useRef)(null),s=(0,X.useRef)(Date.now());return(0,We.useMemoizedFn)((...m)=>{o.current||(e(...m),s.current=Date.now(),o.current=setTimeout(()=>{o.current=null},n))})}t();r();var G=(e,n)=>{if(e.aggregation){let o=n(e.childrenCoin);return{...e,childrenCoin:o}}return e};var qe=()=>{let e=W(),n=N();return(0,He.useCreation)(()=>ye(e,n).map(i=>({...i,added:!0})),[e])},Ze=()=>{let e=H();return $(n=>{let o=G(n,e);O(o)},500)};t();r();var Ke=a(so());var Ye=()=>{let{currentNetworkUniqueId:e}=(0,Ke.useSelector)(fe),n=we({netWorkId:e?String(e):void 0}),{data:o,loading:s,run:i}=Te(),m=o?.supportNetworkList,c=s&&!o?.supportNetworkList?.length,u=!!m&&m.length>0,g="";if(e!==""){let w=n?.coinId;g=(m||[]).find(x=>x.coinId===w)?.name||""}let S=`${D}?network=${g}`;return{supportCustomCoin:u,customCryptoPath:S,customCoinLoading:c,reloadCustomNetworkData:i}};t();r();var I=a(v()),R=a(T());var $e=()=>{let e=W(),n=N(),[o,s]=(0,I.useState)(""),i=(0,R.useDebounce)(o,{wait:500}),m=(0,I.useCallback)(f=>{s(f.target.value)},[]),[c,u]=(0,I.useState)(!0);(0,I.useEffect)(()=>{u(!!o)},[o]);let{data:g,loadingMore:S,listRef:w}=q({symbolLike:i,aggregation:!0,chainIds:n?[Number(n)]:void 0},{reloadDeps:[i],enableEmptyAccountCoins:!0,beforeRequest:()=>{if(!i)return{list:[],pageNo:0,isNoMore:!0}},onFinally(){u(!1)}}),x=(0,R.useCreation)(()=>new Set(e.map(f=>f.aggregation?f.symbol:f.coinId)),[e]),p=(0,R.useCreation)(()=>(g?.list??[]).map(C=>(C.added=x.has(C.aggregation?C.symbol:C.coinId),C)).sort((C,B)=>B.added-C.added),[x,g?.list]);return{searchListRef:w,search:o,searchCoins:p,searchLoading:c,searchLoadingMore:S,onSearch:m,setSearch:s}};t();r();t();r();var Ge=a(T());io();ao();function je(){let e=he();return(0,Ge.useMemoizedFn)(async n=>{try{let{code:o}=await le(ce.registerCustomCoinAddr,{coinAddrRegisterList:[{accountId:e,coinId:n}]},{needSign:!0});return o===0}catch{return!1}})}var Je=()=>{let e=H(),n=je();return $(async o=>{let s=me(o),i;if(s){if(i=await _e(o),!i)return}else i=o;i=G(i,e),o.added?O(i):await n(i.coinId)&&Le(i)},500)};t();r();var z=a(v()),E=a(T());var Qe=(e=[],n)=>{let o=N(),s=Ae(),i=(0,E.useCreation)(()=>new Set(e.map(L=>L.aggregation?L.symbol:L.coinId)),[e]),m=(0,E.useCreation)(()=>Array.from(new Set(Ie(e).map(L=>L.coinId))),[e]),{data:c,loading:u,loadingMore:g,listRef:S,reload:w}=q({aggregation:!0,chainIds:o?[Number(o)]:void 0,excludeCoinIds:m},{enable:!s,reloadDeps:[o],enableEmptyAccountCoins:!0}),x=(0,E.usePrevious)(i.size),p=i.size<x;(0,z.useEffect)(()=>{!n&&p&&w()},[p,i.size,n]);let f=(0,E.useCreation)(()=>c?.list?.filter(F=>!i.has(F.aggregation?F.symbol:F.coinId))??[],[c?.list,e])??[],[C,B]=(0,z.useState)(!0);return(0,z.useEffect)(()=>{u||B(!1)},[u]),{unAddedList:f,unAddedListRef:S,unAddedLoading:C,unAddedLoadingMore:g}};t();r();var U={"wallet-coin__manage":"_wallet-coin__manage_1imve_1",walletCoinManage:"_wallet-coin__manage_1imve_1","wallet-coin__manage__search":"_wallet-coin__manage__search_1imve_4",walletCoinManageSearch:"_wallet-coin__manage__search_1imve_4","wallet-coin__manage__spin":"_wallet-coin__manage__spin_1imve_8",walletCoinManageSpin:"_wallet-coin__manage__spin_1imve_8","wallet-coin__manage__spin__hidden":"_wallet-coin__manage__spin__hidden_1imve_11",walletCoinManageSpinHidden:"_wallet-coin__manage__spin__hidden_1imve_11","wallet-coin__manage__spin__auto":"_wallet-coin__manage__spin__auto_1imve_14",walletCoinManageSpinAuto:"_wallet-coin__manage__spin__auto_1imve_14","wallet-coin__manage__spin__custom":"_wallet-coin__manage__spin__custom_1imve_17",walletCoinManageSpinCustom:"_wallet-coin__manage__spin__custom_1imve_17","wallet-coin__manage__tag__title":"_wallet-coin__manage__tag__title_1imve_21",walletCoinManageTagTitle:"_wallet-coin__manage__tag__title_1imve_21","fade-enter":"_fade-enter_1imve_25",fadeEnter:"_fade-enter_1imve_25","fade-added-enter":"_fade-added-enter_1imve_26",fadeAddedEnter:"_fade-added-enter_1imve_26","fade-enter-active":"_fade-enter-active_1imve_30",fadeEnterActive:"_fade-enter-active_1imve_30","fade-added-enter-active":"_fade-added-enter-active_1imve_31",fadeAddedEnterActive:"_fade-added-enter-active_1imve_31",fade:"_fade_1imve_25","fade-added":"_fade-added_1imve_26",fadeAdded:"_fade-added_1imve_26","fade-leave-active":"_fade-leave-active_1imve_41",fadeLeaveActive:"_fade-leave-active_1imve_41","fade-added-leave-active":"_fade-added-leave-active_1imve_42",fadeAddedLeaveActive:"_fade-added-leave-active_1imve_42"};var mo=()=>{let e=(0,Ve.useHistory)(),{customCryptoPath:n,supportCustomCoin:o,customCoinLoading:s,reloadCustomNetworkData:i}=Ye(),{searchListRef:m,search:c,searchCoins:u,onSearch:g,searchLoading:S,searchLoadingMore:w,setSearch:x}=$e(),p=!!c,f=qe(),{unAddedList:C,unAddedListRef:B,unAddedLoading:L,unAddedLoadingMore:F}=Qe(f,p),eo=Ze(),ee=f?.length>1,oo=Je();(0,d.useEffect)(()=>{i()},[]);let to=j=>d.default.createElement(Q,{isSearchStatus:p,coin:j,onAction:eo,deleteAddedCoinAbled:ee}),oe=j=>d.default.createElement(Q,{isSearchStatus:p,coin:j,deleteAddedCoinAbled:ee,onAction:oo}),te=c?S:L,ro=_("wallet_manage_crypto_placeholder_search_coin");return d.default.createElement(A.Container,{className:"wallet-coin__manage"},d.default.createElement(ve,{offsetTop:0,style:{zIndex:100}},d.default.createElement(Se,{sticky:!1,closeable:!1,onBack:()=>{e.push(ue)},title:_("wallet_manage_crypto_maintitle_manage_crypto")}),o&&d.default.createElement(A.Box,{className:U["wallet-coin__manage__search"]},d.default.createElement(J.Search,{value:c,size:J.SIZE.md,placeholder:ro,onChange:g,cleanable:!1,suffix:d.default.createElement(Me,{search:c,setSearch:x,spinLoading:te})}))),d.default.createElement(A.Spin,{ref:p?m:B,className:(0,Xe.default)(U["wallet-coin__manage__spin"],U["wallet-coin__manage__spin__auto"]),loading:!1,size:P.SIZE.lg},!p&&!!o&&d.default.createElement(A.Spin,{loading:s&&!L},d.default.createElement(h.Cell,{className:U["wallet-coin__manage__spin__custom"],isLink:!0,to:n,title:_("wallet_manage_crypto_text_custom_crypto")})),p&&d.default.createElement(Ue,{itemKey:"coinId",searchCoins:u,renderCoin:oe,spinLoading:te,loadingMore:w}),!p&&d.default.createElement(Ee,{list:f,renderCoin:to}),!p&&d.default.createElement(Oe,{unAddedList:C,unAddedLoading:L,unAddedLoadingMore:F,renderCoin:oe})))},Tr=d.default.memo(mo);export{Tr as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CoinManage-XT7ATATU.js.map
