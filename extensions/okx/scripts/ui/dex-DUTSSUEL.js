import{a as ye}from"./chunk-2YS27XUX.js";import{a as Qt,b as $t}from"./chunk-U57OMHNJ.js";import{a as ho,b as xo}from"./chunk-O7QCW5DJ.js";import"./chunk-MHIYRBNW.js";import{a as po,b as go}from"./chunk-6F3WWRG3.js";import"./chunk-YN5DFOQA.js";import"./chunk-3FFSKRM6.js";import"./chunk-VIL7IDQ3.js";import{a as uo}from"./chunk-KVC25X33.js";import{a as yo,b as To}from"./chunk-OMXSCNTS.js";import"./chunk-HTSNA4MQ.js";import"./chunk-GTTN7234.js";import"./chunk-JMUBF4HO.js";import"./chunk-BSTZKYKS.js";import"./chunk-74FDEN4I.js";import"./chunk-34SDSJSV.js";import"./chunk-BWEVT6TQ.js";import"./chunk-34U7HVOO.js";import"./chunk-MRJI34GT.js";import"./chunk-O2ZAUKTP.js";import"./chunk-YUU6WMAM.js";import"./chunk-URHEQFFQ.js";import{a as wo}from"./chunk-RCUPJ64V.js";import{a as co,d as mo,e as fo}from"./chunk-45MY2MVD.js";import{k as Io}from"./chunk-SB5S3UIY.js";import{a as So}from"./chunk-EATPE2HY.js";import"./chunk-AMZN2EAS.js";import"./chunk-4FRWD727.js";import"./chunk-7WAPJBDH.js";import"./chunk-GE7QYBP5.js";import"./chunk-QEKVDPIG.js";import"./chunk-WJYVGS4V.js";import"./chunk-CSJR56CD.js";import{a as zt,b as ge,c as Xt,d as Kt}from"./chunk-5D7TO4KC.js";import{b as lo}from"./chunk-AXEFST5N.js";import"./chunk-P3HGPAYY.js";import"./chunk-I4WXKCYQ.js";import"./chunk-7SJN24EA.js";import"./chunk-G5K5AHVE.js";import"./chunk-SK7ZM24Q.js";import"./chunk-F4M2S35A.js";import{a as Ut}from"./chunk-LLR77RUB.js";import"./chunk-UR2TI236.js";import{i as qt,m as Yt,r as jt,t as Zt}from"./chunk-YC3K6KSF.js";import"./chunk-5VYKPDIW.js";import{c as Ht,e as Vt}from"./chunk-T4SJQSS7.js";import{a as Ot}from"./chunk-XWRXEU7I.js";import"./chunk-3V4N3SLP.js";import"./chunk-CHH4UZQE.js";import"./chunk-YMOXEVIF.js";import"./chunk-ZBRU2CAM.js";import"./chunk-V3INX46H.js";import"./chunk-JTVJ673F.js";import{a as er}from"./chunk-B575PQ5P.js";import{a as so}from"./chunk-5LTIWCHX.js";import"./chunk-N2FTPZRD.js";import{a as ro}from"./chunk-MIZXVXK6.js";import{e as vt}from"./chunk-GNBB55K5.js";import"./chunk-EC67JB7S.js";import"./chunk-WINPS5JO.js";import{b as to,c as oo,d as no,e as ao,h as io}from"./chunk-GANFA4Y3.js";import"./chunk-BNPYGBEA.js";import{a as Gt,d as Bt}from"./chunk-75JFJJ6E.js";import"./chunk-LP4N2DPM.js";import"./chunk-X33AIBUY.js";import"./chunk-2QOPEGZA.js";import"./chunk-WOF2MG5G.js";import{a as Mt}from"./chunk-6QV7GAE5.js";import"./chunk-QT2MBFKK.js";import{d as Rt,f as Wt}from"./chunk-MUF5KFVU.js";import"./chunk-BSWNOA7X.js";import"./chunk-NWOIYLOG.js";import"./chunk-JLHU3WBU.js";import{a as eo}from"./chunk-QPQGDYXW.js";import"./chunk-33CD6775.js";import"./chunk-RV4CTONM.js";import"./chunk-5GIEDSLN.js";import"./chunk-PL466WLP.js";import{a as Jt}from"./chunk-WPUSOCZ5.js";import"./chunk-6NFIXY6G.js";import"./chunk-IGLJY5RQ.js";import"./chunk-BOYKE4FM.js";import"./chunk-UF32D7MW.js";import"./chunk-CR7XMKUK.js";import"./chunk-SSZF4QIS.js";import"./chunk-M24SOKF4.js";import{g as bt}from"./chunk-IHQQQ2WB.js";import"./chunk-BECDKZPI.js";import"./chunk-6RN7QRT2.js";import"./chunk-2KZZYSI5.js";import"./chunk-IHZLSNJE.js";import"./chunk-TCK4KH7A.js";import"./chunk-3VL5K7XK.js";import"./chunk-GKGUF4PB.js";import"./chunk-ENATTSEA.js";import"./chunk-Y6YYFXOD.js";import"./chunk-3N45D4U2.js";import"./chunk-XCYZGVDR.js";import"./chunk-Y6TYNJA3.js";import"./chunk-ZML7M4AG.js";import"./chunk-SXKGQ5LH.js";import"./chunk-D6BE4A4F.js";import"./chunk-HTIBXKUW.js";import"./chunk-RCA3QBWG.js";import"./chunk-SSTSMCPU.js";import"./chunk-LF7H3MNC.js";import"./chunk-7BIQTKIW.js";import{k as Q}from"./chunk-KCCATSGJ.js";import"./chunk-BQUWM53Y.js";import"./chunk-XEXJRJUY.js";import{c as Ft}from"./chunk-3DNJNRLL.js";import"./chunk-FPIWIEGC.js";import{a as ue,h as xt}from"./chunk-3MOQA4IF.js";import"./chunk-2I7TRLZ4.js";import{a as $o}from"./chunk-FTIBA2E3.js";import"./chunk-4NL2T6HT.js";import"./chunk-XCH6DNMD.js";import{a as Be,b as Oe,g as mt}from"./chunk-2ILOCZTU.js";import"./chunk-5D6FMALX.js";import"./chunk-WNBXIYVP.js";import"./chunk-BPSSG62G.js";import"./chunk-ZDO7TFIW.js";import"./chunk-MTJW726U.js";import{a as Et,b as Pt}from"./chunk-I3X2I3EE.js";import"./chunk-4JU7MQBN.js";import"./chunk-25SZ52UW.js";import{a as pe}from"./chunk-SGHBHZD2.js";import"./chunk-DAXYD52J.js";import"./chunk-3VDT32YX.js";import"./chunk-RNBNCNHM.js";import"./chunk-ZUBJ4HSQ.js";import"./chunk-NRDSUSOX.js";import"./chunk-OLBL2ESK.js";import{j as Nt}from"./chunk-WFHUBXJH.js";import"./chunk-YL2OEBEM.js";import"./chunk-UBREW6HU.js";import"./chunk-33LBA2KN.js";import"./chunk-NPTEYWCZ.js";import"./chunk-BYUE2OWP.js";import"./chunk-ZLXZXLBF.js";import"./chunk-3SFQGMQT.js";import"./chunk-PCTAUYQN.js";import{a as _t}from"./chunk-ZW25VTKR.js";import"./chunk-OZL64JKT.js";import{a as Lt}from"./chunk-SF4X4VPT.js";import"./chunk-EUVFIXQT.js";import"./chunk-WJQMDYRJ.js";import{a as de}from"./chunk-OANAR4PZ.js";import"./chunk-DY3DHSF2.js";import"./chunk-LZKLGZM5.js";import"./chunk-DM55GZK5.js";import"./chunk-OVX2PTCV.js";import"./chunk-Y57SQLFF.js";import"./chunk-C6D3UGMF.js";import"./chunk-VHMLJAAA.js";import{i as kt}from"./chunk-DS7KEGTF.js";import"./chunk-GWV4SS46.js";import"./chunk-EOU2NWJ4.js";import{a as Dt}from"./chunk-YFSBCNC7.js";import"./chunk-OFUXQTAD.js";import"./chunk-AJGKE3VO.js";import{a as At}from"./chunk-NRCRSATA.js";import"./chunk-LANQTZFO.js";import"./chunk-NZHMCNZN.js";import"./chunk-CBDQQ72I.js";import{a as ct}from"./chunk-4HJMB7P7.js";import"./chunk-A2W6OJDL.js";import"./chunk-U7RD3Z4E.js";import"./chunk-CJVER5MJ.js";import{e as ft}from"./chunk-S5IEFQ34.js";import{o as le}from"./chunk-XHNZXPBB.js";import{G as me,Ga as at,H as q,I as Y,Ia as it,M as rt,Ob as Tt,Q as nt,Ua as st,ac as St,db as lt,nb as ut,p as Ke,pb as pt,rb as dt,tb as gt,xb as yt,yb as j}from"./chunk-ZTS7374H.js";import"./chunk-QXE433GW.js";import"./chunk-EY7FXYAJ.js";import{d as w,f as ae}from"./chunk-B26CCOB3.js";import"./chunk-RRPGPABV.js";import"./chunk-D2RJYC6D.js";import"./chunk-VMA4KAKW.js";import"./chunk-XJYCT5UP.js";import{a as Ct}from"./chunk-XIAMW27T.js";import{E as $e,L as ce,U as et,Z as tt,ea as ot,p as Ze,v as se,x as Qe}from"./chunk-QYHQY2ME.js";import"./chunk-FT7VATMT.js";import{a as Qo}from"./chunk-YYAHGUV5.js";import{a as It,b as Z}from"./chunk-QJGSL63Z.js";import"./chunk-7ZE3XWQE.js";import"./chunk-42AETIVN.js";import{a as wt,u as ht}from"./chunk-DKCCIZ3Q.js";import"./chunk-C77R5D6K.js";import{c as fe}from"./chunk-HBMVMNWX.js";import{$ as W,Aa as be,Ab as ve,Bb as Ge,Cb as Ko,Db as H,Eb as He,Fb as X,Ha as Re,Ja as re,Lc as J,Pc as Je,Sb as Ve,V as oe,Vc as Yo,Wc as qe,X as ke,Xa as L,Xc as jo,aa as F,ac as Ue,cc as ze,d as xe,da as Le,dc as Xe,e as zo,ec as Jo,fc as ne,ia as _e,ja as De,la as U,lc as qo,mb as O,o as te,qa as M,u as Pe,vb as We,wc as _,xa as Ne,xb as Me,xc as K,y as Ae,za as z}from"./chunk-IS2B3ORW.js";import"./chunk-YGSCKFAL.js";import"./chunk-TDPA2BUG.js";import{f as Fe,j as P,o as Ce,pa as B,r as Ee}from"./chunk-BJO2AFCW.js";import{M as ee,w as A}from"./chunk-OIAB2YVD.js";import{b as Xo}from"./chunk-QHMZGTYF.js";import"./chunk-X5EUMZZI.js";import"./chunk-PJSODKKF.js";import"./chunk-VXVCGVBA.js";import"./chunk-G6JM4G2M.js";import{a as R}from"./chunk-DAL2TMJA.js";import{W as je,t as ie,v as Ye}from"./chunk-IEDGM2AY.js";import"./chunk-DAX5D55P.js";import"./chunk-UAZMAR7J.js";import"./chunk-BQF3XODK.js";import{a as Zo}from"./chunk-I5RKKMWZ.js";import"./chunk-5JKXPY2G.js";import"./chunk-TOYD7KFM.js";import"./chunk-4LMFSJNF.js";import"./chunk-HUENZ3FY.js";import"./chunk-VNO3IDCT.js";import"./chunk-P5TEJB3G.js";import"./chunk-AXAVBTOG.js";import"./chunk-SEHRB2F7.js";import"./chunk-IH7OWVTK.js";import"./chunk-RF2WJL7B.js";import"./chunk-K5MXWGTT.js";import"./chunk-OTDALOBJ.js";import"./chunk-JCKY6H7C.js";import"./chunk-IGOE6FNH.js";import"./chunk-23R5U7AT.js";import"./chunk-2OYABAWU.js";import"./chunk-SUEGF6ID.js";import"./chunk-6ZQNEFQR.js";import"./chunk-6AWMYHRK.js";import"./chunk-5VBNU5MN.js";import{f as y,l as process,m as T,o as I}from"./chunk-JEQEC2HU.js";T();I();var V=y(R()),E=y(St()),$=y(Qo()),Uo=y(le());B();ee();Jo();zo();Ae();J();We();L();jo();Yo();Ko();T();I();var Te=y(R());ee();L();var Fo=({visible:t,onClose:e,onChange:o,walletId:n})=>Te.default.createElement(ye,{visible:t,onClose:e,onChange:o,coinId:Ne,walletId:n},Te.default.createElement(ye.Header,{title:A("extension_defi_top_header_title_select_address_type"),subTitle:A("extension_defi_popup_desc_new_address_default")}));T();I();var Co=y(R()),Eo=y(le());B();var Po=y($o());ae();J();L();var tr=({walletId:t,txParams:e,onConfirm:o,onCancel:n,backable:a=!1,onBack:r,asPage:i})=>{let s=kt(t),m=Lt(F,s?.walletId),c=Vt({coinAmount:0,localType:F,coinId:be,fromAddr:m,walletId:s?.walletId,txSource:K.DAPP}),f={localType:F,params:{transaction:e},walletId:s?.walletId},l=(0,Eo.useMemoizedFn)(async({networkFee:u})=>{let{raw_data:p,raw_data_hex:d,txID:S,visible:x}=e||{};try{let h=await w().signCommonMessage(m,{type:"protobuf",message:JSON.stringify({txID:S,visible:x,raw_data:p,raw_data_hex:d})},F),D=Po.default.address.fromHex(P(p,"contract[0].parameter.value.contract_address",m)),N=await Gt(F,h);await c(h,{toAdr:D,txHash:N,serviceCharge:u}),o?.({txHash:N})}catch(h){o({error:h})}});return Co.default.createElement(go,{backable:a,onBack:r,asPage:i,unapproved:f,onCancel:n,onConfirm:l})},Ao=tr;T();I();var C=y(R()),vo=y(St());var Go=y(le());B();ee();T();I();var ko=y(R());Xo();L();var or=async(t={})=>{let{contractAddress:e,contractName:o,functionName:n,functionArgs:a}=t,{getRawTransaction:r}=await ue(),i={data:{type:se.CONTRACT_CALL,data:{contract:e,contractName:o,functionName:n,functionArgs:a}}};return await r(5757,i)},rr=async(t={})=>{let{recipient:e,amount:o,memo:n}=t,{getRawTransaction:a}=await ue(),r={data:{type:se.TRANSFER,data:{to:e,amount:o,memo:n}}};return await a(5757,r)},nr=async(t={})=>t.txType===ce.CONTRACT_CALL?or(t):t.txType===ce.STX_TRANSFER?rr(t):"",Lo=async({transaction:t={},fromAddress:e,value:o})=>{let n=await nr(t);return(await So({coinId:Re,fromAddress:e,value:o,inputData:n}))?.gasLimit||"0"};T();I();var ar=y(R());B();L();ae();async function _o(t,e){let o=async()=>await q({coinId:re,address:t},{fromAddr:t,toAddr:""}),n=async m=>{let c=P(m,"info.nonce",0),f={type:Qe.MULTI_CONTRACT_CALL,nonce:c,maxFee:0,chainId:Qt.StarknetChainId.SN_MAIN,multiContractCallData:{from:t,calls:e}};return(await w().signTransaction(f,t,U))?.signature},a=async m=>{let{data:c}=await Y({coinId:re,address:t,inputData:m});return c?.gasLimit},r=await o(),i=await n(r);return await a(i)}qo();Ae();J();L();ze();ae();T();I();var Do=y(er()),Ie=y(Zo());B();J();We();L();ze();async function No(t,e){return(await xt()).address.fromHex(P(t,"raw_data.contract[0].parameter.value.contract_address",e))}function bo(t){return P(t,"raw_data.contract[0].parameter.value.data","")}function Ro(t){let e=P(t,"raw_data.contract[0].parameter.value.call_value"),o=P(t,"raw_data.contract[0].parameter.value.amount","");return e||o}async function ir(t){let{data:e={}}=await me({coinId:z,address:t},{fromAddr:t}),{info:o={}}=e;return o}async function sr(t,e){let{transaction:o,bizType:n,bizId:a=[],notReplaceBlockhash:r=!1}=t,i=null,s=()=>typeof t?.toJSON=="function"?t:t?.instruction,{recentBlockhash:m,lastValidBlockHeight:c}=await ir(e),f=s();return f?i=new ie({feePayer:e,blockhash:m,lastValidBlockHeight:c}).add(f):o&&(r||(o instanceof Ye?o.message.recentBlockhash=m:(o.signatures=[],o.recentBlockhash=m),o.lastValidBlockHeight=c,a.forEach(l=>{let u=(0,Do.mnemonicToSeed)(n,l),p=je.fromSeed(u.slice(0,32));o?.version>=0?o.sign([p]):o.partialSign(p)})),i=o),i}async function Wo(t,e){let o=await sr(t,e);return o instanceof ie?Ie.default.encode(o.serialize({requireAllSignatures:!1,verifySignatures:!1})):Ie.default.encode(o.serialize())}function G(t){let e=O({netWorkId:String(t)}),o=e?.baseChain||"",n=e?.localType||"",a=e?.coinId||3,r=e?.realChainIdHex;return{baseCoinId:a,networkType:n,chainId:r,baseChain:o}}async function Se({networkId:t,address:e,data:o,tokenAddress:n}){let a={},{baseCoinId:r}=G(t),i={coinId:r,address:e},s={fromAddr:e,value:"0"},m={address:e,inputData:o,coinId:r,value:"0",tokenAddress:n},{data:c}=await Y(m),{gasLimit:f}=c,{data:{info:l}}=await me(i,s),u=l?.needExtFee||!1,p=l?.gasPrice||{},{normal:d,proposePriorityFee:S,supportEip1559:x}=p;if(!u)return a={maxFeePerGas:d,maxPriorityFeePerGas:S,gasPrice:d,gasLimit:f,supportEip1559:x,networkFee:H(d,f)},a;let h={from:e,to:n,data:o,value:Z(0),gasPrice:Z(d),gasLimit:Z(f)},D=Ke(h),N=await Ut(D),b=await rt({coinId:r},{inputData:N}),g=X(H(d,f),b);return a.networkFee=g,a.extFee=b,a}function k(t,e){return Ue(He(t,10**e))}var cr=({code:t,data:e,error_message:o,error:n})=>{if(t!==0||!e||e.queryGasLimitErrorUseDefault||n)return{fee:0,error:o};let{gasLimit:a="0"}=e;return{...e,fee:a,error:!1}};async function we({walletId:t,coinId:e,fromAddr:o,tx:n}){let a=n[0],r=a?.messages||[],i=a?.network||1,s=r?.valid_until||Math.floor(Date.now()/1e3)+600,{address:m}=r[0]||{},c=await q({coinId:e,address:o,toAddr:m,fromAddr:o}),f=c?.chainId,l=c?.info?.nonce,u=await ho({nonce:l,localType:M,fromAddr:o,walletId:t,messages:r,network:i,validUntil:s}),p=JSON.stringify(u.stringInputParams),d=await xo({fromAddr:o,chainId:f,coinId:e,inputData:p}),S=cr(d),x={coinId:e,coinAmount:0,inputData:p,fromAdr:o,toAdr:m,serviceCharge:S?.fee,extJson:JSON.stringify({nonce:l}),txSource:K.DEX,accountId:t,walletType:ot.IMPORT,transactionParams:u?.transactionParams};return{feeInfo:S,extParams:x}}var Mo=-42412,mr=-42418,fr=Ee(Xt,500);function Bo(t,e){let{baseCoinId:o}=G(t),n=Rt(e?void 0:o,void 0,e?{chainId:+t,address:e}:void 0),a=(0,C.useRef)({coinAmount:0,coinAmountInt:0,currencyAmount:0,currencyAmountUSD:0});return Wt(n?.coinId)||a.current}async function lr({coinId:t=3},{gasInfo:e={},calldata:o}){let{networkFee:n,isNetworkFeeLoading:a,isGasLimitLoading:r}=e,i=a||r,{minGasFee:s}=zt(e),m=Ve(s),c=ge(e,"swap"),f=await fr(t,o),l=c||f;return l===!0&&(l=A("swaptrade_extension_cinteraction_might_error")),{fee:m,feeInt:s,maxFeeInt:n,loading:i,error:l}}async function ur(t,{decimals:e},{calldata:o}){let{transaction:n}=o,{fee:a}=await nt({coinId:z,address:t}),r;if(n){let c=it(n);r=at(n,c)}let{totalPriorityFee:i}=await yo([r]),s=X(a,i);return{fee:k(s,e),feeInt:s}}async function pr(t,{decimals:e},{calldata:o}){let n=await wo({address:t,transaction:o});return{fee:k(n,e),feeInt:n}}async function dr(t,{decimals:e},{calldata:o}){let n=await po({address:t,inputData:bo(o),toAddr:await No(o,t),value:Ro(o)});return{fee:k(n,e),feeInt:n}}async function gr(t,{decimals:e},{calldata:o}){let n=Io.from(o.transactionBlock);n.setSenderIfNotSet(t);let a=n?.blockData?.gasConfig?.budget||"0";return{fee:k(a,e),feeInt:a}}async function yr(t,{decimals:e},{calldata:o}){let n=await Lo({transaction:o,fromAddress:t,value:"0"});return{fee:k(n,e),feeInt:n}}async function Tr(t,{decimals:e},{calldata:o}){let n=await _o(t,o);return{fee:k(n,e),feeInt:n}}async function Ir(t,{decimals:e,coinId:o,chainId:n},a,{calldata:r}){let i=await we({walletId:a,fromAddr:t,coinId:o,chainId:n,tx:r}),s=i.feeInfo.fee,m=i.feeInfo.error;return{fee:k(s,e),feeInt:s,error:m}}function Oo(t,e){let o=_t(),{baseChain:n,baseCoinId:a}=G(t),{baseCoin:r}=Mt(a,!0),i=de(n),{symbol:s}=(0,vo.useSelector)(j),m=Nt(a)||0,[c,f]=(0,C.useState)(0),[l,u]=(0,C.useState)(0),[p,d]=(0,C.useState)(0),[S,x]=(0,C.useState)(!1),[h,D]=(0,C.useState)(!1),N=(0,C.useMemo)(()=>{let b=H(c,m);return{estimatedGasFeeInt:l,maxGasFeeInt:p,decimals:r?.decimals,currencyAmount:b,currencySymbol:s,coinSymbol:r?.symbol,loading:S,error:h}},[r.decimals,r.symbol,s,h,l,p,S,m,t,e,e?.gasInfo?.isNetworkFeeLoading,e?.gasInfo?.isGasLimitLoading]);return(0,Go.useDeepCompareEffect)(()=>{async function b(){let g={fee:0,feeInt:0};x(!0),D(!1);try{n===oe?g=await lr(r,e):n===W?g=await ur(i,r,e):n===Le?g=await pr(i,r,e):n===_e?g=await gr(i,r,e):n===F?g=await dr(i,r,e):n===De?g=await yr(i,r,e):n===U?g=await Tr(i,r,e):n===M&&(g=await Ir(i,r,o,e)),f(g.fee),u(g.feeInt),d(g.maxFeeInt||g.feeInt)}catch{f(0),u(0)}finally{x(!!g.loading),D(g.error)}}b()},[t,e]),N}async function Sr({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:n,currentWallet:a}){let r=e,{baseChain:i,chainId:s,baseCoinId:m}=G(t);if(i===W){let{account:c}=a,f=c[W];return r.transaction=await Wo(e,f),{target:r}}if(i===oe){if(ge(e?.gasInfo,"swap"))throw new Error(A("wallet_home_toast_network_error"));let f=r.value||r.amount||0,l=G(t).baseCoinId;r={...r,...r.gasInfo};let u=await n({...r,userGasInfo:r.gasInfo,coinId:l,amount:f,baseCoinAmountUse:f}),{nonce:p,updateGasInfo:d={}}=u||{};r.nonce=p,r.maxFeePerGas=d.maxFeePerGas||r.maxFeePerGas,r.maxPriorityFeePerGas=d.maxPriorityFeePerGas||r.maxPriorityFeePerGas,r.gasPrice=d.gasPrice||r.gasPrice;let S=await w().getSelectedWallet(),x=await w().generateFormatedTxParams(t,r),{dispatch:h}=o||{};return h&&(await h(Et({txParams:x,walletId:S})),r.result=x.result,r.walletId=S),{target:r}}if(i===ke){let c=await w().getSelectedWallet(),f=await w().generateFormatedTxParams(t,r),l=await Pt(f,f.address,i,c);return r.result=l,r.walletId=c,{target:r}}if(i===M){let{walletId:c,account:f}=a,l=f[M],{extParams:u}=await we({walletId:c,fromAddr:l,coinId:m,chainId:s,tx:e});return{target:r,extParams:u}}return{target:r}}async function he({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:n,currentWallet:a}){if(!e)throw new Error("tx is required");let r=e;try{let{target:i,extParams:s}=await Sr({networkId:t,tx:e,hardwareExtParams:o,checkTxBeforePublish:n,currentWallet:a});return r=i,await w().dexSignAndSubmitTransaction(t,r,s)}catch(i){throw i?.data?.originalError?(i.message=i?.data?.originalError?.error_message,i.code=Mo):i?.message===ht?(i.message=A("wallet_extension_swap_error_hardware_not_support"),i.code=Mo):i.code=mr,i}finally{ne()===te&&w().focusLastOkPopupWithCache()}}async function Ho(t,e){let o=e;try{return typeof e=="string"&&(o=JSON.parse(e)),await w().dexSignTypedDataV4(t,o)}finally{ne()===te&&w().focusLastOkPopupWithCache()}}var Vo=t=>{let{chainId:e}=lt(t),o=pe(t).some(c=>Ft(c.coinId)),n=o?Tt(t):pe(t),a;o?a=n.find(c=>c.realChainIdHex===e)||{}:a=n[0]||{};let r=Number(o?a.netWorkId:a.chainId),i=ut(t),s=dt(t);return{walletType:{isMNEMONIC:s[i].keyringIdentityType===_.MNEMONIC,isPRIVATE:s[i].keyringIdentityType===_.PRIVATE_KEY,isHARDWARE:s[i].keyringIdentityType===_.HARDWARE,isMPC:s[i].keyringIdentityType===_.MPC},chainId:r}};Q.initSentry(Oe,Be,process.env.APP_VERSION);Q.setGlobal({HARDWALLETERROR:wt,getApiHostname:Me,getStaticHostname:Ge,getWssHostname:ve,LocalStore:xe,interceptorHeaders:Je,urlConfig:qe,FeeTypeEnum:et,TxToastCheckTypeEnum:tt,SolanaTransactionInstanceTypeEnum:$e,netWorkIdToLocalType:new Proxy({},{get(t,e){return O({netWorkId:String(e)})?.localType}}),localTypeToBaseCoinId:new Proxy({},{get(t,e){return O({localType:e})?.coinId}}),isTelegramMiniApp:Xe()===Pe,KeyringIdentityTypeEnum:_,RegisterLocalStatusEnum:Ze,hexToDecimal:It,signAndSubmitTransaction:he,signTypedDataV4:Ho,signSolanaCommonTransaction:st,getGasPrice:Se,checkMPCStatus:Jt,hooks:{useCoin:Bo,useUtxoListFn:qt,useFeeDisplay:Oo,useRegisterStatus:$t,useGasReturnActivity:vt,useSignInfo:Ht,useUtxoEstimateFee:jt,useUtxoCheckBeforePublishFn:Yt,useUtxoSignAndPublishTransactionFn:Zt,usePreExecuteFn:Ot},components:{EvmConfirm:fo,TronConfirm:Ao,EthereumNetworkFee:Kt,SupplyGas:Bt,StarknetRegister:so,Affix:At,InteractiveAddress:oo,NetworkFeeEnter:ro,ViewData:uo,SectionWrap:no,ModuleWrap:to,TipMessage:io,CoinSummary:ao,UtxoNetworkFeePanel:lo,Mev:mo,Layout:fe,SwitchAddress:Fo,Navigator:Dt,SolanaEntry:To}});var wr=()=>{let t=(0,$.useHistory)(),{pathname:e}=(0,$.useLocation)(),o=(0,E.useSelector)(yt);return(0,V.useCallback)((n,a)=>{if(o&&a){t.replace(ct);return}n()},[o,e])},Za=({visibleBar:t})=>{let e=(0,E.useDispatch)(),o=(0,E.useSelector)(j),n=(0,E.useSelector)(gt),a=(0,E.useSelector)(mt),r=eo(),i=(0,E.useSelector)(pt),s=(0,E.useSelector)(ft),m=(0,E.useSelector)(Vo),c=i.map(u=>{if(Ct(u.initialType)){u=Ce(u);try{delete u.account[W],delete u.account[F]}catch{Fe()}}return u}),f=wr(),l=co();return(0,Uo.useMount)(()=>{Q.updateGlobal({signAndSubmitTransaction:async(u,p,d)=>await he({networkId:u,tx:p,hardwareExtParams:d,checkTxBeforePublish:l,currentWallet:n})})}),V.default.createElement(fe.Box,{style:{height:t?"calc(100% - 54px)":"100%"}},V.default.createElement(bt,{t:A,dispatch:e,onBack:f,currency:o,currentWallet:n,localeData:a,addressBookList:r,walletList:c,locale:s,walletInfo:m}))};export{Za as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=dex-DUTSSUEL.js.map
