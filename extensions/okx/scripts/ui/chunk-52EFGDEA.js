import{a as gr}from"./chunk-KCLIN2M5.js";import{a as G}from"./chunk-5J2GAAY6.js";import{a as Cr}from"./chunk-LL6R3IVH.js";import{a as Tr}from"./chunk-CSJR56CD.js";import{a as tr}from"./chunk-P3HGPAYY.js";import{a as Qo}from"./chunk-I4WXKCYQ.js";import{a as er}from"./chunk-SK7ZM24Q.js";import{b as pr,c as pe,m as lr,o as fr,p as dr}from"./chunk-YC3K6KSF.js";import{a as jo}from"./chunk-5VYKPDIW.js";import{g as Jo}from"./chunk-T4SJQSS7.js";import{a as xr}from"./chunk-MIZXVXK6.js";import{A as se,B as ie,F as ir,I as ar,J as mr,N as ae,O as ur,Q as cr,S as me,T as ue,Y as ce,b as or,c as rr,d as nr,e as Ot,f as W,g as oe,i as Pt,k as re,l as sr,q as ne,v as wt}from"./chunk-EC67JB7S.js";import{a as Wt,b as pt,c as _r,d as Ct,e as yr,g as le,h as gt}from"./chunk-GANFA4Y3.js";import{a as Xo,b as Zo,d as qo,e as U}from"./chunk-75JFJJ6E.js";import{a as Vo}from"./chunk-6QV7GAE5.js";import{e as Ko}from"./chunk-QT2MBFKK.js";import{d as Q,g as Go,j as Bt}from"./chunk-MUF5KFVU.js";import{b as $o}from"./chunk-CK3VDP7L.js";import{A as ko,da as Do}from"./chunk-4IOXOTFG.js";import{D as Me,E as bo,F as ho,G as Fo,I as No,J as Bo,L as Oo,M as Po,N as wo,O as Lo,P as vo,Q as Mo,b as yo,f as To,j as Co,k as go,n as Io,q as Ao,t as So,x as Eo}from"./chunk-RNBNCNHM.js";import{k as zo}from"./chunk-WFHUBXJH.js";import{a as te,g as Yo}from"./chunk-ZW25VTKR.js";import{a as Yn,m as Wo,n as Ho}from"./chunk-DS7KEGTF.js";import{a as ee}from"./chunk-YFSBCNC7.js";import{a as Qt}from"./chunk-NRCRSATA.js";import{_a as xo,a as lo,f as fo,ja as _o}from"./chunk-4HJMB7P7.js";import{b as De}from"./chunk-A2W6OJDL.js";import{l as Uo,m as Ro,q as A}from"./chunk-U7RD3Z4E.js";import{o as ct}from"./chunk-XHNZXPBB.js";import{N as co,ac as z,ka as po,yb as jt}from"./chunk-ZTS7374H.js";import{d as Kt,f as ao}from"./chunk-B26CCOB3.js";import{T as qt,U as h,W as Jt,X as uo,b as O,ca as j,j as mo}from"./chunk-QYHQY2ME.js";import{a as ke}from"./chunk-YYAHGUV5.js";import{c as F}from"./chunk-HBMVMNWX.js";import{$b as yt,Db as q,Eb as we,Fb as mt,Ib as zt,Jb as Qe,Kb as Le,Lc as Hn,Tb as to,Tc as Xt,Vc as so,Wc as Zt,X as Rt,Xa as $t,Xc as io,Yb as Gt,cc as ut,xa as at,xc as no}from"./chunk-IS2B3ORW.js";import{B as oo,H as ro,c as eo,o as Vt,q as Tt}from"./chunk-TDPA2BUG.js";import{K as Ut,pa as Pe,s as je}from"./chunk-BJO2AFCW.js";import{M as k,l as xt,w as f}from"./chunk-OIAB2YVD.js";import{c as ve,ca as J}from"./chunk-VXVCGVBA.js";import{a as y}from"./chunk-DAL2TMJA.js";import{f as u,m as r,o as n}from"./chunk-JEQEC2HU.js";r();n();var xe=u(y()),br=u(z()),hr=u(ct());r();n();var fe=u(y());ut();var Ue=(0,fe.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",netWorkCoinId:null,utxoType:1,txType:null,protocolId:null,mintType:qt.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function tt(){return(0,fe.useContext)(Ue)}function Lt(){let{signInfo:t}=tt();return t}function de(){let{currencyId:t}=tt();return t}function rt(){let{params:t}=tt();return t}function Re(){let{feeData:t}=tt();return t}function _e(){let{onFeeDataChange:t}=tt();return t}function et(){let t=Lt(),{inscriptions:e}=rt(),{inscriptionOutput:o}=Re(),i=o||t?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:e.length,total:q(i,e.length)}}function It(){let{feeData:t}=tt();return{fees:t.revealTxFees,totalFee:(t.revealTxFees||[]).reduce((e,o)=>mt(e,o),"0")}}function At(){let{feeData:t}=tt();return t.commitTxFee}function Z(){let{feeData:{feeSelectedSat:t={}}}=tt(),{type:e}=t,o=Lt(),i;return e===h.CUSTOM?i=t.satBytes:i=o?.[uo[e]],{...t,satBytes:i||o?.normal||0}}function Ir(){let{feeData:t}=tt();return t.canTransferAmount}function Ar(){let{lifecycle:t}=tt();return t}r();n();var Sr=u(y());function zn(t,e){let o=Q(e),[,i]=jo({coinId:e,address:t,chainId:o?.chainId},{pollingInterval:20*1e3});return(0,Sr.useMemo)(()=>i||{},[i])}var Er=zn;function Gn({defaultFeeData:t,currencyId:e,params:o,lifecycle:i,children:s}){let{from:m,to:a,netWorkCoinId:c,...l}=o,p=(0,br.useSelector)(jt),x=Er(m,c),[_,C]=(0,xe.useState)(t||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:h.STANDARD},canTransferAmount:"0"}),v=(0,hr.useMemoizedFn)((g,T)=>{C(E=>({...E,[g]:T}))});return xe.default.createElement(Ue.Provider,{value:{signInfo:x,currencyId:e??p.currencyId,params:{...l,netWorkCoinId:c,from:m,to:a||m},lifecycle:i,feeData:_,onFeeDataChange:v}},s)}var $e=Gn;r();n();r();n();var L=u(y()),Ee=u(ct());k();r();n();var St=u(y()),We=u(ve());r();n();var vt={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};function Vn({className:t,loading:e,slot:o={},children:i,contentClassName:s}){let{header:m,footer:a,top:c}=o;return St.default.createElement(F.Container,{loading:e,className:(0,We.default)(vt.root,t)},St.default.createElement(F.Box,{className:vt["send-page-base-container__header"]},m),St.default.createElement(F.Box,{className:vt["send-page-base-container__wrapper"]},c,St.default.createElement(F.Box,{className:vt["send-page-base-container__inner-wrapper"]},St.default.createElement(F.Box,{className:(0,We.default)(vt["send-page-base-container__content"],s)},i),St.default.createElement(Qt,{usePortal:!0,offsetBottom:0,placeholder:!0},a))))}var ye=Vn;r();n();var Ye=u(y());Pe();r();n();var V=u(y());k();r();n();var Fr=u(y()),He=u(z());ut();var Nr=(t,e)=>{let o=t.coinId,i=zo(o),s=(0,He.useSelector)(jt),m=(0,He.useSelector)(({metamask:l})=>l.currencies),a=(0,Fr.useMemo)(()=>e&&m?.find(l=>l.currencyId===e)||s,[e]),c=q(i,a?.usdToThisRate);return er(to,l=>{let p=Ro(l,{symbol:t.symbol}),x=Uo(q(l,c),{useApproximate:!1,symbol:a.symbol});return`${p}(${x})`})};$t();ut();var Br=({bytes:t,value:e,signInfo:o={},coinId:i,currencyId:s,onChange:m})=>{let a=tr(),{coin:c,baseCoin:l}=Vo(i,!0),[p,x]=(0,V.useState)(e?.customSatBytes),_=Nr(l,s),C=f("extension_wallet_transaction_text_minute");(0,V.useEffect)(()=>{!p&&o?.normal&&x(o?.normal)},[o]);let v=(0,V.useCallback)(b=>{x(b)},[]),g=(0,V.useCallback)(()=>{m?.({customSatBytes:p,type:h.CUSTOM,satBytes:p})},[p]),T=c.localType===Rt?f("wallet_extension_transfer_unit_sat_b"):"",E=(0,V.useMemo)(()=>{let{min:b,mempoolMin:D}=o,N=D||b||0;return zt(p,N)?f("extension_btc_minmum_alert_fee_lowerthan",{feerate:N}):""},[p,o]);return(0,V.useMemo)(()=>[h.SLOW,h.STANDARD,h.FAST,h.CUSTOM].map(b=>{switch(b){case h.SLOW:return{data:{type:h.SLOW,satBytes:o.min,estimatedTime:`${yt(o.maxCost)} ${C}`},unitPrice:`${o.min} ${T}`,totalPrice:_(q(o.min,t),s),type:f(Jt[h.SLOW]),typeKey:h.SLOW,estimatedTime:`${yt(o.maxCost)} ${C}`};case h.STANDARD:return{data:{type:h.STANDARD,satBytes:o.normal,estimatedTime:`${yt(o.normalCost)} ${C}`},unitPrice:`${o.normal} ${T}`,totalPrice:_(q(o.normal,t),s),type:f(Jt[h.STANDARD]),typeKey:h.STANDARD,estimatedTime:`${yt(o.normalCost)} ${C}`};case h.FAST:return{data:{type:h.FAST,satBytes:o.max,estimatedTime:`${yt(o.minCost)} ${C}`},unitPrice:`${o.max} ${T}`,totalPrice:_(q(o.max,t),s),type:f(Jt[h.FAST]),typeKey:h.FAST,estimatedTime:`${yt(o.minCost)} ${C}`};default:return{unitPrice:`${o.max} ${T}`,totalPrice:_(q(p,t),s),estimatedTime:a(o,p),canConfirm:!E,onConfirm:g,components:()=>V.default.createElement(Tt.Number,{enableMinus:!1,precision:0,error:E,errorType:Tt.TIP_TYPE.always,onChange:v,value:p,size:Tt.SIZE.sm,title:T,className:"custom-network-fee__satb"})}}}),[t,o,p])};var Xn=({value:t,coinId:e,bytes:o,signInfo:i,onChange:s,currencyId:m,onClose:a,visible:c})=>{let l=Br({bytes:o,value:t,coinId:e,onChange:s,signInfo:i,currencyId:m});return Ye.default.createElement(Qo,{feeType:t?.type,feeDataList:l?.slice(0,3),onBack:a,visible:c,custom:je(l),onChange:({data:p})=>{s?.(p)}})},Or=Ye.default.memo(Xn);$t();r();n();var nt=u(y());$t();k();var wr=u(ct());r();n();var w=u(y());k();r();n();var Et={"output-panel":"_output-panel_n2hmc_1",outputPanel:"_output-panel_n2hmc_1","output-panel__content":"_output-panel__content_n2hmc_4",outputPanelContent:"_output-panel__content_n2hmc_4","output-panel__button":"_output-panel__button_n2hmc_7",outputPanelButton:"_output-panel__button_n2hmc_7","output-panel__compare":"_output-panel__compare_n2hmc_10",outputPanelCompare:"_output-panel__compare_n2hmc_10","output-panel-slider__content":"_output-panel-slider__content_n2hmc_16",outputPanelSliderContent:"_output-panel-slider__content_n2hmc_16","output-tag":"_output-tag_n2hmc_19",outputTag:"_output-tag_n2hmc_19"};var Te=330,Ce=1e4,Zn=({coinId:t,visible:e,outputValue:o,currencyId:i,onClose:s,onChange:m})=>{let[a,c]=(0,w.useState)(String(o));(0,w.useEffect)(()=>{c(String(o))},[o]),(0,w.useEffect)(()=>{e&&c(String(o))},[o,e]);let l=Bt(t,a,{currencyId:i,useApproximate:!1});return w.default.createElement(Vt.Action,{windowStyle:{width:"100%",maxHeight:"none",overflow:"hidden"},visible:e,onClose:s,title:f("wallet_header_title_inscription_sats"),maskClosable:!0,noTopRadius:!1,zIndex:1e3,alignBottom:!0,noContentPadding:!0},w.default.createElement(F.Box,{className:Et["output-panel__content"]},w.default.createElement(Tt.Number,{precision:0,value:a,max:Ce,min:Te,size:Tt.SIZE.xl,onChange:p=>{c(p)},suffix:w.default.createElement(A.Text,{size:A.SIZE.sm},"sats")}),w.default.createElement(A.Text,{className:Et["output-panel__compare"],type:A.TYPE.secondary,size:A.SIZE.sm},l),w.default.createElement(F.Space,{space:4,direction:F.DIRECTION.vertical},w.default.createElement(oo,{value:a,min:Te,max:Ce,contentClassName:Et["output-panel-slider__content"],onChange:p=>{c(String(p))}}),w.default.createElement(F.FlexBox,{justify:"space-between"},w.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs},`${Te} sats`),w.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs},`${Ce} sats`)))),w.default.createElement(F.Box,{className:Et["output-panel__button"]},w.default.createElement(J,{disabled:!a||!a?.trim(),category:J.CATEGORY.fill,type:J.TYPE.highlight,size:J.SIZE.lg,block:!0,onClick:()=>{m?.(Math.min(Math.max(a,Te),Ce)),s?.()}},f("extension_transactions_btn_confirm"))))},Pr=Zn;var Kn=({txType:t,currencyId:e,inscriptionsCount:o,inscriptionOutput:i,coinId:s=at,totalInscriptionCoinAmount:m,onInscriptionOutputChange:a})=>{let[c,{toggle:l}]=(0,wr.useBoolean)(!1),p=xt.gt(m,0)?m:"0",x=Bt(s,p,{currencyId:e,useApproximate:!0}),_=(0,nt.useMemo)(()=>mo(t),[t]);return nt.default.createElement(nt.default.Fragment,null,nt.default.createElement(pt,{clickable:t===O.RUNES_ETCH?!1:void 0,onClick:()=>{xt.gt(i,0)&&l()},title:f(_)},nt.default.createElement(F.FlexBox,{align:F.ALIGN.center},`${i} sats`,!!o&&o>1&&nt.default.createElement(A.Text,{className:Et["output-tag"]},"x",o),x)),nt.default.createElement(Pr,{coinId:s,visible:c,currencyId:e,outputValue:i,onClose:l,onChange:a}))},Lr=Kn;r();n();k();var ge=u(y()),qn=({coinId:t,currencyId:e,totalCoinAmount:o})=>{let i=Q(t),s=Bt(t,o,{currencyId:e,useApproximate:!0});return ge.default.createElement(pt,{title:f("extension_wallet_transaction_item_inscribe_totalfee")},ge.default.createElement(A.Text,{inherit:!0,strong:700},ge.default.createElement(A.DisplayAmount,{noStyle:!0,symbol:i?.symbol,decimals:i?.decimals},o),s))},vr=qn;r();n();var Ur=u(y()),Rr=u(ke()),$r=u(ct()),Wr=u(Yn());k();r();n();k();ao();r();n();var Mr=u(y());Pe();ao();$t();io();so();function Jn({walletId:t,utxoType:e=1,coinId:o=at}={}){let i=te();return(0,Mr.useMemo)(()=>async({from:s,coinAmount:m,serviceCharge:a,feeRate:c})=>{let l=await Kt().getRequestHeaders({walletId:t||i,needSign:!0,currency:"usd"}),p={address:s,coinAmount:m,serviceCharge:a,utxoType:e};Ut(c);let x={coinId:o,utxoRequests:[p]};try{let{data:_}=await Xt(Zt.getBTCUTXO,x,{headers:l});return _?.[0]||{}}catch(_){return{error:!0,errorResp:_}}},[o,i,e,t])}var Ie=Jn;$t();ut();r();n();var kr=u(y());function jn(t){let{inscriptionOutput:e}=et(),{satBytes:o}=Z(),{walletId:i,from:s,to:m,inscriptions:a,txType:c,mintType:l}=rt(),p=fr(t),x=dr();return(0,kr.useCallback)(async _=>{let C={};return c===O.RUNES_ETCH?(C={input:_.map(({txHash:T,vout:E,coinAmount:b})=>({vOut:E,txId:T,amount:b})),address:s,feePerB:o,outValue:e,inscriptions:(a||[]).map(({body:T})=>JSON.parse(T))},await x({walletId:i,address:s,tx:C,txType:c,mintType:l})):(C={commitTxPrevOutputList:_.map(({txHash:g,vout:T,coinAmount:E})=>({vOut:T,txId:g,amount:E})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(a||[]).map(({contentType:g,body:T})=>({contentType:g,body:T})),revealOutValue:e,changeAddress:s,toAddr:m},await p({walletId:i,address:s,tx:C,txType:c}))},[s,m,a,e,o])}var Ae=jn;function Qn(t=at){let{walletId:e,from:o,to:i,utxoType:s,inscriptions:m,txType:a,protocolId:c,mintType:l}=rt(),p=Lt(),x=de(),_=lr({address:o,coinId:t,currencyId:x,txType:a,protocolId:c}),C=Ae(pe.CONFIRM),v=Ie({walletId:e,utxoType:s,coinId:t}),{beforePostTx:g}=Ar(),{inscriptionOutput:T,total:E}=et(),{totalFee:b}=It(),D=At(),{satBytes:N}=Z(),M=async S=>{let{commitTx:I,revealTxs:B,commitAddrs:R,commitTxFee:Y,revealTxFees:ot}=await C(S.utxoList||[]),K=await Xo(Rt,I),ft=await Zo(Rt,B),Nt=[K,...ft],dt={signedTx:I,fromAdr:o,serviceCharge:Y,toAdr:i||o,itemId:"commitTx",txHash:K,txType:a,extJson:JSON.stringify({protocolId:c,broadcastType:1,nftIds:[]}),walletId:e},$=B.map((Yt,_t)=>({signedTx:Yt,fromAdr:R?.[_t]||o,serviceCharge:ot?.[_t],toAdr:i||o,itemId:`revealTx${_t}`,txHash:ft[_t],dependTx:l===qt.serial?[Nt[_t]]:[K],txType:a,extJson:JSON.stringify({protocolId:c,broadcastType:1,nftIds:[]}),walletId:e})),it=!1;if(g&&(it=g(dt,$)),it)return{commitParams:dt,revealParams:$,commitTx:I,revealTxs:B,commitAddrs:R,commitTxFee:Y,revealTxFees:ot,feeRate:parseInt(N,10),size:parseInt(T,10)};let Dt=await Kt().getRequestHeaders({walletId:e,needSign:!0,currency:"usd"});return{txIds:await co({txList:[dt,...$]},{headers:Dt}),commitTx:I,revealTxs:B,commitAddrs:R,commitTxFee:Y,revealTxFees:ot,feeRate:parseInt(N,10),size:parseInt(T,10)}},P=async()=>{let S=await v({from:o,coinAmount:mt(E,b),serviceCharge:D,feeRate:N}),I=S.utxoList||[];return await _(I,()=>{}),await M(S)};return()=>new Promise((S,I)=>{if(typeof p?.txSizeLimit=="number"&&m.length>p.txSizeLimit){let B=Vt.warn({alignBottom:!1,maskClosable:!1,title:f("wallet_header_dialog_header_reminder"),text:f("wallet_info_dialog_too_much_inscription"),confirmText:f("wallet_btn_dialog_btn_cancel"),cancelText:f("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let R=await P();S(R)}catch(R){I(R)}B.destroy()},onConfirm:()=>{I(new Error(ce)),B.destroy()}})}else(async()=>{try{let B=await P();S(B)}catch(B){I(B)}})()})}var Dr=Qn;var ts=({txId:t,coinId:e,walletId:o,feeError:i,address:s,onConfirm:m,onCancel:a,disabled:c,addressType:l,useTipMessageFillUp:p,onFillUp:x,netWorkCoinId:_},C)=>{let v=(0,Rr.useHistory)(),g=Dr(_),T=Jo(o,a),E=(0,$r.useMemoizedFn)(async()=>{try{await T();let P=await g();m&&await m(P)}catch(P){if(!(P?.message===ce)){let I=P?.data?.msg||P?.msg||P?.data?.originalError?.msg||f("wallet_home_toast_network_error");ro.error({title:I})}}},[m]),{loading:b,onClick:D}=Wt(E),{loading:N,onClick:M}=Wt(a);return(0,Ur.useMemo)(()=>{let P=a?{loading:N,actionType:U.ACTION_TYPE.CANCEL,onClick:M}:null,S={loading:b,disabled:c,actionType:U.ACTION_TYPE.CONFIRM,onClick:D};return!i&&[j.BALANCE_INSUFFICIENT,j.FEE_BALANCE_INSUFFICIENT].includes(C)&&(P=P||{actionType:U.ACTION_TYPE.CANCEL,onClick:()=>{v.goBack()}},p?S={actionType:U.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{x&&await x();let I=Wr.default.stringify({addressType:l,coinId:e},{skipEmptyString:!0,skipNull:!0}),B=I?`?${I}`:"";v.push(xo+B)}}:S={txId:t,coinId:e,address:s,walletId:o,actionType:U.ACTION_TYPE.FILL_UP}),[P,S]},[a,N,M,b,c,D,i,C,p,v,x,l,e,t,s,o])},Hr=ts;r();n();k();r();n();var Yr=u(y());ut();function zr(){let{totalFee:t}=It(),{satBytes:e}=Z();return Gt(we(t,e),0)}function Gr(){let t=At(),{satBytes:e}=Z();return Gt(we(t,e),0)}function Vr(){let{totalFee:t}=It(),e=At();return(0,Yr.useMemo)(()=>mt(t,e),[t,e])}r();n();r();n();var bt=u(y());ut();function es(t){let{disabled:e=!1}=t||{},{walletId:o,from:i,utxoType:s,netWorkCoinId:m}=rt(),[a,c]=(0,bt.useState)(!0),[l,p]=(0,bt.useState)(!0),[x,_]=(0,bt.useState)(null),[C,v]=(0,bt.useState)([]),g=Ie({walletId:o,utxoType:s,coinId:m}),T=Ae(pe.CAL_FEE),{satBytes:E}=Z(),{total:b}=et(),D=_e(),{totalFee:N}=It(),M=At();return(0,bt.useEffect)(()=>{!e&&(async()=>{if(!Qe(b,0))try{p(!0);let S=await g({from:i,coinAmount:mt(b,N),serviceCharge:M,feeRate:E});if(!S?.utxoList?.length){_(G.BALANCE_NOT_ENOUGH);return}if(S.error){let R=S.errorResp.code,Y=G.COMMON_ERROR;[G.BALANCE_NOT_ENOUGH,G.PURE_UTXO_NOT_ENOUGH].includes(R)&&(Y=R),_(Y);return}D("canTransferAmount",S.canTransferAmount||"0"),_(null);let{commitTxFee:I,revealTxFees:B}=await T(S.utxoList);v(S.utxoList),D("commitTxFee",I),D("revealTxFees",B)}catch{_(G.COMMON_ERROR),D("commitTxFee","0"),D("revealTxFees",[])}finally{c(!1),p(!1)}})()},[i,E,b,N,M,T,e]),{isInitLoading:a,isLoading:l,error:x,utxoList:C}}var Xr=es;function os(t){let{disabled:e=!1}=t||{},o=Vr(),{total:i}=et(),s=Ir(),m=Re(),{isInitLoading:a,isLoading:c,error:l,utxoList:p}=Xr({disabled:e});return{isInitLoading:a,isLoading:c,error:l,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:m,utxoList:p}}var Se=os;var rs=()=>{let{utxoList:t,fee:e,error:o,canTransferAmount:i,isLoading:s}=Se(),m=Lt(),a=Gr(),c=zr(),l=xt.add(a,c),p=Z(),x=_e();return{bytes:l,signInfo:m,feeError:o,selectedSat:p,feeLoading:s,networkFee:e,canTransferAmount:i,utxoListCount:t?.length||0,onFeeDataChange:x}},Zr=rs;r();n();var qr=u(y());k();r();n();var ns=[O.BRC20_DEPLOY,O.BRC20_MINT,O.BRC20_INSCRIBE,O.ORDINAL_NFT,O.ORDINAL_TEXT,O.EARN_BRC30_DEPLOY,O.EARN_BRC30_APPLY,O.EARN_BRC30_REDEEM,O.EARN_BRC30_CLAIM,O.BRC30_INSCRIBE,O.RUNES_ETCH];function Kr(t){return ns.indexOf(t)>-1}var ss=({txType:t,feeError:e,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:m,coin:a})=>(0,qr.useMemo)(()=>Kr(t)?i&&t===O.RUNES_ETCH?{type:gt.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_mpc_not_support")}:o?{type:gt.TIP_TYPE.COMMON_ERROR,message:f("wallet_extension_top_toast_dapp_comingsoon")}:e===G.COMMON_ERROR?{type:gt.TIP_TYPE.FEE_ERROR}:e===G.BALANCE_NOT_ENOUGH?{type:le.FEE_BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_btc_icu",{chainName:a?.chainName})}:e===G.PURE_UTXO_NOT_ENOUGH?{type:le.BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:le.BALANCE_INSUFFICIENT}:{message:m}:{type:gt.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_wallet_upgrade")},[t,e,o,i,s,m]),Jr=ss;r();n();var ze={"retina-border-basic":"_retina-border-basic_1p86s_1",retinaBorderBasic:"_retina-border-basic_1p86s_1","free-tag":"_free-tag_1p86s_29",freeTag:"_free-tag_1p86s_29",actions:"_actions_1p86s_33"};function is({txId:t,headerProps:e={},slot:o={},confirmButtonProps:i={},netWorkCoinId:s=at}){let{from:m,walletId:a,txType:c}=rt(),l=Ho(a),p=Wo(a),[x,{toggle:_}]=(0,Ee.useBoolean)(!1),C=de(),g=Yo()[m],{bytes:T,signInfo:E,feeError:b,selectedSat:D,feeLoading:N,networkFee:M,canTransferAmount:P,utxoListCount:S,onFeeDataChange:I}=Zr(),{title:B,...R}=e,{inscriptionOutput:Y,inscriptionsCount:ot,total:K}=et(),ft=(0,L.useMemo)(()=>xt.add(M,K),[M,K]),Nt=Q(s),{showManageUTXO:dt}=gr(Nt||{},g,!0),$=dt&&b!==G.PURE_UTXO_NOT_ENOUGH,{type:it,message:Dt}=Jr({txType:c,feeError:b,feeLoading:N,utxoListCount:S,isHardware:l,isMpcWallet:p,canTransferAmount:P,networkFee:M,totalUsedCoinAmount:ft,coin:Nt}),Je=Hr({txId:t,walletId:a,coinId:s,addressType:g,disabled:!!it||!!b||!!N||l||S>100,useTipMessageFillUp:$,netWorkCoinId:s,...i},it),Yt=Tr(a),_t=(0,Ee.useMemoizedFn)(Oe=>{I("commitTxFee","0"),I("revealTxFees",[]),I("inscriptionOutput",Oe)},[]),{top:$n,footer:Wn}=o;return L.default.createElement(ye,{slot:{header:L.default.createElement(ee,{title:B||f("extension_wallet_header_maintitle_inscribe"),...R}),footer:Wn||L.default.createElement("div",{className:ze.actions},L.default.createElement(gt,{type:it||eo.TYPE.warn,address:m,message:Dt,coinId:s,walletId:a,fillUpAble:$}),L.default.createElement(U,{buttonGroup:Je}))}},$n,L.default.createElement(Ct,null,L.default.createElement(pt,{title:f("wallet_info_title_inscribe_service_fee")},L.default.createElement(A.Text,{className:ze["free-tag"]},f("wallet_info_tag_inscribe_free_tag"))),L.default.createElement(xr,{coinId:s,loading:N,currencyId:C,networkFee:N&&M==="0"?void 0:M,estimateFailed:!N&&!Number(M),onClick:()=>{_?.(),Yt({trade:"brc20",all_confirmation:"network_fee"})}}),L.default.createElement(Lr,{txType:c,currencyId:C,inscriptionsCount:ot,inscriptionOutput:Y,totalInscriptionCoinAmount:K,onInscriptionOutputChange:_t,coinId:s})),L.default.createElement(Ct,null,L.default.createElement(vr,{coinId:s,currencyId:C,totalCoinAmount:ft})),L.default.createElement(Ct,{bordered:!1},L.default.createElement(_r,{address:m,walletId:a,title:f("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{Yt({trade:"brc20",all_confirmation:"wallet_used_address"})}})),L.default.createElement(Or,{bytes:T,currencyId:C,value:D,coinId:s,onClose:_,signInfo:E,visible:x,onChange:Oe=>{I("commitTxFee","0"),I("revealTxFees",[]),I("feeSelectedSat",Oe)}}))}var Ge=is;r();n();var Ft=u(y());k();r();n();var H=u(y()),kt=u(z()),An=u(ve());Pe();k();r();n();var Qr=u(y()),tn=u(ke()),en=u(ve());r();n();var jr={root:"_root_ryl3e_1"};function as({onBack:t,onClose:e,pageIndex:o,...i}){let s=(0,tn.useHistory)(),m=()=>{t&&t(),s.goBack()},a=()=>{e&&e(),s.go(-o)};return Qr.default.createElement(ee,{className:(0,en.default)(jr.root,i.className),onClose:a,onBack:m,...i})}var on=as;r();n();var rn=u(ke()),Ve=u(z());var nn=u(ct());function ms(t){let e=(0,rn.useHistory)(),o=(0,Ve.useSelector)(yo),i=Ot(),{coin:s}=W(),m=(0,Ve.useSelector)(To),a=rr();(0,nn.useMount)(()=>{if(!!t){if($o(s))e.replace(o||lo);else if(!m){let c={pathname:`${fo}/${i}${_o}`};a&&(c.search=`?from=${a}`),e.replace(c)}}})}var sn=ms;r();n();var dn=u(y()),_n=u(z());r();n();var ht=u(y());k();r();n();var cn=u(y());r();n();var st=u(y()),mn=u(ct());k();r();n();var an={root:"_root_26a1b_1"};var us=({coin:t={},onVisible:e,receiveOnly:o,address:i,style:s})=>{let[m,{setTrue:a,setFalse:c}]=(0,mn.useBoolean)();(0,st.useEffect)(()=>{e&&e(m)},[m]);let l=t.symbol.length>12?`${t.symbol.slice(0,12)}...`:t.symbol;return st.default.createElement(st.default.Fragment,null,st.default.createElement("div",{className:an.root,onClick:a,style:s},f("wallet_extension_placeorder_textbtn_replenish",{token:l})),st.default.createElement(qo,{address:i,visible:m,closeCallback:c,coinId:t.coinId,receiveOnly:o}))},un=(0,st.memo)(us);var pn=u(z());function cs(t){let e=(0,pn.useDispatch)(),o=wt();return cn.default.createElement(un,{address:o,...t,onVisible:s=>{e(Lo(s))}})}var Xe=cs;var ps=()=>{let{coin:t}=W(),e=oe();return i=>{let s="";return i.text?s=i.text:i.key&&(s=f(i?.key,i?.args)),i?.type===j.BALANCE_INSUFFICIENT?ht.default.createElement(ht.default.Fragment,null,s," ",ht.default.createElement(Xe,{coin:t,receiveOnly:!0})):i?.type===j.FEE_BALANCE_INSUFFICIENT?ht.default.createElement(ht.default.Fragment,null,s," ",ht.default.createElement(Xe,{coin:e})):s}},ln=ps;r();n();var fn={root:"_root_g697e_1"};function ls({renderError:t}){let e=(0,_n.useSelector)(Co),o=ln(),i=t||o;if(!e.key)return null;let s=i(e);return dn.default.createElement("div",{className:fn.root},s)}var xn=ls;r();n();var lt=u(y());k();r();n();var Mt={container:"_container_djh56_1",totalAmount:"_totalAmount_djh56_5","totalAmount-content":"_totalAmount-content_djh56_9",totalAmountContent:"_totalAmount-content_djh56_9","totalAmount-title":"_totalAmount-title_djh56_18",totalAmountTitle:"_totalAmount-title_djh56_18","totalAmount-amount":"_totalAmount-amount_djh56_25",totalAmountAmount:"_totalAmount-amount_djh56_25"};r();n();var fs=(t,e)=>{let{coin:o}=W(),i=nr(),s=cr(),m=me(),a=ue(),l={total:s,amount:m,available:a}[t];return`${i(e||l,o,{useApproximate:!1,zero:{decimals:!1}})} ${o.symbol}`},yn=fs;function ds(t){t||(t=""),typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=20?"15px":e<=22?"14px":e<=24?"13px":"12px"}function _s({type:t="total",title:e,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:m,slot:a={},...c}){let{coin:l}=W(),p=yn(t,i),{bottom:x}=a;return lt.default.createElement(F.Box,{className:Mt.container},lt.default.createElement(F.FlexBox,{align:F.ALIGN.center,className:Mt.totalAmount,...c},lt.default.createElement(De,{size:De.SIZE.lg,src:l?.image,text:l?.symbol}),lt.default.createElement(F.Box,{className:Mt["totalAmount-content"]},lt.default.createElement(A.Text,{type:A.TYPE.secondary,size:A.SIZE.xs,className:Mt["totalAmount-title"]},e||f("wallet_extension_send_item_total_amount")),lt.default.createElement(A.Text,{ellipsis:{tooltip:!0},className:Mt["totalAmount-amount"],style:{fontSize:ds(p)}},p)),!s&&lt.default.createElement(J,{category:J.CATEGORY.fill,type:J.TYPE.gray,size:J.SIZE.xs,onClick:m},o||f("wallet_extension_send_text_max"))),x)}var Tn=_s;r();n();ut();var xs=()=>{let t=ue();return zt(t,0)&&(t="0"),t},Cn=xs;r();n();var gn=u(ct());k();var ys=({loading:t,disabled:e,onClick:o,...i})=>(0,gn.useCreation)(()=>[{loading:!e&&t,disabled:e,onClick:o,actionType:U.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_send_btn_continue"),...i}],[e,t,o,i]),Ts=({disabled:t,onClick:e,...o})=>{let i=ur(),s=ae();return ys({...o,disabled:t||s,onClick:e||i})},In=Ts;r();n();var Ze={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};function Cs({isGlobalLoading:t,renderError:e,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:m={},slot:a={},classes:c={},checkEmpty:l=!0,inputAmount:p,customMaxAmount:x}){let _=(0,kt.useDispatch)(),{content:C}=c,{header:v,bottom:g,footer:T}=a,E=(0,H.useRef)(),b=(0,kt.useSelector)(So),D=Ot(),N=Pt(),M=(0,kt.useSelector)(go),P=(0,kt.useSelector)(Ao),S=ne(),I=sr(),B=Cn(),R=x||B,{amount:Y}=Cr(),ot=(0,H.useRef)(!!N),K=$=>{_(Oo($))},ft=()=>{_(Me(R)),K(!0)},Nt=m.onMax||ft;sn(l),(0,H.useEffect)(()=>{Ut(p)||E.current?.setInputAmount(p.toString()),Ut(Y)||E.current?.setInputAmount(Y)},[p,Y]);let dt=In(i);return H.default.createElement(ye,{loading:t,slot:{header:v||H.default.createElement(on,{title:f("wallet_extension_send_title_send"),pageIndex:2,...o}),footer:t?null:T||H.default.createElement(U,{buttonGroup:dt})}},H.default.createElement("div",{className:(0,An.default)(C,Ze.content)},H.default.createElement(Ko,{ref:E,...s,autoFocus:!b,coinId:D,maximumMode:I,maximumAmount:I?R:null,initialValue:{value:[N||"0",M||"0"],mode:P,flatCurrencyId:S},onAmountChange:([$,it],Dt)=>{_(ho(it)),_(Me($)),Dt&&(K(!1),ot.current=!0)},onModeChnage:$=>{_(Fo($))},onFlatChange:$=>{$&&_(Po($.currencyId))}}),ot.current&&H.default.createElement(xn,{renderError:e}),H.default.createElement(Qt,{usePortal:!0,offsetBottom:m?.fixBottom?80:104,className:Ze.totalAmountWrap},H.default.createElement(Tn,{...m,onMax:()=>{Nt(),ot.current=!0}})),g))}var Sn=Cs;r();n();var hn=u(y()),Fn=u(z());Hn();r();n();var En=u(y());function gs(){let{coin:t}=W(),e=Pt();return(0,En.useMemo)(()=>[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:t.symbol,amt:e})}],[t.symbol,e])}var bn=gs;function Is({walletId:t,txSource:e,children:o}){let i=bn(),s=ne(),m=re(),{coin:a}=W(),c=oe(),l=wt(),p=te(),x=O.BRC20_INSCRIBE,_=(0,Fn.useSelector)(ko),C=(g,T)=>{g.coinAmount=m,g.coinId=T?c.coinId:a.coinId,g.txSource=e||no.NORMAL},v=(g,T)=>{g&&C(g,!0),Array.isArray(T)&&T.forEach(E=>{C(E,!1)})};return hn.default.createElement($e,{defaultFeeData:_,currencyId:s,params:{walletId:t||p,from:l,inscriptions:i,utxoType:pr.INSCRIPTION_USE_NFT_UTXO,txType:x,protocolId:a?.protocolId,netWorkCoinId:a?.baseCoinId},lifecycle:{beforePostTx:v}},o)}var be=Is;r();n();var Ht=u(y());var Nn=u(z());function As(){let t=(0,Nn.useDispatch)(),{isInitLoading:e,error:o,fee:i,feeData:s,canTransferAmount:m}=Se();return(0,Ht.useEffect)(()=>{t(Mo(m))},[m]),(0,Ht.useEffect)(()=>{t(No(i))},[i]),(0,Ht.useEffect)(()=>{t(Do(s))},[s]),(0,Ht.useEffect)(()=>{t(Bo(!!o))},[o]),e}var he=As;r();n();var Bn=u(y());ut();var On=u(z());function Ke(){let t=me();return(0,Bn.useCallback)(e=>Le(e,t)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:j.COMMON_ERROR}:null,[t])}function Ss(){let t=(0,On.useDispatch)(),e=ir(),o=Ke(),i=[e,o],{runErrorFns:s}=ie(i);se(s,m=>{t(bo(m))})}var Pn=Ss;r();n();var wn=u(z()),Fe=u(y());so();io();function Es(){let t=(0,wn.useDispatch)(),e=wt(),{coin:o}=W(),[i,s]=(0,Fe.useState)(!0);return(0,Fe.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let a=await Xt(Zt.postPendingBalanceDetail,{address:e,coinId:o.coinId});a?.data&&t(vo(a.data.availableWithoutSpending))}finally{s(!1)}})()},[e,o.coinId]),i}var Ln=Es;function bs({amount:t,onCancel:e,onConfirm:o,slot:i,...s}){let m=ae(),a=he(),c=Ln(),{loading:l,onClick:p}=Wt(e),x=(0,Ft.useMemo)(()=>{let _=null;return typeof e=="function"&&(_={loading:l,actionType:U.ACTION_TYPE.CANCEL,onClick:p}),[_,{actionType:U.ACTION_TYPE.CONFIRM,onClick:o,disabled:m,loading:a,btnText:f("wallet_extension_send_btn_continue")}]},[e,o,m,a,l,p]);return Pn(),Ft.default.createElement(Sn,{...s,inputAmount:t,isGlobalLoading:c,slot:{...i||{},footer:Ft.default.createElement(U,{buttonGroup:x})},checkEmpty:!1,headerProps:{title:f("extension_wallet_header_maintitle_inscribe"),...s.headerProps||{}},totalAmountProps:{...s?.totalAmountProps||{},title:f("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps||{},disabled:{input:!1,switch:!0}}})}function hs({walletId:t,...e}){return Ft.default.createElement(be,{walletId:t},Ft.default.createElement(bs,{...e}))}var kl=hs;r();n();var X=u(y()),Un=u(z());k();r();n();var Ne=u(y()),Mn=u(ct());k();r();n();var vn={"preview-json":"_preview-json_xaani_1",previewJson:"_preview-json_xaani_1"};var Fs=({coinId:t,amount:e})=>{let o=Q(t),{loading:i,data:s}=(0,Mn.useRequest)(async()=>{let m={op:"transfer",amount:e,tick:o.symbol};return(await po(m))?.brcJson||""});return Ne.default.createElement(pt,{title:f("extension_wallet_transaction_item_inscribe_preview")},Ne.default.createElement(F.Spin,{loading:i},Ne.default.createElement(A.Text,{className:vn["preview-json"]},s)))},kn=Fs;r();n();var qe=u(y()),Be=u(z());function Ns(t){let e=(0,Be.useSelector)(Io);return(0,qe.useCallback)(()=>e?{key:"extension_wallet_btc_error_notif_insufficient_btc_icu",args:{chainName:t?.chainName},type:j.FEE_BALANCE_INSUFFICIENT}:null,[e,t])}function Bs(){let t=Ke();return(0,qe.useCallback)(e=>{let o=t(e);return o?{...o,highlight:ar.AMOUNT}:null},[t])}function Os(t,e){let o=(0,Be.useDispatch)(),i=Q(e),s=Ns(i),m=mr(),a=Bs(),c=[s,m,a],{runErrorFns:l}=ie(c);se(l,p=>{o(wo(p))},t)}var Dn=Os;function Ps({headerProps:t={},onCancel:e,onConfirm:o,walletId:i}){let s=(0,Un.useDispatch)(),m=Pt(),a=Ot(),[,c]=Go(a),l=re(),p=he(),x=(0,X.useCallback)(async()=>{await s(Eo(!1))},[s]);return Dn(p,a),X.default.createElement(Ge,{walletId:i,slot:{top:X.default.createElement(X.default.Fragment,null,X.default.createElement(Ct,null,X.default.createElement(yr,{summaryList:[{coinId:a,coinAmount:l}],title:f("extension_wallet_transaction_item_inscribe")})),X.default.createElement(Ct,null,X.default.createElement(kn,{coinId:a,amount:m})))},headerProps:t,confirmButtonProps:{onCancel:e,onConfirm:o,onFillUp:x},netWorkCoinId:c?.coinId})}function ws({txSource:t,walletId:e,...o}){return X.default.createElement(be,{txSource:t,walletId:e},X.default.createElement(Ps,{walletId:e,...o}))}var Ef=ws;r();n();var Rn=u(y());function Ls({children:t,...e}){return Rn.default.createElement(or.Provider,{value:e},t)}var Bf=Ls;export{ye as a,on as b,sn as c,Xe as d,ys as e,Sn as f,Ie as g,Or as h,rt as i,Ge as j,$e as k,kl as l,Ef as m,Bf as n};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-52EFGDEA.js.map
