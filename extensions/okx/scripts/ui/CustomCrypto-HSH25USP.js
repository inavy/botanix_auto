import{a as Pe}from"./chunk-XOVJBJ4C.js";import"./chunk-RHAJGQZT.js";import{a as qe}from"./chunk-ZBRU2CAM.js";import{a as Q}from"./chunk-JLHU3WBU.js";import{a as Fe,b as De}from"./chunk-ZDO7TFIW.js";import"./chunk-MTJW726U.js";import"./chunk-I3X2I3EE.js";import"./chunk-4JU7MQBN.js";import"./chunk-25SZ52UW.js";import"./chunk-SGHBHZD2.js";import"./chunk-DAXYD52J.js";import"./chunk-3VDT32YX.js";import"./chunk-YL2OEBEM.js";import"./chunk-UBREW6HU.js";import"./chunk-33LBA2KN.js";import"./chunk-OZL64JKT.js";import"./chunk-SF4X4VPT.js";import"./chunk-EUVFIXQT.js";import"./chunk-WJQMDYRJ.js";import"./chunk-OANAR4PZ.js";import"./chunk-DY3DHSF2.js";import"./chunk-DM55GZK5.js";import"./chunk-OVX2PTCV.js";import{a as Oe}from"./chunk-Y57SQLFF.js";import"./chunk-C6D3UGMF.js";import"./chunk-VHMLJAAA.js";import"./chunk-DS7KEGTF.js";import"./chunk-GWV4SS46.js";import{a as Le}from"./chunk-YFSBCNC7.js";import{a as Ae}from"./chunk-NRCRSATA.js";import"./chunk-LANQTZFO.js";import"./chunk-NZHMCNZN.js";import"./chunk-CBDQQ72I.js";import{G as Ee,a as Te,k as be,l as ve}from"./chunk-4HJMB7P7.js";import"./chunk-A2W6OJDL.js";import{q as R}from"./chunk-U7RD3Z4E.js";import"./chunk-CJVER5MJ.js";import"./chunk-S5IEFQ34.js";import{o as Ne}from"./chunk-XHNZXPBB.js";import{r as E}from"./chunk-ZTS7374H.js";import"./chunk-EY7FXYAJ.js";import"./chunk-B26CCOB3.js";import"./chunk-D2RJYC6D.js";import"./chunk-VMA4KAKW.js";import"./chunk-XJYCT5UP.js";import"./chunk-XIAMW27T.js";import"./chunk-QYHQY2ME.js";import"./chunk-FT7VATMT.js";import{a as se}from"./chunk-YYAHGUV5.js";import{l as Se}from"./chunk-7ZE3XWQE.js";import"./chunk-42AETIVN.js";import"./chunk-DKCCIZ3Q.js";import"./chunk-C77R5D6K.js";import{c as T}from"./chunk-HBMVMNWX.js";import{Ia as D,Ka as ye,Na as he,X as fe,Xa as V,qb as Ie,vb as ot,wa as ge,ya as Ce}from"./chunk-IS2B3ORW.js";import"./chunk-YGSCKFAL.js";import{H as K,d as ne,g as Z,o as we,q as v,w as ie}from"./chunk-TDPA2BUG.js";import"./chunk-BJO2AFCW.js";import{B,M as F,w as s}from"./chunk-OIAB2YVD.js";import"./chunk-QHMZGTYF.js";import"./chunk-X5EUMZZI.js";import"./chunk-PJSODKKF.js";import{T as xe,Z as ke,c as rt,ca as x}from"./chunk-VXVCGVBA.js";import"./chunk-G6JM4G2M.js";import{a as b}from"./chunk-DAL2TMJA.js";import"./chunk-IEDGM2AY.js";import"./chunk-DAX5D55P.js";import"./chunk-UAZMAR7J.js";import"./chunk-BQF3XODK.js";import"./chunk-I5RKKMWZ.js";import"./chunk-P5TEJB3G.js";import"./chunk-AXAVBTOG.js";import"./chunk-SEHRB2F7.js";import"./chunk-IH7OWVTK.js";import"./chunk-RF2WJL7B.js";import"./chunk-K5MXWGTT.js";import"./chunk-OTDALOBJ.js";import"./chunk-JCKY6H7C.js";import"./chunk-6AWMYHRK.js";import"./chunk-5VBNU5MN.js";import{f as _,m as n,o as i}from"./chunk-JEQEC2HU.js";n();i();var a=_(b()),We=_(se());F();n();i();var A=_(b()),J=_(se());F();var Me=_(rt());var nt=(e,t)=>{let o=e==="protocol"?ve:be;if(t){let r=new URLSearchParams(t).toString();return`${o}?${r}`}return o},it=({selectedInfo:e,category:t})=>{let o=(0,J.useHistory)(),r=(0,J.useLocation)(),l=new URLSearchParams(r.search);return A.default.createElement("div",{className:"chain-select",onClick:()=>{let m={...Object.fromEntries(l.entries()),pageType:"customCrypto"};o.push(nt(t,m))}},A.default.createElement("div",{className:"chain-select-title"},t==="protocol"?s("extension_defi_info_title_protocol"):s("wallet_custom_crypto_subtitle_select_network")),A.default.createElement("div",{className:"chain-select-box"},t==="protocol"?null:A.default.createElement("img",{className:"chain-select-icon",src:e?.imageUrl||e?.logo,alt:"chain"}),A.default.createElement("div",{className:"chain-select-name"},e?.name),A.default.createElement(xe,{className:(0,Me.default)("okds-arrow-chevron-right-centered-md","chain-select-arrow")})))},X=it;n();i();var ae=_(b());var st=({currentAddress:e,addressInputTitle:t,errorText:o,placeHolderText:r,addressIsInvalid:l,updateCustomCoin:m})=>ae.default.createElement("div",{className:"contract-address-box"},ae.default.createElement(v.TextArea,{autoResize:!0,value:e,title:t,size:v.SIZE.xl,error:l&&o,errorType:v.TIP_TYPE.always,placeholder:r,onChange:p=>{m(p.target.value)}})),Be=st;n();i();var S=_(b());F();V();var at=({customCoin:e})=>{let t=(o,r)=>e.localType===fe?null:S.default.createElement("div",{className:"crypto-base-info"},S.default.createElement("div",{className:"crypto-base-info-title"},o),S.default.createElement("input",{disabled:!0,className:"crypto-base-info-box",value:r.toString()}));return S.default.createElement(S.default.Fragment,null,e?.symbol&&S.default.createElement(S.default.Fragment,null,t(s("wallet_manage_crypto_subtitle_custom_crpto_symbol"),e.symbol),t(s("wallet_manage_crypto_custom_coin_subtitle_decimals"),e.decimals)))},Ue=at;n();i();var y=_(b());F();n();i();var U={"risk-dialog-footer":"_risk-dialog-footer_1wlqq_1",riskDialogFooter:"_risk-dialog-footer_1wlqq_1","risk-dialog-content":"_risk-dialog-content_1wlqq_4",riskDialogContent:"_risk-dialog-content_1wlqq_4","risk-dialog-confirm-btn":"_risk-dialog-confirm-btn_1wlqq_7",riskDialogConfirmBtn:"_risk-dialog-confirm-btn_1wlqq_7","risk-dialog-title":"_risk-dialog-title_1wlqq_16",riskDialogTitle:"_risk-dialog-title_1wlqq_16","risk-dialog-desc":"_risk-dialog-desc_1wlqq_22",riskDialogDesc:"_risk-dialog-desc_1wlqq_22"};var lt=({onCloseDialog:e,onNext:t,riskJumpUrl:o})=>{let r=Oe(),l=(0,y.useCallback)(()=>{o&&setTimeout(()=>{globalThis.platform.openTab({url:`${r.origin}${o}`})},100)},[o]);return y.default.createElement(we,{visible:!0,title:!1,footer:y.default.createElement(T.FlexBox,{className:U.riskDialogFooter,direction:T.DIRECTION.vertical,align:T.ALIGN.center},y.default.createElement(x,{category:x.CATEGORY.outline,type:x.TYPE.primary,size:x.SIZE.lg,block:!0,onClick:e},B("commonall_text_btn_cancel")),y.default.createElement("span",{className:U.riskDialogConfirmBtn,onClick:t},B("wallet_extension_risk_alert_btn_continue_add"))),noMargin:!0,isFull:!0,hideCloseBtn:!0},y.default.createElement(T.FlexBox,{direction:T.DIRECTION.vertical,align:T.ALIGN.center,justify:"center",className:U.riskDialogContent},y.default.createElement(ne,{width:100,height:100,src:"/static/images/risk-warning.png",layout:ne.LAYOUT.contain}),y.default.createElement(R.Text,{strong:500,className:U.riskDialogTitle},B("wallet_extension_risk_alert_title_approve_eoa")),y.default.createElement(R.Text,{size:R.SIZE.sm,type:R.TYPE.secondary,strong:400,className:U.riskDialogDesc},B("wallet_extension_risk_alert_desc_approve_eoa",{detail:""})),o&&y.default.createElement(Z,{type:Z.TYPE.primary,underline:!0,weight:Z.WEIGHT.muted,size:Z.SIZE.md,onClick:l},B("wallet_extension_risk_alert_icu_approve_eoa"))))},He=lt;n();i();ot();V();var le={[D]:{title:"wallet_extension_create_input_title_contract_token_symbol",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[Ie]:{title:"extension_wallet_customcoin_text_currency_symbol",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[Ce]:{title:"extension_wallet_customcoin_text_currency_symbol",titleId:"wallet_extension_cat_desc_token_id",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[ye]:{title:"extension_wallet_cardano_text_fingerprint",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[he]:{title:"wallet_extension_import_title_jetton_master",error:"developer_mode_manage_errortip_request_failed",placeholder:"wallet_extension_import_input_jetton_master"},default:{title:"wallet_transaction_history_subtitle_contract_address",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"}};n();i();var L=_(b());F();V();n();i();var O=_(b());F();var ct=({isFacet:e,onToggle:t})=>{let o=[{value:"ERC20",label:"ERC20"},{value:"Facet",label:"Facet"}],[r,l]=(0,O.useState)(e?"Facet":"ERC20"),m=(0,O.useCallback)((p={value:"ERC20"})=>{l(p.value),t(p.value==="Facet")},[]);return O.default.createElement("div",{className:"chain-select-isfacet"},O.default.createElement(ie,{title:s("extension_defi_info_title_protocol"),value:r,options:o,onChange:m,size:ie.SIZE.lg,searchable:!1,dropMode:!0}))},ze=ct;var mt=({selectedNetwork:e,account:t,accountIsInvalid:o,accountErrorMessage:r,setAccount:l,updateCustomCoin:m,accountRef:p,setProtocol:k,protocol:d,protocolList:g,isFacet:u,setIsFacet:q})=>{let H=Q(),f=Number(H.get("protocolId"));return(0,L.useEffect)(()=>{let c=null;if(!E(e)){k("");return}if(f&&g?.length&&(c=g.find(P=>P.protocolId===f)),!c&&g.length>0&&(c=g[0]),c){let P={...c,name:c.protocolName};k(P)}},[g,e]),{renderCustomForm:()=>e?.coinId===D?L.default.createElement("div",{className:"contract-address-box"},L.default.createElement(v.TextArea,{autoResize:!0,value:t,title:s("wallet_extension_create_input_title_contract_account_name"),size:v.SIZE.xl,error:o&&r,errorType:v.TIP_TYPE.always,placeholder:s("wallet_extension_create_input_title_contract_token_symbol"),onChange:c=>{l(c.target.value),p.current=c.target.value,m()}})):e?.coinId===ge?L.default.createElement(ze,{isFacet:u,onToggle:c=>{q(c),m()}}):E(e)&&d?L.default.createElement(X,{selectedInfo:d,category:"protocol"}):null}},Ye=mt;n();i();var N=_(b()),Ze=_(Ne());V();var dt=(e,t,o,r,l,m)=>{let[p,k]=(0,N.useState)({}),[d,g]=(0,N.useState)(!1),[u,q]=(0,N.useState)(""),[H,f]=(0,N.useState)(!0),[w,c]=(0,N.useState)(""),[P,M]=(0,N.useState)(!1),[z,Y]=(0,N.useState)(!1),G=h=>`facet_${h}`,{run:W}=(0,Ze.useDebounceFn)(async({addr:h,accountName:oe,protocolId:re})=>{if(Y(!1),!h)return;let I;try{I=await Fe({contractAddress:o?G(h):h,chainInfo:e,account:oe,isFacet:o,...E(e)?{protocolId:re}:{}})}catch($){I={},$?.data?.originalError?.data?.code==="ERR_NETWORK"&&Y(!0)}if(h===t){if(k(I),e.coinId===D&&!I?.accountValid){g(!0),q(I.msg),f(!0);return}else if(!w&&e?.coinId===D){M(!1),f(!0);return}g(!1),q(""),h&&I?.symbol?(M(!1),f(!1)):h?(M(!0),f(!0)):(M(!1),f(!0))}},{wait:500});return{customCoin:p,accountIsInvalid:d,accountErrorMessage:u,stateOnLock:H,account:w,addressIsInvalid:P,setAccount:c,updateCustomCoin:()=>{k({}),f(!0),W({addr:r.current,accountName:l.current,protocolId:m?.protocolId})},networkError:z}},Re=dt;n();i();var Ge=_(se()),ee=_(Ne());F();n();i();function ut(e,t){if(e.key&&t.key)return e.key===t.key;if(e.coinId&&t.coinId)return e.coinId===t.coinId;let o=e.address||e.contractAddress,r=t.address||t.contractAddress;return o&&r?o.toLowerCase()===r.toLowerCase()&&e.localType===t.localType:!1}function ce(e,t){for(let o=0;o<t.length;o++){let r=t[o];if(ut(r,e)||r.childrenCoin&&ce(e,r.childrenCoin))return!0}return!1}function me(e,t){let o=(0,Ge.useHistory)(),[r,{setTrue:l,setFalse:m}]=(0,ee.useBoolean)(),p=qe(),{run:k}=(0,ee.useDebounceFn)(async()=>{if(l(),ce(e,p)){K.error(s("wallet_manage_crypto_errortip_crypto_added")),m();return}try{await De({...e,protocolId:t}),K.success(s("wallet_manage_crypto_toast_custom_crypto_success")),o.push(Te)}catch(g){let u=g?.data?.originalError?.msg||s("wallet_extenshion_toast_add_failed");K.error(u)}finally{m()}},{wait:100});return{isSubmitting:r,submitAction:k}}n();i();var _t="Ethereum",pt=()=>{let e=(0,We.useHistory)(),t=a.default.useRef(""),o=a.default.useRef(""),r=a.default.useRef(""),[l,m]=(0,a.useState)(!1),[p,k]=(0,a.useState)(""),[d,g]=(0,a.useState)(""),[u,q]=(0,a.useState)({imageUrl:"",name:"",coinId:-1}),[H,f]=(0,a.useState)(!1),{data:{supportNetworkList:w,protocolList:c}={}}=Pe(u.coinId),M=Q().get("network"),{title:z,titleId:Y,error:G,placeholder:W,placeholderName:te,placeholderId:h}=le[u?.coinId]||le.default,oe=(0,a.useMemo)(()=>E(u)&&d?.searchType?d.searchType===1?s(z):s(Y):s(z),[d.searchType,u,z,Y]),re=(0,a.useMemo)(()=>E(u)&&d?.searchType?d.searchType===1?s(te):s(h):s(W),[W,h,te,d.searchType,u?.coinId]),{customCoin:I,accountIsInvalid:$,accountErrorMessage:$e,stateOnLock:je,account:Ve,addressIsInvalid:de,setAccount:Ke,updateCustomCoin:ue,networkError:_e}=Re(u,p,l,r,t,d),Qe=(0,a.useMemo)(()=>_e?s("developer_mode_manage_errortip_network_error"):s(G),[G,_e]),{renderCustomForm:Je}=Ye({selectedNetwork:u,account:Ve,accountIsInvalid:$,accountErrorMessage:$e,setAccount:Ke,updateCustomCoin:ue,accountRef:t,protocolRef:o,setProtocol:g,protocol:d,protocolList:c,isFacet:l,setIsFacet:m}),{isSubmitting:Xe,submitAction:pe}=me(I,d.protocolId);return(0,a.useEffect)(()=>{async function j(){if(w.length>0){let et=M||_t;q(w.filter(tt=>tt.name===et)[0]||w[0])}}j()},[w]),a.default.createElement("div",{className:"custom-crypto-page main-container"},a.default.createElement(Le,{title:s("wallet_manage_crypto_maintitle_custom_crypto"),onBack:()=>{e.push(Ee)}}),a.default.createElement(T.Spin,{loading:!w?.length||!c?.length,size:ke.SIZE.lg},a.default.createElement("div",{className:"custom-crypto--body"},a.default.createElement(X,{selectedInfo:u}),Je(),a.default.createElement(Be,{updateCustomCoin:j=>{r.current=j,k(j),ue()},currentAddress:p,addressInputTitle:oe,errorText:Qe,placeHolderText:re,addressIsInvalid:de}),a.default.createElement(Ue,{customCoin:I})),a.default.createElement(Ae.FooterActions,{usePortal:!0},a.default.createElement(x,{onClick:()=>{I.riskType===Se.NORMAL?pe():f(!0)},size:x.SIZE.lg,type:x.TYPE.highlight,category:x.CATEGORY.fill,loading:Xe,disabled:de||je||$},s("wallet_set_password_btn_confirm")))),H&&a.default.createElement(He,{onCloseDialog:()=>{f(!1)},onNext:()=>{f(!1),pe()},riskJumpUrl:I.riskJumpUrl}))},er=pt;export{er as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CustomCrypto-HSH25USP.js.map
