import{a as co}from"./chunk-7IVF337O.js";import{a as oo}from"./chunk-SF2UJFOJ.js";import{a as _o}from"./chunk-O2BGLKEM.js";import{a as lo}from"./chunk-ETLDBC7Y.js";import{a as uo}from"./chunk-ZW25VTKR.js";import{B as mo}from"./chunk-OZL64JKT.js";import{a as po}from"./chunk-Y57SQLFF.js";import{a as to}from"./chunk-C6D3UGMF.js";import{a as no,d as ao,f as io}from"./chunk-R7FTGP7E.js";import{b as G}from"./chunk-AVQA7GPY.js";import{k as V}from"./chunk-OFUXQTAD.js";import{a as eo}from"./chunk-NRCRSATA.js";import{b as ro,c as so}from"./chunk-LANQTZFO.js";import{a as P,x as q,y as J}from"./chunk-4HJMB7P7.js";import{q as a}from"./chunk-U7RD3Z4E.js";import{o as No}from"./chunk-XHNZXPBB.js";import{ac as So,mb as X}from"./chunk-ZTS7374H.js";import{wa as K,xa as R,ya as Po}from"./chunk-EY7FXYAJ.js";import{g as Q}from"./chunk-XJYCT5UP.js";import{a as j}from"./chunk-FT7VATMT.js";import{a as $}from"./chunk-YYAHGUV5.js";import{fc as H,lc as bo,n as z,y as xo}from"./chunk-IS2B3ORW.js";import{D as y,H as Z,g as I,o as Y,q as v}from"./chunk-TDPA2BUG.js";import{M as A,w as r,x as B}from"./chunk-OIAB2YVD.js";import{c as Io,ca as w}from"./chunk-VXVCGVBA.js";import{a as F}from"./chunk-DAL2TMJA.js";import{f as m,m as t,o as e}from"./chunk-JEQEC2HU.js";t();e();var o=m(F()),go=m($()),ho=m(Io());A();t();e();t();e();var h=m(F()),T=m(So()),yo=m($()),S=m(No());A();t();e();var fo=()=>to("passwordSecurity",{...oo,location:window.location.href})?.data;bo();xo();Po();t();e();var f=m(F());A();t();e();var g={updateMb32:"_updateMb32_2kuwm_1",centerImage:"_centerImage_2kuwm_4",titleUpdate:"_titleUpdate_2kuwm_11",textUpdate:"_textUpdate_2kuwm_16"};var wo=(s,d)=>{Y.action({mobileWidth:"77.777777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,btnFull:!0,children:f.default.createElement("div",{className:g.updateMb32},f.default.createElement("div",{className:g.centerImage},f.default.createElement("img",{src:d,alt:"updatePassword"})),f.default.createElement("div",{className:g.titleUpdate},r("wallet_extension_password_popup_title_wallet_security_tip")),f.default.createElement("div",{className:g.textUpdate},r("wallet_extension_password_popup_text_wallet_security_tip"))),confirmText:r("wallet_extension_password_popup_btn_update_password"),cancelText:r("wallet_extension_password_popup_btn_maybe_later"),maskClosable:!1,onConfirm:c=>{window.localStorage.pss=1,s.push(J),c.destroy()},cancelBtnProps:{category:"text",type:"primary"},onCancel:c=>{window.localStorage.pss=1,c.destroy()}})};var Uo=s=>`https://${s}/help/how-to-solve-the-problem-of-encountering-password-errors-when-logging-in-to`,D=()=>(0,T.useSelector)(X),O=({form:s})=>{let d=(0,yo.useHistory)(),c=(0,T.useDispatch)(),E=uo(),[p,k]=(0,h.useState)(!1),[l,n]=(0,h.useState)(null),[{walletAsset:N=0}]=mo(),U=fo(),x=(0,T.useSelector)(co),M=H()===z;(0,S.useMount)(()=>{G({islogin:"no",isbydapp:M?" yes":"no",dapp_url:x,wallet_id:E})});let C=lo(),To=po()?.passwordNotice||Uo(C),Eo=Q({dark:"/cdn/assets/imgs/246/74D87A474619BCFE.png",light:"/cdn/assets/imgs/246/696DAB049D0A9095.png"}),ko=(0,S.useMemoizedFn)(async W=>{let L=s.getFieldValue("password");if(L&&!p&&!l)try{let b=window.localStorage.pss;k(!0),await c(V(L)),U&&L.length<_o&&Number(N)>100&&!b&&wo(d,Eo),d.push(P)}catch({message:b}){b===K?n(B("wallet_set_password_errortip_password_wrong_see_notice",{notice:h.default.createElement(I,{size:I.SIZE.sm,weight:I.WEIGHT.muted,target:"_blank",href:To,underline:!0},r("wallet_set_password_errortip_password_wrong_see_notice_icu"))})):b===R&&Z.error(r("wallet_home_toast_version_error")),W&&W()}finally{k(!1)}},[s,p,l]);return{submitting:p,passwordError:l,setPasswordError:n,onSubmit:ko}};t();e();var u={password:"_password_1tu71_1",error:"_error_1tu71_5",forgotPassword:"_forgotPassword_1tu71_8",input:"_input_1tu71_19",btn:"_btn_1tu71_25",footer:"_footer_1tu71_28"};var Co=()=>{let s=y.useForm(),d=D(),c=(0,go.useHistory)();o.default.useLayoutEffect(()=>{d&&c.push(P)},[d]);let{submitting:E,passwordError:p,setPasswordError:k,onSubmit:l}=O({form:s}),n=(0,o.useRef)(null),[N]=so(ro.passwordType),{open:U}=ao(),x=(0,o.useCallback)(async i=>{(i?.key==="Enter"||i?.keyCode===13)&&await l(()=>{n.current&&setTimeout(()=>{n.current.focus()})})},[]);return(0,o.useEffect)(()=>(document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}),[]),N===2?o.default.createElement(o.default.Fragment,null,o.default.createElement(io,{onPass:async i=>{s.setFieldsValue({password:i}),await l()}}),o.default.createElement(a.Text,{className:u.forgotPassword,strong:!0,align:a.ALIGN.center,size:a.SIZE.sm,type:a.TYPE.secondary,onClick:()=>{U()}},r("wallet_extension_biometrics_dialog_title_cant_unlock"))):o.default.createElement(y,{form:s,onChange:()=>{k(null)},onSubmit:async()=>{await l(()=>{n.current&&setTimeout(()=>{n.current.focus()})})}},o.default.createElement(y.Item,{useChildError:!0,name:"password",className:u.password,extra:!!p&&o.default.createElement(a.Text,{size:a.SIZE.sm,className:u.error},p)},o.default.createElement(no,{elementName:"u",autoFocus:"autoFocus",inputClassName:u.input,className:(0,ho.default)({error:!!p}),size:v.SIZE.xl,autoComplete:"off",errorType:v.TIP_TYPE.always,disabled:E,placeholder:r("wallet_home_lock_wallet_placeholder_input_password"),onRef:i=>{n.current=i}})),o.default.createElement(y.Item,{shouldUpdate:!0,className:u.btn},({getFieldValue:i})=>{let C=!i("password")||!!p;return o.default.createElement(eo,{usePortal:!0,placeholder:!0,offsetBottom:0,className:u.footer,style:{zIndex:1e4}},o.default.createElement(j,{to:q,className:u.forgotPassword},o.default.createElement(a.Text,{strong:!0,size:a.SIZE.sm,type:a.TYPE.secondary},r("wallet_footer_subtitle_forgot_password"))),o.default.createElement(w,{block:!0,htmlType:"submit",disabled:C,category:w.CATEGORY.fill,type:w.TYPE.highlight,size:w.SIZE.xl,loading:E,loadingText:r("wallet_home_btn_unlock"),onClick:async()=>{await l(()=>{n.current&&setTimeout(()=>{n.current.focus()})})}},r("wallet_home_btn_unlock")))}))};t();e();export{O as a,Co as b};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-WOS6R5F6.js.map
