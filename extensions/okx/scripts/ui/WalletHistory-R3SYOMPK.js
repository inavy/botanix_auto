import{a as _t}from"./chunk-533ANV2P.js";import{a as yt,b as Lt,d as Ct,e as Tt}from"./chunk-AW5ZFGBU.js";import{d as $}from"./chunk-5EGN4FIQ.js";import"./chunk-EU7MFJZI.js";import"./chunk-DEQSNVVS.js";import"./chunk-VXNMJ34P.js";import"./chunk-5J2GAAY6.js";import"./chunk-GE7QYBP5.js";import"./chunk-7SJN24EA.js";import"./chunk-G5K5AHVE.js";import"./chunk-SK7ZM24Q.js";import"./chunk-LLR77RUB.js";import"./chunk-YC3K6KSF.js";import"./chunk-5VYKPDIW.js";import"./chunk-T4SJQSS7.js";import"./chunk-XWRXEU7I.js";import"./chunk-3V4N3SLP.js";import"./chunk-CHH4UZQE.js";import"./chunk-ZBRU2CAM.js";import"./chunk-V3INX46H.js";import"./chunk-JTVJ673F.js";import"./chunk-EC67JB7S.js";import"./chunk-WINPS5JO.js";import"./chunk-BNPYGBEA.js";import"./chunk-75JFJJ6E.js";import"./chunk-WOF2MG5G.js";import"./chunk-6QV7GAE5.js";import"./chunk-QT2MBFKK.js";import"./chunk-MUF5KFVU.js";import"./chunk-BSWNOA7X.js";import"./chunk-NWOIYLOG.js";import"./chunk-JLHU3WBU.js";import"./chunk-QPQGDYXW.js";import"./chunk-5GIEDSLN.js";import"./chunk-WPUSOCZ5.js";import"./chunk-6NFIXY6G.js";import"./chunk-IGLJY5RQ.js";import"./chunk-BOYKE4FM.js";import"./chunk-UF32D7MW.js";import"./chunk-CR7XMKUK.js";import"./chunk-SSZF4QIS.js";import"./chunk-ARGDR26M.js";import"./chunk-M24SOKF4.js";import"./chunk-SSTSMCPU.js";import"./chunk-LF7H3MNC.js";import"./chunk-KCCATSGJ.js";import"./chunk-ZU6LAH2A.js";import"./chunk-MIULHQB2.js";import"./chunk-BQUWM53Y.js";import"./chunk-XEXJRJUY.js";import"./chunk-3DNJNRLL.js";import"./chunk-FPIWIEGC.js";import"./chunk-3MOQA4IF.js";import"./chunk-2I7TRLZ4.js";import{a as xt}from"./chunk-EUUYJCYJ.js";import{a as b,c as mt,d as E,e as K,f as j,h as ft,i as R,j as O,k as ut,p as Y,q,r as pt,s as ht,t as dt}from"./chunk-IV6GJDJI.js";import{b as ct}from"./chunk-6AXFJWFY.js";import"./chunk-BPSSG62G.js";import"./chunk-ZDO7TFIW.js";import"./chunk-MTJW726U.js";import"./chunk-I3X2I3EE.js";import"./chunk-4JU7MQBN.js";import"./chunk-25SZ52UW.js";import"./chunk-SGHBHZD2.js";import"./chunk-DAXYD52J.js";import"./chunk-3VDT32YX.js";import"./chunk-RNBNCNHM.js";import"./chunk-ZUBJ4HSQ.js";import"./chunk-NRDSUSOX.js";import"./chunk-OLBL2ESK.js";import"./chunk-WFHUBXJH.js";import"./chunk-YL2OEBEM.js";import"./chunk-UBREW6HU.js";import"./chunk-33LBA2KN.js";import"./chunk-ETLDBC7Y.js";import"./chunk-NPTEYWCZ.js";import"./chunk-BYUE2OWP.js";import"./chunk-3SFQGMQT.js";import"./chunk-PCTAUYQN.js";import"./chunk-ZW25VTKR.js";import"./chunk-OZL64JKT.js";import"./chunk-SF4X4VPT.js";import"./chunk-EUVFIXQT.js";import"./chunk-WJQMDYRJ.js";import"./chunk-OANAR4PZ.js";import"./chunk-DY3DHSF2.js";import"./chunk-LZKLGZM5.js";import"./chunk-DM55GZK5.js";import"./chunk-OVX2PTCV.js";import"./chunk-Y57SQLFF.js";import"./chunk-C6D3UGMF.js";import"./chunk-VHMLJAAA.js";import"./chunk-DS7KEGTF.js";import"./chunk-GWV4SS46.js";import{a as gt}from"./chunk-YFSBCNC7.js";import"./chunk-OFUXQTAD.js";import"./chunk-AJGKE3VO.js";import"./chunk-NRCRSATA.js";import"./chunk-LANQTZFO.js";import"./chunk-NZHMCNZN.js";import"./chunk-CBDQQ72I.js";import"./chunk-4HJMB7P7.js";import"./chunk-A2W6OJDL.js";import{q as S}from"./chunk-U7RD3Z4E.js";import"./chunk-CJVER5MJ.js";import{f as at}from"./chunk-S5IEFQ34.js";import{o as Z}from"./chunk-XHNZXPBB.js";import{ac as H,fa as nt}from"./chunk-ZTS7374H.js";import"./chunk-QXE433GW.js";import{_ as lt,da as Ut}from"./chunk-EY7FXYAJ.js";import"./chunk-B26CCOB3.js";import"./chunk-RRPGPABV.js";import"./chunk-D2RJYC6D.js";import"./chunk-VMA4KAKW.js";import"./chunk-XJYCT5UP.js";import"./chunk-XIAMW27T.js";import{a as N}from"./chunk-QYHQY2ME.js";import"./chunk-FT7VATMT.js";import{a as zt}from"./chunk-YYAHGUV5.js";import"./chunk-QJGSL63Z.js";import"./chunk-7ZE3XWQE.js";import"./chunk-42AETIVN.js";import"./chunk-DKCCIZ3Q.js";import"./chunk-C77R5D6K.js";import{c as h}from"./chunk-HBMVMNWX.js";import"./chunk-IS2B3ORW.js";import"./chunk-YGSCKFAL.js";import{A as G,C as it,o as rt,w as st}from"./chunk-TDPA2BUG.js";import"./chunk-BJO2AFCW.js";import{M as F,w as g}from"./chunk-OIAB2YVD.js";import"./chunk-QHMZGTYF.js";import"./chunk-X5EUMZZI.js";import"./chunk-PJSODKKF.js";import{T as ot,c as At}from"./chunk-VXVCGVBA.js";import"./chunk-G6JM4G2M.js";import{a as y}from"./chunk-DAL2TMJA.js";import"./chunk-IEDGM2AY.js";import"./chunk-DAX5D55P.js";import"./chunk-UAZMAR7J.js";import"./chunk-BQF3XODK.js";import"./chunk-I5RKKMWZ.js";import"./chunk-4LMFSJNF.js";import"./chunk-VNO3IDCT.js";import"./chunk-P5TEJB3G.js";import"./chunk-AXAVBTOG.js";import"./chunk-SEHRB2F7.js";import"./chunk-IH7OWVTK.js";import"./chunk-RF2WJL7B.js";import"./chunk-K5MXWGTT.js";import"./chunk-OTDALOBJ.js";import"./chunk-JCKY6H7C.js";import"./chunk-6AWMYHRK.js";import"./chunk-5VBNU5MN.js";import{f as l,m as e,o}from"./chunk-JEQEC2HU.js";e();o();var r=l(y()),A=l(H()),Rt=l(zt());F();Ut();e();o();var w=l(y()),v=l(H());e();o();var V=l(y());F();e();o();var M={root:"_root_tcl1w_1",filter:"_filter_tcl1w_13"};e();o();var _=l(y());var Nt=l(At());F();var St=l(Z());var Wt={tooltip:"wallet_extension_history_tooltip_autoblocked_risky"},Dt="hasReadTxHistoryFilterEntryTooltip",Gt=()=>{try{return localStorage.getItem(Dt)??!1}catch{return!0}},Kt=()=>{try{localStorage.setItem(Dt,!0)}catch(s){console.error(s)}};function Yt({onClick:s}){let t=(0,_.useRef)();(0,_.useEffect)(()=>{Gt()||(t.current.setVisible(!0),Kt())},[]);let n=c=>{t.current=c},i=(0,_.useRef)();return(0,St.useClickAway)(()=>{t.current.setVisible(!1)},i),_.default.createElement(G,{popupRef:n,placement:G.DIRECTION.bottomRight,title:g(Wt.tooltip)},_.default.createElement(h.Box,{ref:i},_.default.createElement(ot,{onClick:s,className:(0,Nt.default)("okds-filter",M.filter)})))}var wt=Yt;e();o();var D=l(y());F();e();o();var k={root:"_root_skuda_1",textBox:"_textBox_skuda_7",text:"_text_skuda_7"};e();o();var P=l(y());function qt({onChange:s,reject:t}){let[n,i]=(0,P.useState)(t);return(0,P.useEffect)(()=>{i(t)},[t]),{currentReject:n,onChangeReject:d=>m=>{let f=t,x={...f,[d]:m};i(x),mt(d,m).then(p=>{p?(i(x),s?.(x)):i(f)}).catch(()=>{i(f)})}}}var Bt=qt;var bt={hideValuelessNftTittle:"wallet_extension_history_toggle_block_risky",hideValuelessNftSubtitle:"wallet_extension_history_toggle_risky_invalid_only"},Zt=s=>{let{currentReject:t,onChangeReject:n}=Bt(s);return D.default.createElement(h.Box,{className:k.root},D.default.createElement(h.Box,{className:k.textBox},D.default.createElement(S.Text,{warp:!0,strong:!0,size:S.SIZE.md,className:k.text},g(bt.hideValuelessNftTittle)),D.default.createElement(S.Text,{warp:!0,size:S.SIZE.xs,className:k.text,type:S.TYPE.secondary},g(bt.hideValuelessNftSubtitle))),D.default.createElement(it,{onChange:n(b.hideValuelessNft),checked:t?.[b.hideValuelessNft]}))},kt=Zt;e();o();var I=l(y()),It=l(H());function $t(){let s=(0,It.useDispatch)(),[t,n]=(0,I.useState)({[b.hideValuelessNft]:!1}),[i,c]=(0,I.useState)(!1),d=()=>E().then(p=>{n(p)}).catch(()=>{});(0,I.useEffect)(()=>{d()},[]);let m=()=>{c(!0)},f=()=>{c(!1)};return{reject:t,onChangeShowValueLess:p=>{n(p),s(j({})),setTimeout(()=>{f()},200)},openDialog:m,closeDialog:f,showRejectDialog:i}}var Vt=$t;function Jt(){let{reject:s,onChangeShowValueLess:t,openDialog:n,closeDialog:i,showRejectDialog:c}=Vt();return V.default.createElement(h.Box,{className:M.root},V.default.createElement(wt,{onClick:n}),V.default.createElement(rt,{title:g("wallet_extension_history_title_filter"),visible:c,onClose:i,onCancel:i,alignBottom:!0,noMargin:!0},V.default.createElement(kt,{onChange:t,reject:s})))}var Ft=Jt;e();o();var J={"retina-border-basic":"_retina-border-basic_12hb5_1",retinaBorderBasic:"_retina-border-basic_12hb5_1",root:"_root_12hb5_29",left:"_left_12hb5_68"};function Qt(){let s=(0,v.useDispatch)(),t=(0,v.useSelector)(R);return w.default.createElement(_t,{align:st.DIRECTION.left,value:t.mainCoinId,searchable:!0,onChange:n=>{s(j({mainCoinId:n}))}})}function Xt(){return w.default.createElement(h.Box,{className:J.root},w.default.createElement(h.Box,{className:J.left},w.default.createElement(Qt,null)),w.default.createElement(Ft,null))}var Et=Xt;e();o();var a=l(y()),L=l(H()),B=l(Z());var te=({txData:s,setTxData:t,explorerUrl:n})=>{let i=(0,L.useDispatch)(),c=(0,L.useSelector)(R),d=(0,L.useSelector)(ft),m=(0,L.useSelector)(at),f=(0,L.useSelector)(ut),x=(0,L.useSelector)(O),[p,U]=(0,a.useState)(null),{run:T}=(0,B.useDebounceFn)(()=>{i(K({...x}))},{wait:200}),z=(0,a.useCallback)(()=>{i(K({...x},{scrollLoad:!0}))},[c]);Tt({scrollContainer:p},T),(0,B.useInfiniteScroll)(z,{target:p,threshold:150});let[Q,W]=(0,a.useMemo)(()=>yt(d,m),[d,m]),C=(0,B.useMemoizedFn)(()=>{t(null)});return a.default.createElement(a.default.Fragment,null,a.default.createElement(Ct.HistoryList,{completedList:W,pendingList:Q,isLoading:f,onClick:t,onRepeat:T,onContainer:U,explorerUrl:n}),a.default.createElement(Lt,{visible:!!s,params:s,onRefresh:T,onClose:C}))},jt=(0,a.memo)(te);e();o();var Ot=l(Z()),ee=()=>{let s=(0,Rt.useHistory)(),t=(0,A.useDispatch)(),n=(0,A.useSelector)(O),i=ct()?.stringDates?.[0],[c,d]=(0,r.useState)(!0),[m,f]=(0,r.useState)(null),x=(0,Ot.useLatest)(m),[p,U]=(0,r.useState)([]);(0,r.useEffect)(()=>{let W=[(async()=>{let C=await E()??{};return await nt({startDate:new Date(`${i} 00:00:00`).getTime(),...n,hideValuelessNft:C?.hideValuelessNft??!0,status:[N.PENDING,N.CONFIRMING,N.ERROR,N.SUCCESS,N.WITHDRAWING]})})()];Promise.all(W).then(([C])=>{let X=(et,Mt)=>{let Pt=et.length,vt=Mt?et[Pt-1]?.rowId:"";t(ht(vt)),t(q(!1))},tt=C.content||[],Ht=C.hasViewMore;t(Y(tt)),U(C?.explorerUrl||[]),X(tt,Ht)}).catch(()=>{t(Y([])),t(q(!1))}).finally(()=>{d(!1)})},[]);let T=()=>{s.goBack(),t(dt()),t(pt()),t(lt())},z=(0,r.useCallback)(()=>{x.current?f(null):T()},[m]);return r.default.createElement($.PageContainer,{className:"tx-history__container"},r.default.createElement(gt,{sticky:!1,className:"tx-history__navigator",title:g("wallet_extension_header_text_history"),onBack:T,closeable:!1,bordered:!1,customizeBackFn:z}),c?r.default.createElement(xt,null):r.default.createElement(r.default.Fragment,null,r.default.createElement($.FilterContainer,null,r.default.createElement(Et,null)),r.default.createElement(jt,{txData:m,setTxData:f,explorerUrl:p})))},Po=(0,r.memo)(ee);export{Po as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=WalletHistory-R3SYOMPK.js.map
