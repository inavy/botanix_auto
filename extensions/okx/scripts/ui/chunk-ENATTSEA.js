import{a as me}from"./chunk-Y6YYFXOD.js";import{c as C}from"./chunk-3N45D4U2.js";import{c as ue}from"./chunk-XCYZGVDR.js";import{b as re,c as oe,d as ne,e as x,f as T,l as se}from"./chunk-Y6TYNJA3.js";import{a as l}from"./chunk-ZML7M4AG.js";import{d as ie,k as ce}from"./chunk-HTIBXKUW.js";import{c as ae}from"./chunk-SSTSMCPU.js";import{Ma as E,N as J,Na as R,Ya as te,pb as w,sa as L,ta as U,ua as ee}from"./chunk-LF7H3MNC.js";import{k}from"./chunk-KCCATSGJ.js";import{a as z}from"./chunk-YYAHGUV5.js";import{a as P,b as Re}from"./chunk-YGSCKFAL.js";import{L as $,M as X,S as j,a as H,b as B,g as Y,pa as F}from"./chunk-BJO2AFCW.js";import{F as Q,I as Z,M as _,a as d,b as K,g as V,v as q}from"./chunk-OIAB2YVD.js";import{a as Se}from"./chunk-DAL2TMJA.js";import{f as y,m as a,o as i}from"./chunk-JEQEC2HU.js";a();i();_();function fe(){let{pathname:t}=Q();return t.endsWith(x)||t.endsWith(T)}function I(){return(d()||l())&&fe()}a();i();F();_();Re();a();i();_();var Te=t=>{let{pathname:e}=ue(t);return ee.find(o=>new RegExp(o.reg).test(e))?.params||{}},Ie="dex_source_env",Ae="dex-swap/bridge",Ce="dex-swap/meme",G=()=>{if(d())return{};if(l())return q.session.g.get(Ie);if(R()){let t=L.SWAP,e=window?.location?.hash;return e?.indexOf(Ae)>-1?t=L.BRIDGE:e?.indexOf(Ce)>-1&&(t=L.MEME),{source:me()?U.TGAPP:U.PLUGIN,business_type:t,trade_dialog:"no"}}return Te(window.location.href)};a();i();F();function W(t){let e={...t};return Object.keys(e).forEach(r=>{let o=t[r];($(o)||o===""||X(o))&&delete e[r]}),e}var we=[0],ut=()=>new AbortController,xe=()=>Promise.reject(),mt=t=>t?.status===P.STATUS_CODE?.ERR_CANCELED;async function D(t={}){let e=t;if(R()&&(e=await k.global?.interceptorHeaders(t),e.url=`https://${k.global.getApiHostname()}${e.url}`),!d()&&l()&&!R()){e.headers||(e.headers={});let r=G();e.headers.Referer_URL=r.iframe_referrer,r.widget_version&&(e.headers.Widget_version=G().widget_version)}return B(e.params)&&(e.params=W(e.params)),H(e.data)?e.data=e.data.map(r=>W(r)):B(e.data)&&(e.data=W(e.data)),e.needSign=!0,e.customToLogin=xe,e}function O(t){return t.then(e=>{let{data:r}=e;return we.includes(r?.code)?r:Promise.reject(r||{})})}var A={};A.get=(t,e)=>O(D({...e,url:t}).then(r=>{let{url:o,...s}=r;return P.get(o,s)}));A.getWithCache=(t,e)=>O(D({...e,url:t}).then(r=>{let{url:o,...s}=r;return P.getWithCache(o,{cacheSeconds:60*5,...s})}));A.post=(t,e,r)=>O(D({...r,url:t,data:e,method:"post"}).then(o=>{let{url:s,data:n,...f}=o;return P.post(s,n,f)}));A.delete=(t,e,r)=>O(D({...r,url:t,data:e,method:"delete"}).then(o=>{let{url:s,...n}=o;return P.delete(s,n)}));var ft=A;a();i();_();a();i();a();i();var b=y(z());_();function We(){let t=(0,b.useLocation)(),e=(0,b.useHistory)(),r=c=>{e.replace(c)},o=c=>{e.push(c)},s=c=>{let m=`${c.pathname||t.pathname}${c.search||""}${c.hash||""}`;Z(m,"_self")};return{replace:(c,u)=>{([E.WALLET_DASHBOARD,E.MARKET].includes(c)?s:r)(u)},pushFn:(c,u)=>{([E.WALLET_DASHBOARD,E.MARKET].includes(c)?s:o)(u)}}}var pe=We;a();i();F();function v({from:t,to:e,inputAmount:r,feeConfig:o,btcAddressType:s}={}){let n=new URLSearchParams,f=(u,m)=>{ce(m?.chainId)&&n.set(`${u}Chain`,m.chainId),m?.tokenContractAddress&&n.set(`${u}Currency`,m.tokenContractAddress)},c=u=>{u?.referrerAddress&&u?.feePercent&&(n.set("referrerAddress",u.referrerAddress),n.set("feePercent",u.feePercent))};return f("input",t),f("output",e),c(o),r&&n.set("inputAmount",r),s&&n.set("addressType",s),n}function de(t={}){let e=v(t);e.delete("referrerAddress"),e.delete("feePercent");let r=j(t,["from","to","inputChain","inputCurrency","outputChain","outputCurrency","inputAmount","feeConfig","btcAddressType","tokenPair","bridgeTokenPair"]);return Y(r).forEach(o=>{e.set(o,r[o])}),e}function le(t,e){let r=s=>{let n=f=>{let c=t.get(`${s}${f}`);return!c&&e&&(c=t.get(`${s}Limit${f}`)),c};return{chainId:n("Chain"),tokenContractAddress:n("Currency")}},o=()=>{let s=t.get("referrerAddress"),n=t.get("feePercent");return l()&&s&&n&&!ae(n)?{referrerAddress:s,feePercent:n}:{}};return{from:r("input"),to:r("output"),inputAmount:t.get("inputAmount"),feeConfig:o(),btcAddressType:t.get("addressType"),autoSwitch:t.get("autoSwitch")}}function Ee(t,e){return!t||!e?"":t===E.OKX_WALLET_EXTENSION?e:se(e)}a();i();var he=y(Se()),ge=y(z());function De(){let{hash:t,search:e}=(0,ge.useLocation)(),r=t&&t.indexOf("#")>-1?t.slice(1):t;return(0,he.useMemo)(()=>new URLSearchParams(e||r),[e,r])}var _e=De;function Oe(t){let{commonStore:e}=C(),{portal:r,computedCurrentTabIsLimit:o}=e,s=_e(),n=pe(),f=({pathname:u,params:m}={})=>{let h=Ee(r,u),S=I()?de(m).toString():v(m).toString(),g={};h&&(g.pathname=h),S&&(g.search=`?${S}`),t?n.pushFn(r,g):n.replace(r,g)};return{params:le(s,o),replace:f}}var Pe=Oe;var Xt=()=>{let{fromToStore:t,accountStore:e,commonStore:r}=C(),{updateFrom:o,updateTo:s,setField:n,advanceSetTypedValue:f}=t,{setCurrentTab:c}=r;return(u,m,h,S)=>{let g=e.isConnectedWallet,N=[];if(c(S,!0),u&&(o({...u,amount:1}),N.push(u.chainId),h)){let M=h===J?"":ie(h,u.decimals);n(te.FROM),f(M,!1,S),o({amount:M})}m&&(s(m),N.push(m.chainId)),g&&t.getSwapTokenBalance()}},jt=()=>(t,e)=>{let r={from:{chainId:t?.chainId,tokenContractAddress:t?.tokenContractAddress},to:{chainId:e?.chainId,tokenContractAddress:e?.tokenContractAddress}};return r.from.tokenContractAddress&&r.to.tokenContractAddress?r:null},Kt=()=>{let{replace:t}=Pe();return r=>{let o=I();switch(r){case w.SWAP:t({pathname:o?x:re});break;case w.BRIDGE:t({pathname:o?T:oe});break;case w.LIMIT_ORDER:t({pathname:ne});break;default:K.error("useReplaceLocationByTab: unknown tab type");break}}};a();i();var Zt={YES:1,NO:0},zt={NETWORK_FEE:"0",FREE_NETWORK_FEE:"1"},Jt={INTENT_BRIDGE:3},er={FREE:"1",NOT_FREE:"0"};a();i();_();function be(){let t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[],r;e[8]="-",e[13]="-",e[18]="-",e[23]="-",e[14]="4";for(let o=0;o<36;o++)e[o]||(r=0|V.get()*16,e[o]=t[o==19?r&3|8:r]);return e.join("")}function sr(){if(d())return"";let t=localStorage.getItem("onChainUserId"),e=be();return t||localStorage.setItem("onChainUserId",e),t||e}export{I as a,G as b,ut as c,mt as d,ft as e,be as f,sr as g,Pe as h,Xt as i,jt as j,Kt as k,Zt as l,zt as m,Jt as n,er as o};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-ENATTSEA.js.map
