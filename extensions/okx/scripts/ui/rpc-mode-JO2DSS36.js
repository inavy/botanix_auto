import{a as ks,b as vs}from"./chunk-6T5Z3ZNX.js";import{a as Ns,b as bs,l as ws}from"./chunk-OUOYC5PX.js";import{a as go,b as Lo,c as Bo,d as St,e as Dt,f as ys,g as Es,h as Is}from"./chunk-3OSFEYEP.js";import{d as y,e as Ee,f as Ae,g as To,h as ts,i as rs,j as ns,k as ss,m as wt}from"./chunk-5EGN4FIQ.js";import{a as os}from"./chunk-EU7MFJZI.js";import"./chunk-DEQSNVVS.js";import{a as is,b as At,c as ds,d as us,e as fs,f as _s,i as Ts,j as gs,k as hs,l as xs,o as Cs}from"./chunk-2A7OXRFA.js";import{a as b,b as N,c as Ye,d as as,e as ms,f as Pe,g as ls,h as Pt,i as cs,k as ps}from"./chunk-R2CJJDI4.js";import"./chunk-5UIKXIUM.js";import"./chunk-3TLJJ3DH.js";import{a as we}from"./chunk-GEWIZ4GA.js";import{a as Za}from"./chunk-XTIUEDQS.js";import"./chunk-H4HD67UD.js";import{a as es}from"./chunk-7NZI2WVC.js";import{a as $n,b as Yn,c as Zn,e as Qn,f as Jn,g as Rn}from"./chunk-OA6RWBVP.js";import{a as Kn}from"./chunk-BAX673HC.js";import{a as Vn}from"./chunk-OJQJM7DZ.js";import"./chunk-AGWI7YU5.js";import"./chunk-FIOASPFJ.js";import{a as jn}from"./chunk-U2Z6MI3Z.js";import"./chunk-C6Q6RRWB.js";import"./chunk-AEU3J7K7.js";import"./chunk-3RW2LXDJ.js";import"./chunk-GA5LPOBO.js";import{a as Wn}from"./chunk-KVC25X33.js";import"./chunk-7WAPJBDH.js";import"./chunk-GE7QYBP5.js";import{a as Gn}from"./chunk-CSJR56CD.js";import"./chunk-7SJN24EA.js";import"./chunk-G5K5AHVE.js";import{a as On,d as Ln}from"./chunk-SK7ZM24Q.js";import"./chunk-F4M2S35A.js";import"./chunk-LLR77RUB.js";import"./chunk-5VYKPDIW.js";import"./chunk-T4SJQSS7.js";import"./chunk-XWRXEU7I.js";import"./chunk-3V4N3SLP.js";import"./chunk-YMOXEVIF.js";import{a as gr,b as Bn}from"./chunk-V3INX46H.js";import"./chunk-JTVJ673F.js";import{a as Mn}from"./chunk-MIZXVXK6.js";import"./chunk-GNBB55K5.js";import"./chunk-EC67JB7S.js";import"./chunk-WINPS5JO.js";import{b as Fn,c as hr,d as Oo,e as Un,h as xr}from"./chunk-GANFA4Y3.js";import{f as fo}from"./chunk-BNPYGBEA.js";import{e as Tr}from"./chunk-75JFJJ6E.js";import"./chunk-WOF2MG5G.js";import"./chunk-6QV7GAE5.js";import{a as Dn}from"./chunk-QT2MBFKK.js";import"./chunk-MUF5KFVU.js";import"./chunk-BSWNOA7X.js";import"./chunk-NWOIYLOG.js";import{a as ne}from"./chunk-JLHU3WBU.js";import{a as qn}from"./chunk-BRHQ3OOM.js";import"./chunk-W4DIIHQK.js";import"./chunk-5VVEC6ZH.js";import{a as bt,b as zn}from"./chunk-AXBVVFHE.js";import"./chunk-BJDE5FLQ.js";import"./chunk-33CD6775.js";import"./chunk-RV4CTONM.js";import{a as Hn}from"./chunk-5GIEDSLN.js";import{b as _o}from"./chunk-PL466WLP.js";import"./chunk-WPUSOCZ5.js";import"./chunk-6NFIXY6G.js";import"./chunk-IGLJY5RQ.js";import"./chunk-BOYKE4FM.js";import{a as Sn}from"./chunk-UF32D7MW.js";import"./chunk-CR7XMKUK.js";import"./chunk-SSZF4QIS.js";import"./chunk-ARGDR26M.js";import"./chunk-O4FKU574.js";import"./chunk-JLFHBBHU.js";import"./chunk-2EOTITIK.js";import"./chunk-RUGU7MNC.js";import{b as Xn}from"./chunk-AIV3ZOJU.js";import"./chunk-GSZDZBPQ.js";import"./chunk-GT6LSQQN.js";import"./chunk-M24SOKF4.js";import"./chunk-SSTSMCPU.js";import"./chunk-LF7H3MNC.js";import"./chunk-KCCATSGJ.js";import"./chunk-ZU6LAH2A.js";import"./chunk-MIULHQB2.js";import"./chunk-CK3VDP7L.js";import"./chunk-BQUWM53Y.js";import"./chunk-XEXJRJUY.js";import"./chunk-3DNJNRLL.js";import"./chunk-FPIWIEGC.js";import"./chunk-3MOQA4IF.js";import"./chunk-2I7TRLZ4.js";import{d as Ka}from"./chunk-QT7VM7OI.js";import{a as Ha,c as po,d as re,e as So,f as In}from"./chunk-S63Q6H3Z.js";import{b as X,c as Ce,d as Ct,e as mo,f as pn,g as yt,h as dn,i as pr,j as lo,k as Et,l as co,m as dr,n as un,o as fn,p as _n,q as Tn,r as gn,s as hn,t as ur,u as xn,v as Cn,w as yn,y as En,z as It}from"./chunk-V3JNXBKP.js";import"./chunk-5JA7QTRT.js";import"./chunk-ZVGQRWB5.js";import{b as xt}from"./chunk-HLX5DVID.js";import"./chunk-6AXFJWFY.js";import"./chunk-BPSSG62G.js";import{b as kn}from"./chunk-MTJW726U.js";import"./chunk-I3X2I3EE.js";import"./chunk-4JU7MQBN.js";import"./chunk-25SZ52UW.js";import"./chunk-SGHBHZD2.js";import"./chunk-DAXYD52J.js";import"./chunk-3VDT32YX.js";import"./chunk-RNBNCNHM.js";import"./chunk-ZUBJ4HSQ.js";import"./chunk-NRDSUSOX.js";import{d as fr}from"./chunk-OLBL2ESK.js";import"./chunk-WFHUBXJH.js";import"./chunk-YL2OEBEM.js";import"./chunk-UBREW6HU.js";import"./chunk-33LBA2KN.js";import{G as Yr,T as Kr,fa as Zr}from"./chunk-NPTEYWCZ.js";import"./chunk-BYUE2OWP.js";import"./chunk-RYU3O6YH.js";import"./chunk-QIXX6RE5.js";import"./chunk-ZLXZXLBF.js";import"./chunk-3SFQGMQT.js";import"./chunk-PCTAUYQN.js";import{a as Pn}from"./chunk-ZW25VTKR.js";import{c as sn,f as an,g as mn,m as Nt,o as ue,p as A,q as vn,s as Nn,u as bn,v as wn,w as An}from"./chunk-OZL64JKT.js";import"./chunk-SF4X4VPT.js";import{a as D}from"./chunk-EUVFIXQT.js";import"./chunk-WJQMDYRJ.js";import{b as de}from"./chunk-OANAR4PZ.js";import"./chunk-DY3DHSF2.js";import"./chunk-LZKLGZM5.js";import"./chunk-DM55GZK5.js";import{d as ao}from"./chunk-OVX2PTCV.js";import"./chunk-Y57SQLFF.js";import"./chunk-C6D3UGMF.js";import"./chunk-VHMLJAAA.js";import{a as _r,i as vt}from"./chunk-DS7KEGTF.js";import"./chunk-GWV4SS46.js";import"./chunk-AVQA7GPY.js";import{a as z}from"./chunk-YFSBCNC7.js";import"./chunk-OFUXQTAD.js";import"./chunk-AJGKE3VO.js";import{a as be}from"./chunk-NRCRSATA.js";import"./chunk-LANQTZFO.js";import"./chunk-NZHMCNZN.js";import"./chunk-CBDQQ72I.js";import{$a as on,Aa as ft,Ba as _t,Ca as Tt,Da as so,Ea as gt,Q as Xr,R as jr,T as Jr,_ as Rr,a as Q,i as Qr,ua as en,va as pt,wa as no,xa as pe,ya as dt,za as ut}from"./chunk-4HJMB7P7.js";import{b as kt}from"./chunk-A2W6OJDL.js";import{m as uo,q as ye}from"./chunk-U7RD3Z4E.js";import"./chunk-CJVER5MJ.js";import{f as io}from"./chunk-S5IEFQ34.js";import{o as j}from"./chunk-XHNZXPBB.js";import{Jb as ht,ac as w,m as G,tb as tn,xb as rn,yb as nn}from"./chunk-ZTS7374H.js";import"./chunk-QXE433GW.js";import{a as Wa}from"./chunk-EY7FXYAJ.js";import{d as qr,f as Ya}from"./chunk-B26CCOB3.js";import"./chunk-RRPGPABV.js";import"./chunk-D2RJYC6D.js";import"./chunk-VMA4KAKW.js";import"./chunk-XJYCT5UP.js";import"./chunk-XIAMW27T.js";import{e as Po,m as ro}from"./chunk-QYHQY2ME.js";import"./chunk-FT7VATMT.js";import{a as W}from"./chunk-YYAHGUV5.js";import{a as ae,b as cn}from"./chunk-QJGSL63Z.js";import{e as ln}from"./chunk-7ZE3XWQE.js";import{a as Va}from"./chunk-42AETIVN.js";import"./chunk-DKCCIZ3Q.js";import"./chunk-C77R5D6K.js";import{c as Do}from"./chunk-HBMVMNWX.js";import{Db as $,Fb as Gr,Gb as ze,Ib as at,Jb as mt,Kb as Ve,Lb as Ao,Lc as $a,Mb as oo,Rb as $e,Sb as ie,V as Hr,Xa as Ua,Xb as lt,cc as oe,fc as Wr,lc as Ga,m as Ur,y as Ma,yc as cr}from"./chunk-IS2B3ORW.js";import"./chunk-YGSCKFAL.js";import{A as xe,D as H,G as to,H as $r,c as zr,o as ct,q as S,y as Vr}from"./chunk-TDPA2BUG.js";import{J as Br,K as it,f as Dr,la as Fr,pa as Re,r as Or,y as Lr}from"./chunk-BJO2AFCW.js";import{M as v,e as eo,l as M,n as Mr,w as l}from"./chunk-OIAB2YVD.js";import"./chunk-QHMZGTYF.js";import"./chunk-X5EUMZZI.js";import"./chunk-PJSODKKF.js";import{T as F,Z as lr,c as te,ca as L}from"./chunk-VXVCGVBA.js";import{a as za}from"./chunk-G6JM4G2M.js";import{a as _}from"./chunk-DAL2TMJA.js";import"./chunk-IEDGM2AY.js";import"./chunk-DAX5D55P.js";import"./chunk-UAZMAR7J.js";import"./chunk-BQF3XODK.js";import"./chunk-I5RKKMWZ.js";import"./chunk-4LMFSJNF.js";import"./chunk-VNO3IDCT.js";import"./chunk-P5TEJB3G.js";import"./chunk-AXAVBTOG.js";import"./chunk-SEHRB2F7.js";import"./chunk-IH7OWVTK.js";import"./chunk-RF2WJL7B.js";import"./chunk-K5MXWGTT.js";import"./chunk-OTDALOBJ.js";import"./chunk-JCKY6H7C.js";import"./chunk-IGOE6FNH.js";import"./chunk-23R5U7AT.js";import"./chunk-2OYABAWU.js";import"./chunk-SUEGF6ID.js";import"./chunk-6ZQNEFQR.js";import"./chunk-6AWMYHRK.js";import"./chunk-5VBNU5MN.js";import{f as a,h as mr,m as n,o as s}from"./chunk-JEQEC2HU.js";n();s();var tt=a(_()),La=a(w()),vo=a(W());n();s();var Z=a(_()),R=a(W());n();s();var k=a(_()),Mo=a(w()),Vs=a(W()),$s=a(Ka()),Ys=a(j());v();Ga();Ma();n();s();var me=a(_()),As=a(W()),Ps=a(te()),Ss=a(_r());v();n();s();var Fo={button:"_button_l2q1y_1",showButton:"_showButton_l2q1y_5",editIcon:"_editIcon_l2q1y_11"};var qa=190,Ds=({dataSource:e,backupHeight:t,scrollTop:o})=>{let r=(0,me.useMemo)(()=>e.length>=8&&o>qa,[e.length,o]),{paddingBottom:i,buttonPaddingBottom:m,absoluteBottom:c}=Xn({isButtonAbsolute:r,backupHeight:t});return me.default.createElement("div",{className:Fo.wrapper},me.default.createElement("div",{style:{paddingBottom:i}},me.default.createElement(fr,{className:"rc-mode-home__tokens",dataSource:e,renderItem:p=>me.default.createElement(fr.Coin,{name:p?.name,symbol:p?.symbol,to:`${so}?${Ss.default.stringify({address:p?.address})}`,balance:p.balance||"0",market:!1})})),me.default.createElement("div",{className:`${r?Fo.showButton:""} ${Fo.button}`,style:{bottom:c,paddingBottom:m}},me.default.createElement(As.Link,{to:ft},me.default.createElement(L,{circle:!0,type:L.TYPE.primary,category:L.CATEGORY.outline},me.default.createElement(F,{className:(0,Ps.default)("okx-wallet-plugin-edit-wallet",Fo.editIcon)}),l("developer_mode_home_maintitle_managecpt")))))};n();s();var Se=a(_()),Ls=a(w()),Bs=a(W()),Fs=a(_r());n();s();var Os=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"developer_mode_home_btn_faucet",icon:"okx-wallet-plugin-faucet-1",type:"FAUCET",disabledText:"extension_wallet_home_tooltip_no_faucet"},{text:"developer_mode_home_btn_t_tradinghistory",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var Ms=()=>{let e=(0,Ls.useSelector)(ht),t=bt(),o=(0,Bs.useHistory)(),r=ue(),{extensionConfig:i}=D("rpc_info"),m=(0,Se.useMemo)(()=>r.filter(({balance:I})=>!!Number(I)),[r]),c=(0,Se.useCallback)(()=>{m.length===1?o.push(`${pe}?${Fs.default.stringify({address:m[0]?.address})}`):o.push(ut)},[m]),p=(0,Se.useCallback)(()=>{e?t():o.push(no)},[e]),d=()=>{o.push(Tt)},f=(0,Se.useCallback)(()=>{i.faucetUrl&&globalThis.open(i.faucetUrl)},[i.faucetUrl]),{hasNewFeature:T}=qn(),g=()=>{Yr({button_name:"more",site:""})},h=()=>{o.push(Qr)},x=(0,Se.useCallback)(I=>{switch(I.type){case"SEND":c();break;case"RECEIVE":p();break;case"HISTORY":d();break;case"FAUCET":f();break;case"DAPP_CONNECT":h();break;case"MORE":g();break;default:break}},[h,f,d,p,c]),E=(0,Se.useMemo)(()=>Os.map(I=>I.type==="FAUCET"?{...I,disabled:!i?.faucetUrl}:I.type==="MORE"?{...I,hasNewFeature:T}:I),[T,i]);return{clickHandle:x,iconOptions:E}};n();s();var Ot=a(_()),Cr=a(w()),Hs=a(W()),Gs=a(j());v();n();s();var Ja=a(_()),Ra=a(w());n();s();var Xa=a(_()),ja=a(te());var Us="SHOW-SWITCH";var Ws=()=>{let e=ne(),t=(0,Hs.useHistory)(),o=ue(),{extensionConfig:r}=D("rpc_info"),i=de(),[m,c]=Ot.default.useState(!0),p=(0,Cr.useSelector)(ht),d=(0,Cr.useSelector)(tn);(0,Gs.useMount)(()=>{e.get("from")==="setting"&&(c(!1),t.replace({search:""}),Mr.listen(Us,()=>{c(!0)}))});let f=(0,Ot.useMemo)(()=>o.find(({address:T})=>!T)||{},[o]);return{rpcInfo:r,mainToken:f,chainTokens:o,walletAccount:d,ethereumAccount:i,isNotBackupWallet:p,switchVisible:m}};n();s();var zs={wrapper:"_wrapper_11hdl_1"};var Ks=()=>{let e=(0,Vs.useHistory)(),t=bt(),o=(0,Mo.useDispatch)(),{rpcInfo:r,chainTokens:i,isNotBackupWallet:m,mainToken:c,ethereumAccount:p}=Ws(),d=vt(),f=(0,k.useRef)(null),[T,g]=(0,k.useState)(0),[h,x]=(0,k.useState)(0),E=(0,k.useRef)(null),{unapprovedRequestCount:I,unapprovedTxCount:se,unapprovedPermissionsRequestId:q}=Cs(),V=$n();(0,k.useEffect)(()=>{m&&I!==0?t({text:l("wallet_dapp_conncetion_alert_backup_wallet")},q):se>0?e.push(Jr):I>0&&e.push(Xr)},[m,I]);let Ge=(0,Mo.useSelector)(rn);(0,k.useEffect)(()=>{(async()=>{I===0&&!Ge&&await o(kn())})()},[I]);let{isRpcMode:ee}=(0,Mo.useSelector)(ao);(0,k.useEffect)(()=>{ee||e.replace(Q)},[ee]);let rr=Wr()===Ur;(0,k.useEffect)(()=>{Ge&&rr&&globalThis.platform.openExtensionInPopup(pt)},[]);let No=uo(c.balance),{clickHandle:We,iconOptions:nr}=Ms(),{isNeedShowDisconnectUpgrade:rt,setDisconnectUpgrade:je}=Vn(),sr=(0,k.useCallback)(()=>{rt&&(to.success({title:l("wallet_extension_card_subtitle_disconnect_update")}),je())},[rt,je]),[ir,bo]=(0,k.useState)(_o.init),U=jn(),{run:ar}=(0,Ys.useDebounceFn)(()=>{x(E.current?.scrollTop||0)},{wait:50,maxWait:50}),wo=()=>{!r.rpcUrl||(bo(_o.loading),ks(r.rpcUrl).then(()=>{console.log("rpc success"),bo(_o.success)}).catch(()=>{console.log("rpc failed"),bo(_o.failed)}))};(0,k.useEffect)(()=>{wo()},[r]),(0,k.useLayoutEffect)(()=>{f.current&&m&&g(f.current?.clientHeight||0)},[m]);let{walletId:nt}=d,{chainId:Je,symbol:st}=r;return(0,k.useEffect)(()=>{c?.balance&&Je&&Kr({wallet_id:nt,main_coin_number_by_networks:[{chain_id:(0,$s.hexToDecimalString)(Je),main_token_symbol:st,main_token_amount:c?.balance}]})},[nt,c?.balance,Je,st]),k.default.createElement("div",{className:zs.wrapper,ref:E,onScroll:()=>{ar()}},k.default.createElement("div",null,k.default.createElement(Jn,{titleLeft:d?.keyringName,titleRight:d?.walletName,subTitle:G(p),address:p,chainName:r?.name}),k.default.createElement(Zn,{balance:No,symbol:c.symbol}),k.default.createElement(Qn,{clickHandle:We,iconOptions:nr}),k.default.createElement(Ds,{dataSource:i,scrollTop:h,backupHeight:m?T+24:0})),k.default.createElement(Yn,{disconnectCallback:sr}),k.default.createElement("div",{ref:f},k.default.createElement(zn,{offsetBottom:24})),k.default.createElement(Rn,{showBackup:()=>{}}),k.default.createElement(vs,{visible:ir===_o.failed,onRetry:wo,onChangeNet:()=>{e.push(`${jr}?tab=${U?.networkType??"1"}`)}}),V&&k.default.createElement(Kn,{actionMap:{["RECOVER"]:()=>{e.push(`${on}?action=${Sn.RECOVER}`)},["SWITCH_WALLET"]:()=>{e.push(`${Rr}?fromHome=1`)}}}))};n();s();var Rs=a(_());n();s();var Uo=a(_()),Zs=a(w()),Lt=a(j());Re();var qs=a(Ha());oe();var yr=class extends qs.default{constructor(){super();mr(this,"DROPPED_BUFFER_COUNT",3);mr(this,"droppedBlocksBufferByTxHash",new Map);this.confirmedTxs=[],this.web3=null}setWeb3(o){this.web3=o}setConfirmedTxs(o){this.confirmedTxs=o}async checkPendingTx(o,r,i){let m=[o,...o.txPool],c=0,p;(await Promise.allSettled(m.map(f=>this.checkOnePendingTx(f)))).forEach(f=>{if(f.status==="fulfilled"){let{value:T={}}=f;if(T.status==="dropped")c++;else if(T.status==="confirmed"){let{txId:g,transactionReceipt:h}=T;p={id:g,transactionReceipt:h}}}}),p?r(p,o.id):c===m.length&&i(o.id)}async checkOnePendingTx(o){let{id:r,txHash:i}=o;if(!i||o.status===b.DROPPED||this.checkIfNonceIsTaken(o))return{status:"dropped"};try{let m=await this.web3.eth.getTransactionReceipt(i);if(m?.blockNumber)return{status:"confirmed",txId:r,transactionReceipt:m}}catch(m){throw new Error(m)}return await this.checkIfTxWasDropped(o)?{status:"dropped"}:{}}checkIfNonceIsTaken(o){return this.confirmedTxs.some(r=>r.id!==o.id&&oo(ae(r.txParams.nonce),ae(o.txParams.nonce)))}async checkIfTxWasDropped(o){let{id:r,txHash:i,txParams:{nonce:m,from:c}}=o,p=`${r}-${i}`,d;try{d=await this.web3.eth.getTransactionCount(c)}catch{return!1}if(it(d)||Ao(ae(m),d))return!1;this.droppedBlocksBufferByTxHash.has(p)||this.droppedBlocksBufferByTxHash.set(p,0);let f=this.droppedBlocksBufferByTxHash.get(p);return f<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByTxHash.set(p,f+1),!1):(this.droppedBlocksBufferByTxHash.delete(p),!0)}};function Qs(){let e=Nt(),t=ds(),o=(0,Zs.useSelector)(xt),r=(0,Lt.useLatest)(de()),i=(0,Lt.useLatest)(Pe()),m=(0,Lt.useLatest)(as()),c=(0,Uo.useRef)(!1),p=(0,Uo.useRef)(new yr),d=async(g,h,x)=>{let E=await is({txId:g,replaceTxId:h,tx:x});t(E)},f=g=>{d(g,null,{status:b.DROPPED,finishTime:+new Date})},T=({id:g,transactionReceipt:h},x)=>{let E={blockNumber:h.blockNumber,gasUsed:h.gasUsed,finishTime:+new Date,extraParams:{contractAddress:h.contractAddress}};h.status?E.status=b.SUCCEED:E.status=b.FAILED,d(x,g,E)};(0,Uo.useEffect)(()=>{(async()=>{if(!(i.current.length===0||c.current)){c.current=!0;try{let h=await e();p.current.setWeb3(h),p.current.setConfirmedTxs(m.current);let x=null;try{x=await h.eth.getTransactionCount(r.current,"latest")}catch{}await Promise.all(i.current.map(E=>x!==null&&Ao(ae(E.txParams.nonce),x)?null:p.current.checkPendingTx(E,T,f)))}finally{c.current=!1}}})()},[o,e])}n();s();Re();var ho=a(_()),Bt=a(w()),Xs=a(j()),js=a(Wa());var em=3*60*1e3,om={mainTokens:[],chainTokens:[]},Js=()=>{let e=(0,Bt.useDispatch)(),t=(0,ho.useRef)(null),o=Nn(),r=(0,ho.useRef)(om),i=wn(),{isRpcMode:m}=(0,Bt.useSelector)(ao);(0,ho.useEffect)(()=>{let{chainId:d,chainTokens:f}=i,T=Lr(Fr(f,"address"),({address:g})=>g||"");r.current={chainId:d,tokenAddresses:T}},[i]);let c=()=>{clearInterval(t.current),t.current=null},p=async()=>{try{let{chainId:d,tokenAddresses:f}=r.current;f.length&&(await o(d,f))?.forEach(({price:g="0",address:h})=>{e(mn({chainId:d,address:h,price:g}))})}catch(d){js.default.debug(`fetch coin price failed 
${d}`)}};(0,Xs.useMount)(()=>{p()}),(0,ho.useEffect)(()=>(m?t.current=setInterval(()=>{p()},em):c(),()=>{c()}),[m])};var tm=()=>(es(),ys(),Js(),Qs(),Is(),null),ei=(0,Rs.memo)(tm);n();s();var Ft=a(_()),oi=a(W());var rm=()=>{let e=(0,oi.useHistory)(),t=ne(),o=t.get("showClose"),r=t.get("address"),{extensionConfig:i}=D("rpc_info"),m=A(r),c=de(),p=`ethereum:${c}`;return Ft.default.createElement(Dn,{navigator:{bordered:!1,onClose:o?()=>{e.push(Q)}:null,closeable:!0},content:{symbol:m?.symbol,coinLogo:m?.icon,chainName:i?.name,walletAddress:c,aggregation:!1,QRCodeAddress:p}})},ti=(0,Ft.memo)(rm);n();s();var _e=a(_());var Ti=a(j());var gi=a(w());n();s();var ri=a(_());var ni=a(W()),Ho=a(w());var nm=()=>{let e=(0,ni.useHistory)(),t=(0,Ho.useDispatch)(),r=ne().get("showClose"),i=(0,Ho.useSelector)(Et),m=(0,Ho.useSelector)(X),c=A(m),p=()=>{setTimeout(()=>{t(It())},200)},d=()=>{p(),e.goBack()},f=r?()=>{p(),e.push(i||Q)}:null;return ri.default.createElement(z,{title:c?.symbol,icon:{text:c?.symbol},onBack:d,onClose:f})},si=nm;n();s();var Ke=a(_()),Go=a(w());v();function sm(){let e=(0,Go.useDispatch)(),t=(0,Go.useSelector)(Ce),o=(0,Go.useSelector)(Ct),r=(0,Ke.useRef)(null),i=c=>{let{value:p}=c.target,d=null;p?p&&!fo(p,{allowNonPrefixed:!1})&&(d={key:"wallet_manage_crypto_errortip_invalid_address_tips"}):d={key:"wallet_transfer_errortip_receive_address_empty"},e(_n(p)),e(Tn(d))};(0,Ke.useLayoutEffect)(()=>{r.current.focus()},[]);let m=l("wallet_extension_transaction_placeholder_input_address");return Ke.default.createElement(we.Row,null,Ke.default.createElement(S.TextArea,{onRef:c=>{r.current=c},value:t,label:l("wallet_extension_transaction_input_label_to"),placeholder:m,size:S.SIZE.xl,autoResize:!0,errorType:S.TIP_TYPE.always,error:o&&l(o.key,o.args),onChange:i}))}var ii=sm;n();s();var fe=a(_()),De=a(w()),Ut=a(j());v();oe();n();s();var Mt={"max-button":"_max-button_zd8rw_1",maxButton:"_max-button_zd8rw_1",balance:"_balance_zd8rw_14","balance-wrap":"_balance-wrap_zd8rw_18",balanceWrap:"_balance-wrap_zd8rw_18"};function im(){let e=(0,De.useDispatch)(),t=(0,De.useSelector)(X),o=A(),r=A(t),i=o?.balance,m=Lo(),c=!t,{run:p,cancel:d}=(0,Ut.useThrottleFn)(f=>{let T=null,g=ze(i,m);at(g,0)?T={key:"wallet_transfer_errortip_mainchain_coin_insufficient",args:{chainSymbol:o?.symbol}}:Ve(f,c?g:r?.balance)&&(T={key:"wallet_transfer_errortip_insufficient_balance"}),e(hn(T))},{wait:100});return(0,Ut.useUnmount)(d),p}function am(){let e=(0,De.useDispatch)(),t=A(),o=(0,De.useSelector)(X),r=(0,De.useSelector)(mo),i=(0,De.useSelector)(yt),m=A(o),c=m?.balance,p=go(c,{symbol:m?.symbol,decimals:m?.decimals}),d=im(),f=Lo(),T=(0,fe.useRef)(!!r),g=x=>{T.current=!0,e(gn(x))},h=()=>{if(o)g(c);else{let x=ze(c,f);g(mt(x,0)?"0":x)}};return(0,fe.useEffect)(()=>{T.current&&d(r)},[r,f,t?.balance]),fe.default.createElement(we.Row,null,fe.default.createElement(S.Number,{placeholder:M.showFloorTruncation(0,6,{needZero:!0}),title:l("wallet_extension_send_subtitle_amount"),size:S.SIZE.xl,enableMinus:!1,precision:m?.decimals,value:r,error:i&&l(i.key,i.args),errorType:S.TIP_TYPE.always,onChange:g,action:fe.default.createElement(ye.Text,{size:ye.SIZE.xs,type:ye.TYPE.secondary,className:Mt["balance-wrap"],onClick:h},`${l("wallet_extension_send_text_balance")}:`,fe.default.createElement(ye.Text,{inherit:!0,ellipsis:{tooltip:!0},className:Mt.balance},p)),suffix:fe.default.createElement(ye.Text,{className:Mt["max-button"],onClick:h},l("wallet_extension_send_text_max"))}))}var ai=am;n();s();var Oe=a(_()),ke=a(w()),mi=a(Va());Re();v();oe();n();s();function mm(){let e=(0,ke.useDispatch)(),t=(0,ke.useSelector)(X),o=A(t),r=(0,ke.useSelector)(Ce),i=(0,ke.useSelector)(mo);(0,Oe.useEffect)(()=>{if(t&&fo(r)&&o?.decimals){let m=!i||Br(Number(i));e(ur(Hn(r,m?"0":(0,mi.addHexPrefix)(cn($(i,10**o?.decimals))))))}},[t,o?.decimals,r,i])}function lm(){let e=(0,ke.useDispatch)(),o=!(0,ke.useSelector)(X),r=(0,ke.useSelector)(dn);return mm(),o?Oe.default.createElement(we.Row,null,Oe.default.createElement(S,{title:Oe.default.createElement("div",{className:"rpc-evm-send-edit-input-data__title"},l("developer_mode_send_maintitle_gasprice"),Oe.default.createElement(xe,{title:l("developer_mode_send_tooltip_additional_data"),placement:xe.DIRECTION.topRight},Oe.default.createElement(F,{className:"okx-wallet-plugin-information-circle rpc-evm-send-edit-input-data__info-icon"}))),placeholder:l("developer_mode_select_a_token_input_optional"),errorType:S.TIP_TYPE.always,size:S.SIZE.xl,value:r,onChange:i=>{e(ur(i.target.value))}})):null}var li=lm;n();s();var xo=a(_()),Wo=a(w()),ci=a(te());Re();v();oe();n();s();function cm(){let e=(0,Wo.useDispatch)(),t=(0,Wo.useSelector)(lo),o=(0,Wo.useSelector)(co),r=p=>{e(xn(p))},i;t&&(Ve(t,o)?i=l("developer_mode_send_tooltip_higher",{num:o}):at(t,o)&&(i=l("developer_mode_send_tooltip_lower",{num:o})));let m=l("developer_mode_send_maintitle_nonce1"),c=`${it(o)?"":M.thousandFormat(o)}`;return xo.default.createElement(we.Row,{className:"rpc-evm-send-edit-nonce",noMargin:!0},xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__inner"},xo.default.createElement(S.Number,{innerClassName:(0,ci.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,precision:0,title:m,placeholder:c,size:S.SIZE.xl,value:t,onAdd:()=>!t&&o!==null?(r(Gr(o,1)),!1):!0,onSub:()=>!t&&Ve(o,0)?(r(ze(o-1)),!1):!0,onChange:r})),i&&xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__warning-text"},xo.default.createElement(F,{className:"okx-wallet-plugin-warning-circle rpc-evm-send-edit-nonce__warning-icon"}),i))}var pi=cm;n();s();var di=a(_()),ui=a(W());v();var zo=a(w());function pm(){let e=(0,zo.useSelector)(Ce),t=(0,zo.useSelector)(Ct),o=(0,zo.useSelector)(yt);return!e||!!t||!!o}function dm({loading:e}){let t=(0,ui.useHistory)(),o=(0,zo.useSelector)(X),r=pm(),i=()=>{let m=dt;o&&(m+=`?address=${o}`),t.push(m)};return di.default.createElement(L,{category:L.CATEGORY.fill,type:L.TYPE.highlight,size:L.SIZE.lg,loading:e,block:!0,disabled:r,onClick:i},l("wallet_extension_send_btn_next"))}var fi=dm;n();s();var _i={"rpc-evm-send-edit__inner":"_rpc-evm-send-edit__inner_3qvkv_1",rpcEvmSendEditInner:"_rpc-evm-send-edit__inner_3qvkv_1"};function um(){let e=(0,gi.useDispatch)(),t=ne(),{chainGasLimitLoading:o}=St();return Dt(),(0,Ti.useMount)(()=>{e(fn(t.get("address")))}),_e.default.createElement(Do.Container,null,_e.default.createElement(si,null),_e.default.createElement(Do.Box,{className:_i["rpc-evm-send-edit__inner"]},_e.default.createElement(ii,null),_e.default.createElement(ai,null),_e.default.createElement(li,null),_e.default.createElement(pi,null)),_e.default.createElement(be.FooterActions,{usePortal:!0},_e.default.createElement(fi,{loading:o})))}var hi=um;n();s();var P=a(_()),O=a(w()),xi=a(W()),Ht=a(j());Re();v();Ua();function fm({requestNonce:e}){let t=(0,O.useDispatch)(),[o,r]=(0,P.useState)(!1),i=(0,O.useSelector)(lo),m=(0,O.useSelector)(co);return{loading:o,onChecker:(0,Ht.useMemoizedFn)(()=>{let c=[];return i===""&&m===null&&c.push(e().then(({suggestedNonce:p})=>{t(yn(p))})),c.length===0?Promise.resolve():(r(!0),Promise.all(c).finally(()=>{setTimeout(()=>{r(!1)})}))})}}function _m(){let e=(0,O.useSelector)(dr),t=(0,O.useSelector)(X),o=!t,r=de(),i=(0,O.useSelector)(Ce),m=(0,O.useSelector)(pr),c=(0,O.useSelector)(pn),p=(0,O.useSelector)(lo),d=(0,O.useSelector)(co),{extensionConfig:f}=D("rpc_info"),T={from:r,to:o?i:t,value:o?c:"0x0",data:m},[g,h]=Ts(T),x=gs({data:T.data,type:g}),[E,I]=hs(T.to),se=uo(x?.amount||0,{decimals:E?.decimals||6});return{txMeta:xs({tx:T,customGasInfo:e,nonce:p||d,txData:x,tokenInfo:E,chain:f,approvedAmount:se,formattedAmount:se,txType:g}),loadingTxData:h||I}}var Tm=()=>{let e=(0,xi.useHistory)(),t=(0,O.useDispatch)(),o=(0,O.useSelector)(Et),r=(0,O.useSelector)(X),i=A(r),m=A(),c=(0,O.useSelector)(mo),p=Pn(),d=vt(p),f=(0,O.useSelector)(Ce),T=Lo(),g=(0,O.useSelector)(lo),h=(0,O.useSelector)(co),x=(0,O.useSelector)(pr),{extensionConfig:E}=D("rpc_info"),I=us(),se=Gn(p),[q,V]=(0,P.useState)(!1),[Ge,ee]=(0,P.useState)(!1),{request:rr}=Dt(),{chainGasLoading:No,chainGasLoadFailed:We,stopPollingGasPrice:nr,chainGasLimitLoadFailed:rt}=St(),je=(0,O.useSelector)(dr),sr=(0,O.useSelector)(un),{loading:ir,onChecker:bo}=fm({requestNonce:rr}),{txMeta:U,loadingTxData:ar}=_m();(0,Ht.useMount)(()=>{if(!f){let ce=pe;r&&(ce+=`?address=${r}`),e.replace(ce)}});let wo=(0,P.useMemo)(()=>[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(U.type)?!1:U.type===N.TRANS_OUT?U.extraParams?.value:c,[c,U]),nt=(0,P.useMemo)(()=>U.type===N.TRANS_OUT?U.extraParams?.coinSymbol:[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(U.type)?l(Ye[U.type],{symbol:U.extraParams?.coinSymbol}):l(Ye[U.type]),[U]),Je=()=>{setTimeout(()=>{t(It())},200),e.push(o||Q)},st=ce=>{t(En(ce)),V(!1)},Sr=async()=>{try{ee(!0),await bo(),await I(U,void 0,ce=>{let Fa=sn[d?.keyringIdentityType];Zr({tx_source:"transfer",from_addr:ce?.txParams?.from,to_addr:f,main_token_symbol:E?.symbol,token_symbol:ce?.extraParams?.coinSymbol||"",contract_address:r||"",volume_token:c,volume_usdt:"",tx_hash_unique:ce?.txHash,wallet_type:Fa,chain_id:parseInt(E?.chainId,16)})}),Je()}catch(ce){Dr(ce)}finally{ee(!1)}},Ba=(0,P.useMemo)(()=>We?{type:xr.TIP_TYPE.FEE_ERROR}:je?.baseFeePerGas==="0"?{type:zr.TYPE.warn,message:l("wallet_extension_transaction_error_base_zero")}:null,[We,je?.baseFeePerGas]);return P.default.createElement(Do.Container,null,P.default.createElement(z,{icon:U.type===N.TRANS_OUT&&{text:U.extraParams?.coinSymbol},title:nt,onClose:Je}),wo&&P.default.createElement(Oo,null,P.default.createElement(Un,{summaryList:[{useMinPrecision:!1,coinAmount:wo,injectCoin:i,displayEstimate:!1}],title:l("wallet_extension_send_colored_send")})),P.default.createElement(Oo,null,P.default.createElement(hr,{localType:Hr,title:l("extension_send_mid_text_from"),walletId:p,onCopyCallback:()=>{se({trade:"send",all_confirmation:"wallet_used_address"})}}),P.default.createElement(hr,{address:f,title:l("extension_send_mid_text_to"),onCopyCallback:()=>{se({trade:"send",all_confirmation:"to_address"})}})),P.default.createElement(Oo,null,P.default.createElement(Mn,{onClick:()=>{V(!0)},injectCoin:m,estimateFailed:!!We,networkFee:No?void 0:M.mul(T,10**m?.decimals),loading:No})),P.default.createElement(Oo,{bordered:!1},P.default.createElement(Fn,{title:l("developer_mode_send_maintitle_nonce1")},P.default.createElement(ye.Text,{size:ye.SIZE.sm},g||h)),!!x&&P.default.createElement(Wn,{copyable:!0,defaultExpanded:!0,data:x})),P.default.createElement(be,{placeholder:!0,offsetBottom:0},P.default.createElement(xr,{...Ba}),P.default.createElement(Tr,{buttonGroup:[{disabled:!!We,onClick:Sr,actionType:Tr.ACTION_TYPE.CONFIRM,loading:(ir||ar||Ge||No)&&!We}]})),q&&P.default.createElement(Es,{onBack:()=>V(!1),rpcInfo:E,chainGasInfo:sr,customGasInfo:je,stopPollingGasPrice:nr,updateCustomGasInfo:st,chainGasLimitLoadFailed:rt}))},Ci=Tm;n();s();var Fe=a(_());v();var $i=a(j()),Yi=a(w());n();s();var yi=a(_()),Gt=a(w());v();var Ei=a(j());function gm(){let e=(0,Gt.useDispatch)(),t=(0,Gt.useSelector)(re),o=Pe(),r=[{text:l("wallet_extension_history_option_pending",{num:o.length}),value:po.PENDING},{text:l("wallet_extension_history_tab_completed"),value:po.COMPLETE}];return(0,Ei.useMount)(()=>{o.length===0&&e(So({status:po.COMPLETE}))}),yi.default.createElement(y.FilterTabs,{tabs:r,value:t.status,onSelect:i=>{e(So({status:i}))}})}var Ii=gm;n();s();var Vo=a(_()),zt=a(w()),ki=a(te());v();Ya();n();s();var Wt={"retina-border-basic":"_retina-border-basic_2pibg_1",retinaBorderBasic:"_retina-border-basic_2pibg_1",root:"_root_2pibg_29",resetNonceIcon:"_resetNonceIcon_2pibg_99",disabledResetNonceIcon:"_disabledResetNonceIcon_2pibg_103"};function hm(){let e=(0,zt.useDispatch)(),t=(0,zt.useSelector)(re),o=Pe(),r=()=>{o.length!==0&&ct.warn({alignBottom:!1,title:l("extension_wallet_advanced_title_clear_confirm"),text:l("extension_wallet_advanced_subtitle_clear_confirm"),cancelText:l("wallet_extension_btn_general_cancel"),confirmText:l("wallet_extension_btn_general_confirm"),onConfirm:async()=>{await qr().rpcEvmClearPendingTransaction(),$r.success({title:l("extension_wallet_advanced_notification_cleared")})}})};return Vo.default.createElement("div",{className:Wt.root},Vo.default.createElement(y.DateRangeSelection,{dates:t.dates,onChange:(i,m)=>{e(So({dates:m}))}}),Vo.default.createElement(xe,{title:l("wallet_extension_settings_tooltips_reset_nonce"),placement:xe.DIRECTION.bottomRight},Vo.default.createElement(F,{className:(0,ki.default)("okx-wallet-plugin-brush-20",Wt.resetNonceIcon,{[Wt.disabledResetNonceIcon]:o.length===0}),onClick:r})))}var vi=hm;n();s();var Be=a(_()),zi=a(w());n();s();n();s();var Qe=a(_());v();n();s();var Te=a(_());v();n();s();n();s();var $t=a(_());oe();n();s();oe();var Vt=e=>{if(!e?.txParams)return{};let{gasPrice:t,maxFeePerGas:o,maxPriorityFeePerGas:r,gasLimit:i,type:m}=e.txParams,c={gasLimit:i};return m===ro.FEE_MARKET?(c.maxFeePerGas=lt($(o,1.2),0),c.maxPriorityFeePerGas=lt($(r,1.2),0)):c.gasPrice=lt($(t,1.2),0),c};function xm({txId:e,onClose:t}){let o=Pt(e),r=fs(),[i,m]=(0,$t.useState)(!1),c=Vt(o),p=async()=>{if(i)return;m(!0);let V=await At(o.id);if(!V||V.status!==b.PENDING){m(!1),t();return}r(o,c).catch(Ge=>{console.log(Ge)}).finally(()=>{m(!1),t()})},{gasPrice:d,maxFeePerGas:f,gasLimit:T,type:g}=o?.txParams||{},h="",x="";g===ro.FEE_MARKET?(h=f,x=c.maxFeePerGas):(h=d,x=c.gasPrice);let E=Bo(ie($(h,T))),I=`=Gas Price(${$e(h)})`,se=Bo(ie($(x,c.gasLimit))),q=`=Gas Price(${$e(x)})`;return $t.default.createElement(y.EthereumTxSpeedDialogBase,{visible:!!o,onConfirm:p,loading:i,onClose:t,oldGasFeeDisplay:E,oldGasDetailDisplay:I,newGasFeeDisplay:se,newGasDetailDisplay:q})}var $o=xm;n();s();var Yt=a(_());oe();function Cm({txId:e,onClose:t}){let o=Pt(e),r=_s(),i=A(),[m,c]=(0,Yt.useState)(!1),p=Vt(o),d=async()=>{if(m)return;if(c(!0),(await At(o.id)).status!==b.PENDING){c(!1),t();return}r(o,p).catch(E=>{console.log(E)}).finally(()=>{t(),c(!1)})},{type:f}=o?.txParams||{},T="";f===ro.FEE_MARKET?T=p.maxFeePerGas:T=p.gasPrice;let g=Bo(ie($(T,p.gasLimit))),h=`Gas Price (${$e(T)} GWEI) *Gas Limit(${p.gasLimit}) `;return Yt.default.createElement(y.EthereumTxCancelDialogBase,{visible:!!o,onConfirm:d,loading:m,onClose:t,chainSymbol:i?.symbol,newGasFeeDisplay:g,newGasDetailDisplay:h})}var Yo=Cm;n();s();var ve=a(_());n();s();var Ze=a(_()),wi=a(w());v();n();s();var Ko=a(_());v();var Ni=({onClick:e,children:t})=>Ko.default.createElement(L,{className:"rpc-evm-tx-actions__button",category:L.CATEGORY.outline,type:L.TYPE.primary,size:L.SIZE.xs,onClick:o=>{o.stopPropagation(),e&&e(o)}},t);function ym({tx:e,onCancel:t,onSpeed:o}){let{isShowPending:r,isCanceling:i}=e,m=i?l("wallet_extension_history_list_status_btn_speed_up_cancellation"):l("wallet_extension_history_list_status_btn_cancel_transaction");return r?Ko.default.createElement("div",{className:"rpc-evm-tx-actions"},Ko.default.createElement(Ni,{onClick:t},m),!i&&Ko.default.createElement(Ni,{onClick:o},l("wallet_extension_history_list_status_btn_speed_up"))):null}var bi=ym;n();s();v();$a();oe();function Kt({type:e,extraParams:t}){let o=Ye[e],r,i=l(o);return e===N.TRANS_OUT?r="okx-wallet-plugin-pointer-up":e===N.AUTHORIZATION||e===N.CANCEL_AUTHORIZATION?(r="okx-wallet-plugin-lock-1",i=l(o,{symbol:t?.coinSymbol})):e===N.CONTRACT_CALL?r="okx-wallet-plugin-report-centre":e===N.CONTRACT_DEPLOY&&(r="okx-wallet-plugin-futures-20"),{icons:[r],title:i}}function Zt({type:e,txParams:t,extraParams:o}){let{extensionConfig:r}=D("rpc_info");if(e===N.TRANS_OUT){let c=o?.value;return c&&(c=M.thousandFormat(c)),[{direction:cr.OUT,coinAmount:`${c||""} ${o?.coinSymbol||""}`}]}let{value:i}=t||{},m=ae(i);return Ve(m,0)?[{direction:cr.OUT,coinAmount:`${M.thousandFormat(ie(m))} ${r.symbol||""}`}]:[]}function qt(e){let t;return e.type===N.TRANS_OUT?t=`${l("wallet_extension_history_list_send_to")}   ${G(e.extraParams.toAddress)}`:e.type===N.AUTHORIZATION||e.type===N.CANCEL_AUTHORIZATION?t=G(e.extraParams?.approvedAddress):t=G(e.txParams.to),t}function Em({isShowPending:e,isSpeeding:t,isCanceling:o}){let r="",i="";return e?(r=Po.PENDING,t?i=l("wallet_extension_send_status_speedingup"):o?i=l("wallet_extension_send_status_canceling"):i=l("wallet_extension_history_list_status_pending")):(r=Po.WAITING,i=l("wallet_extension_history_list_status_waiting")),{labelType:r,labelText:i}}function Im(e){let t=qt(e),o=(0,wi.useSelector)(io),r=[t],i=eo(e.sendTime,{format:"yyyyMMddHHmmss",locale:o});return r.push(i),r}function km({tx:e,onClick:t,onCancel:o,onSpeed:r}){let{icons:i,title:m}=Kt(e),{labelType:c,labelText:p}=Em(e),d=Zt(e),f=Im(e),T=wt(f,d),g=Ze.default.createElement(y.Label,{className:"tx-history-ml4",type:c,text:p});return Ze.default.createElement(y.ItemContainer,{onClick:h=>{t&&t(e,h)}},Ze.default.createElement(y.Row,{assets:d,align:T},Ze.default.createElement(y.Info,{icons:i,title:m,label:g,details:f}),Ze.default.createElement(y.Assets,{assets:d})),Ze.default.createElement(bi,{tx:e,onCancel:o,onSpeed:r}))}var Zo=km;function vm({txs:e,onClick:t}){let[o,r]=(0,ve.useState)(null),[i,m]=(0,ve.useState)(null);return ve.default.createElement(ve.default.Fragment,null,e.map(c=>ve.default.createElement(Zo,{key:c.id,tx:c,onClick:t,onSpeed:()=>{r(c.id)},onCancel:()=>{m(c.id)}})),ve.default.createElement($o,{txId:o,onClose:()=>{r(null)}}),ve.default.createElement(Yo,{txId:i,onClose:()=>{m(null)}}))}var qo=vm;n();s();var qe=a(_());v();var Er=a(w());function Nm({txs:e,onClick:t}){let o=(0,Er.useSelector)(io),{dates:r}=(0,Er.useSelector)(re),i=(0,qe.useMemo)(()=>{let m=e.map(T=>({...T,groupDate:eo(T.sortTime,{format:"yyyyMMdd",locale:o})})),c=[],p=0,d,f;return m.forEach(T=>{let{groupDate:g}=T;d!==g&&(d=g,f=[],c[p++]={date:d,list:f}),f.push(T)}),c},[e,r]);return qe.default.createElement(y.List,null,i.map(({date:m,list:c},p)=>qe.default.createElement("div",{key:p},qe.default.createElement(y.Date,null,m),c.map(d=>qe.default.createElement(d.Comp,{key:d.id,tx:d,onClick:t})))))}var Qo=Nm;n();s();var Co=a(_());v();function bm({status:e}){let t="",o="";return(e===b.FAILED||e===b.DROPPED)&&(t=Po.FAILED,o=l("wallet_extension_history_status_failed")),{labelText:o,labelType:t}}function wm(e){return[qt(e)]}function Am({tx:e,onClick:t}){let{icons:o,title:r}=Kt(e),i=Zt(e),m=wm(e),c=wt(m,i),{labelType:p,labelText:d}=bm(e),f=Co.default.createElement(y.Label,{className:"tx-history-ml4",type:p,text:d});return Co.default.createElement(y.ItemContainer,{onClick:T=>{t&&t(e,T)}},Co.default.createElement(y.Row,{assets:i,align:c},Co.default.createElement(y.Info,{icons:o,title:r,label:f,details:m}),Co.default.createElement(y.Assets,{assets:i})))}var Xo=Am;function Pm({tx:e}){let t=ps(),{status:o,isShowPending:r,isCanceling:i}=e,[m,c]=(0,Te.useState)(!1),[p,d]=(0,Te.useState)(!1);return Te.default.createElement(Te.default.Fragment,null,(o===b.SUCCEED||o===b.FAILED)&&Te.default.createElement(rs,{url:t(e.txHash),text:l("wallet_extension_mid_link_explorer")}),r&&o===b.PENDING&&Te.default.createElement(ns,{isShowCancel:!i,isShowSpeedUp:!i,isShowSpeedupCancel:i,onCancel:()=>{c(!0)},onSpeedUp:()=>{d(!0)}}),p&&Te.default.createElement($o,{txId:e?.id,onClose:()=>{d(!1)}}),m&&Te.default.createElement(Yo,{txId:e?.id,onClose:()=>{c(!1)}}))}var Ai=Pm;n();s();var Le=a(_());v();n();s();var Ir=a(_()),kr=a(te());n();s();var Sm={lightBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},deepBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},lightGray:{background:"var(var(--okd-color-content-contrast))",color:"var(--okx-wallet-color-white)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--okx-wallet-color-white)"},black:{background:"var(--okx-wallet-color-black)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(var(--okd-color-content-tertiary))",color:"var(--okx-wallet-color-white)"}},Dm={larger:{size:56,fontSize:30},large:{size:32,fontSize:20},normal:{size:24,fontSize:14},small:{size:20,fontSize:12}};function Om({icon:e,className:t,text:o,size:r="normal",fontSize:i,theme:m,color:c,background:p}){if(!o)return null;let d=o[0].toUpperCase(),f,T,g;if(m){let I=Sm[m];f=I?.color,T=I?.background,g=I?.border}let h,x;if(typeof r=="string"){let I=Dm[r];h=I?.size,x=I?.fontSize}else h=r.size;let E={width:`${h}px`,height:`${h}px`};return e?Ir.default.createElement("img",{alt:"icon",src:e,style:E,className:(0,kr.default)("capitalize-letter",t)}):(E={...E,fontSize:`${i||x}px`,color:c||f,background:p||T,border:g},Ir.default.createElement("div",{style:E,className:(0,kr.default)("capitalize-letter",t)},d))}var Y=Om;oe();n();s();var J=a(_()),Qt=a(te()),Pi=a(za());v();n();s();function Lm({className:e,label:t,children:o}){return J.default.createElement("div",{className:(0,Qt.default)("rpc-evm-coin-flow__label",e)},J.default.createElement("div",{className:"rpc-evm-coin-flow__label-text"},t),J.default.createElement("div",null,o))}function Bm({isNFT:e,icon:t,title:o,address:r}){let i=typeof t=="string"?J.default.createElement(Bn,{className:(0,Qt.default)({"rpc-evm-coin-flow__record-icon-nft":e}),src:t,alt:""}):t;return J.default.createElement("div",{className:"rpc-evm-coin-flow__record"},J.default.createElement("div",{className:"rpc-evm-coin-flow__record-icon"},i),J.default.createElement("div",{className:"rpc-evm-coin-flow__record-right"},J.default.createElement("div",{className:"rpc-evm-coin-flow__record-title"},o),r&&J.default.createElement(Ae,{className:"rpc-evm-coin-flow__record-address",label:G(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})))}function vr({data:e}){if(e=(e||[]).filter(Boolean),e.length===0)return null;let t=e.length===1,o=r=>{if(!r)return null;let{items:i,label:m,...c}=r;return J.default.createElement(Lm,{...c,label:m,key:r},i.map((p,d)=>J.default.createElement(Bm,{...p,key:d})))};return J.default.createElement("div",{className:(0,Qt.default)("rpc-evm-coin-flow",{"rpc-evm-coin-flow__hidden-label":t})},e.map(o))}var Si=vr;vr.propTypes={data:Pi.default.array};vr.defaultProps={data:[]};var{TRANS_OUT:Di,CONTRACT_CALL:Oi,AUTHORIZATION:Xt,CANCEL_AUTHORIZATION:jt,CONTRACT_DEPLOY:Li}=N,Fm={[Xt]:"wallet_extension_header_approval_title_approve",[jt]:"wallet_extension_header_approval_title_cancel_approval"},Mm={[Xt]:"wallet_extension_header_approval_title_for",[jt]:"wallet_extension_header_approval_title_for"},Um="/static/images/tx-history/default-protocol.svg";function Hm(e){let{type:t}=e,o=A("",!0);switch(t){case Di:{let{value:r,coinSymbol:i}=e.extraParams||{},m=`- ${M.thousandFormat(r)} ${i||l("wallet_extension_history_text_unknown_token")}`;return{items:[{icon:Le.default.createElement(Y,{icon:!i&&ln,text:i,size:"large",theme:"black"}),title:Le.default.createElement(gr,{maxWidth:"284px",text:m})}]}}case Oi:{let{value:r}=e.txParams||{},i=ae(r);if(oo(i,0))return null;let m=`- ${go(ie(i),{symbol:o.symbol,decimals:o?.decimals})}`;return{items:[{icon:Le.default.createElement(Y,{text:o.symbol,size:"large",theme:"black"}),title:Le.default.createElement(gr,{text:m,maxWidth:"284px"})}]}}case Xt:case jt:{let{coinSymbol:r}=e.extraParams||{};return r?{label:l(Fm[t]),items:[{icon:Le.default.createElement(Y,{text:r,size:"large",theme:"black"}),title:r}]}:null}case Li:default:return null}}function Gm(e){let{type:t,extraParams:o}=e;switch(t){case Xt:case jt:{let{approvedAddress:r}=o||{};return{label:l(Mm[t]),items:[{icon:Um,title:Le.default.createElement(Ae,{className:"rpc-mode-evm-tx-detail-flow__authorization",label:G(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})}]}}case Di:case Oi:case Li:default:return null}}function Wm({tx:e}){let t=Hm(e),o=Gm(e);return Le.default.createElement(Si,{data:[t,o]})}var Bi=Wm;n();s();var C=a(_()),Nr=a(w()),Fi=a(te());v();oe();function zm({status:e,isCanceling:t,isSpeeding:o,isShowPending:r}){let i,m="";return e===b.SUCCEED?(i=To.TxStatusInfoEnum.SUCCESS,m=l("wallet_extension_history_status_completed")):e===b.FAILED||e===b.DROPPED?(i=To.TxStatusInfoEnum.FAILED,m=l("wallet_extension_history_status_failed")):e===b.PENDING&&(r?(i=To.TxStatusInfoEnum.PENDING,t?m=l("wallet_extension_send_status_canceling"):o?m=l("wallet_extension_send_status_speedingup"):m=l("wallet_extension_history_list_status_pending")):(i=To.TxStatusInfoEnum.WAITING,m=l("wallet_extension_history_list_status_waiting"))),C.default.createElement(To,{label:l("wallet_extension_mid_text_status"),status:i,statusText:m})}function Vm({status:e,sendTime:t,finishTime:o}){let r=(0,Nr.useSelector)(io);return C.default.createElement(Ee,{label:l("wallet_extension_mid_text_time"),value:eo(e===b.PENDING?t:o,{format:"yyyyMMddHHmmss",locale:r})})}function $m({type:e,extraParams:t}){let{approvedAmount:o}=t||{};return e!==N.AUTHORIZATION?null:C.default.createElement(Ee,{label:l("wallet_extension_mid_text_approved_amount"),value:o>=10**13?l("wallet_extension_mid_text_unlimited"):M.thousandFormat(o||"0")})}function Ym({status:e,blockNumber:t}){let o=(0,Nr.useSelector)(xt),r=ze(o,t);return e===b.PENDING||e===b.DROPPED||mt(r,0)||Ao(r,14)?null:C.default.createElement(Ee,{label:l("wallet_extension_mid_text_block_confirmation"),value:r})}function Km(){let{extensionConfig:e}=D("rpc_info");return C.default.createElement(Ee,{label:l("wallet_extension_mid_text_network"),value:C.default.createElement(C.default.Fragment,null,C.default.createElement(Y,{className:"rpc-mode-evm-tx-detail-info__network-icon",icon:e.icon,text:e.name,size:"small",theme:"lightGray"}),e.name)})}function Zm({txParams:e}){let{from:t}=e;return C.default.createElement(Ee,{label:l("wallet_extension_mid_text_from"),value:C.default.createElement(Ae,{label:G(t),value:t,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function qm({status:e,type:t,extraParams:o,txParams:r}){let{toAddress:i,tokenAddress:m,contractAddress:c}=o||{},{to:p}=r,d,f;if(t===N.TRANS_OUT)d=l("wallet_extension_mid_text_to"),f=i;else if(t===N.CONTRACT_DEPLOY)if(e===b.SUCCEED)d=l("developer_mode_history_subtitle_developer"),f=c;else return null;else d=l("wallet_extension_mid_text_interaction_address"),t===N.AUTHORIZATION||t===N.CANCEL_AUTHORIZATION?f=m:f=p;return C.default.createElement(Ee,{label:d,value:C.default.createElement(Ae,{label:G(f),value:f,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function Qm({status:e,gasUsed:t,txParams:o}){let{extensionConfig:r}=D("rpc_info"),{gasLimit:i,maxFeePerGas:m,gasPrice:c}=o,p=On($,ie),d=c||m,f=go(p(d,t||i),{symbol:r?.symbol,decimals:r?.decimals});return C.default.createElement(ts,{label:l("wallet_extension_mid_text_network_fee"),value:f,tip:e===b.PENDING&&l("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:M.thousandFormat($e(d)),gasLimit:M.thousandFormat(i)})})}function Xm({txParams:e}){let{data:t}=e,[o,r]=(0,C.useState)(!1);return t?C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__inner"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__title",onClick:()=>{r(i=>!i)}},l("developer_mode_history_title_transaction_data"),C.default.createElement(F,{className:(0,Fi.default)("okx-wallet-plugin-arrow-small-down rpc-mode-evm-tx-detail-info-data__arrow",{"rpc-mode-evm-tx-detail-info-data__arrow--spread":o})})),o&&C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__data"},t))):null}function jm({tx:e}){let{txHash:t,txParams:{nonce:o}}=e;return C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info"},C.default.createElement(zm,{...e}),C.default.createElement(Vm,{...e}),C.default.createElement($m,{...e}),C.default.createElement(Ym,{...e}),C.default.createElement(Km,{...e}),C.default.createElement(Zm,{...e}),C.default.createElement(qm,{...e}),C.default.createElement(Qm,{...e}),C.default.createElement(Ee,{label:l("developer_mode_history_title_nonce"),value:ae(o)}),C.default.createElement(Ee,{label:l("wallet_extension_mid_text_transaction_hash"),value:C.default.createElement(Ae,{label:G(t),value:t,message:l("wallet_extension_popup_title_transaction_hash_copied")})}),C.default.createElement(Xm,{...e}))}var Mi=jm;var Jm=e=>{if(!e)return null;let{type:t,extraParams:o}=e,r=Ye[t];return t===N.AUTHORIZATION||t===N.CANCEL_AUTHORIZATION?l(r,{symbol:o?.coinSymbol||""}):l(r)};function Rm({txId:e,onBack:t}){let r=ls().find(({id:m})=>m===e),i=Jm(r);return Qe.default.createElement(ct.Action,{isFull:!0,titleCenter:!0,title:i,visible:!!e,onClose:t},Qe.default.createElement(ss,{message:r?.errorMessage}),!!r&&Qe.default.createElement("div",{className:"rpc-mode-tx-detail__content"},Qe.default.createElement(Bi,{tx:r}),Qe.default.createElement(Mi,{tx:r}),Qe.default.createElement(Ai,{tx:r})))}var jo=Rm;n();s();var br=a(_());function el({symbol:e}){return br.default.createElement("div",{className:"rpc-mode-evm-title-header__title"},br.default.createElement(Y,{className:"rpc-mode-evm-title-header__icon",text:e,theme:"black"}),e)}var wr=el;n();s();n();s();var Jt=a(_()),Ui=a(w());function ol({onClick:e}){let{dates:t}=(0,Ui.useSelector)(re),o=Pe({dates:t});return o.length===0?Jt.default.createElement(y.Empty,{top:72}):Jt.default.createElement(y.ListContainer,{style:{paddingTop:"8px"}},Jt.default.createElement(qo,{txs:o,onClick:e}))}var Hi=ol;n();s();var yo=a(_());var Gi=a(w());function tl({onClick:e}){let{dates:t}=(0,Gi.useSelector)(re),o=ms({dates:t}),r=(0,yo.useMemo)(()=>o.map(i=>({...i,sortTime:i.finishTime,Comp:Xo})),[o]);return r.length===0?yo.default.createElement(y.Empty,{top:72}):yo.default.createElement(y.ListContainer,null,yo.default.createElement(Qo,{txs:r,onClick:e}))}var Wi=tl;function rl(){let e=(0,zi.useSelector)(re),[t,o]=(0,Be.useState)(null),r=i=>{o(i.id)};return Be.default.createElement(Be.default.Fragment,null,e.status===po.PENDING?Be.default.createElement(Hi,{onClick:r}):Be.default.createElement(Wi,{onClick:r}),t&&Be.default.createElement(jo,{txId:t,onBack:()=>{o(null)}}))}var Vi=rl;n();s();function nl(){let e=(0,Yi.useDispatch)();return(0,$i.useUnmount)(()=>{e(In())}),Fe.default.createElement(y.PageContainer,{className:"rpc-evm-tx-history"},Fe.default.createElement(be,{className:"rpc-evm-tx-history__top",offsetTop:0},Fe.default.createElement(z,{sticky:!1,title:l("wallet_extension_header_text_history")}),Fe.default.createElement(Ii,null),Fe.default.createElement(vi,null)),Fe.default.createElement("div",{className:"rpc-evm-tx-history__bottom"},Fe.default.createElement(Vi,null)))}var Ki=nl;n();s();var Io=a(_());n();s();var Eo=a(_()),Zi=a(W());v();n();s();function Me(){return ne().get("address")}var sl=()=>{let e=(0,Zi.useHistory)(),t=Me(),o=A(t),r=()=>{e.push(Q)};return Eo.default.createElement(z,{title:Eo.default.createElement(wr,{symbol:o?.symbol}),onBack:r},t&&Eo.default.createElement(xe,{title:l("developer_mode_infor_tooltip_token_details"),placement:xe.DIRECTION.bottom},Eo.default.createElement(F,{className:"okds-information-circle rpc-mode-evm-coin-detail-header__info-icon",onClick:()=>{e.push(`${gt}?address=${t}`)}})))},qi=Eo.default.memo(sl);n();s();var ge=a(_());n();s();var Qi=a(_());function il({txs:e,onClick:t}){return e.length===0?null:Qi.default.createElement(qo,{txs:e,onClick:t})}var Xi=il;n();s();var Rt=a(_());function al({txs:e,onClick:t}){let o=(0,Rt.useMemo)(()=>e.map(r=>{let i,m;return r.status===b.PENDING?(i=r.sendTime,m=Zo):(i=r.finishTime,m=Xo),{...r,sortTime:i,Comp:m}}),[e]);return o.length===0?null:Rt.default.createElement(Qo,{txs:o,onClick:t})}var ji=al;function ml(){let e=Me(),t=cs({tokenAddress:e}),[o,r]=(0,ge.useState)(null),[i,m]=(0,ge.useMemo)(()=>{let p=[],d=[];return t.forEach(f=>{f.isShowPending?p.push(f):d.push(f)}),[p,d]},[t]),c=p=>{r(p.id)};return t.length===0?ge.default.createElement(y.Empty,null):ge.default.createElement("div",null,ge.default.createElement(Xi,{txs:i,onClick:c}),ge.default.createElement(ji,{txs:m,onClick:c}),ge.default.createElement(jo,{txId:o,onBack:()=>{r(null)}}))}var Ji=ml;n();s();var Ro=a(_()),ta=a(w());oe();n();s();var Jo=a(_()),Ri=a(w()),ea=a(W());v();oe();function ll(){let e=(0,ea.useHistory)(),t=(0,Ri.useDispatch)(),{extensionConfig:o}=D("rpc_info"),r=Me(),i=A(r),m=`${so}?address=${r||""}`,c=!r&&o?.faucetUrl;return Jo.default.createElement("div",{className:`rpc-evm-coin-detail-btns ${c?"with-faucet":"without-faucet"}`},Jo.default.createElement(kt.IconButtonWithLabel,{disabled:oo(i?.balance,0),icon:"okx-wallet-plugin-up",text:l("wallet_home_btn_send"),onClick:()=>{t(Cn(m));let p=`${pe}?showClose=1`;r&&(p+=`&address=${r}`),e.push(p)}}),Jo.default.createElement(kt.IconButtonWithLabel,{icon:"okx-wallet-plugin-down",text:l("wallet_home_btn_receive"),onClick:()=>{let p=r?`&address=${r}`:"";e.push(`${no}?showClose=1${p}`)}}),c&&Jo.default.createElement(kt.IconButtonWithLabel,{icon:"okx-wallet-plugin-faucet-1",text:l("developer_mode_home_btn_faucet"),href:o?.faucetUrl}))}var oa=ll;function cl(){let e=Me(),t=A(e),o=t?.balance||0,{symbol:r,usdToThisRate:i}=(0,ta.useSelector)(nn),m=$(t?.price,i);return{coinAmount:o,coinSymbol:t?.symbol,coinAmountDisplay:uo(o),currencyAmountDisplay:Ln({amount:o,rate:m,symbol:r},{useSign:!0,useFixed:!0})}}function pl(){let e=de(),{coinSymbol:t,coinAmountDisplay:o}=cl();return Ro.default.createElement(ws,null,Ro.default.createElement(bs,{coinSymbol:t,amountDisplay:o,currencyDisplay:null}),Ro.default.createElement(Ns,{address:e}),Ro.default.createElement(oa,null))}var ra=pl;n();s();function dl(){return Io.default.createElement("div",{className:"rpc-evm-coin-detail"},Io.default.createElement(qi,null),Io.default.createElement("div",{className:"rpc-evm-coin-detail__content"},Io.default.createElement(ra,null),Io.default.createElement(Ji,null)))}var na=dl;n();s();var le=a(_()),da=a(_r());v();var ua=a(W());n();s();var aa=a(_()),ma=a(te());n();s();var ko=a(_()),sa=a(te());var ia=({token:e,className:t,children:o,onClick:r})=>ko.default.createElement("div",{onClick:r,className:(0,sa.default)("rc-mode__token",t)},ko.default.createElement(Y,{fontSize:"18px",theme:"black",className:"rc-mode__token__icon",size:"large",text:e?.symbol}),ko.default.createElement("div",{className:"rc-mode__token__info"},ko.default.createElement("div",{className:"rc-mode__token__title"},e.symbol),ko.default.createElement("div",{className:"rc-mode__token__name"},e.name)),o);var la=({className:e,dataSource:t=[],renderItem:o,emptyText:r,component:i="div",...m})=>{let c=!t.length;return aa.default.createElement(i,{className:(0,ma.default)("rc-mode__tokens",e),...m},t.map(p=>o(p)),c&&r)};la.Item=ia;var Ue=la;n();s();var et=a(_()),ca=a(j());var pa=()=>{let e=ue(),[t,o]=et.default.useState(),r=(0,ca.useMemoizedFn)(({target:{value:c}})=>{o(c)},[]),i=(0,et.useMemo)(()=>e.filter(({balance:c})=>!!Number(c)),[e]);return[(0,et.useMemo)(()=>t?i.filter(({name:c,symbol:p})=>{let d=t?.toLowerCase();return c?.toLowerCase()?.includes(d)||p?.toLowerCase()?.includes(d)}):i,[t,i]),{onChange:r,value:t,showSearch:!!i.length}]};n();s();var fa=()=>{let[e,{showSearch:t,...o}]=pa();return le.default.createElement("div",{className:"rc-mode-select__token"},le.default.createElement(z,{title:l("developer_mode_send_title_selecta_token")}),t&&le.default.createElement(S.Search,{placeholder:l("developer_mode_send_input_selecta_token"),className:"rc-mode-select__token__search",...o}),le.default.createElement(Ue,{dataSource:e,renderItem:r=>le.default.createElement(ua.Link,{to:`${pe}?${da.default.stringify({showClose:1,address:r?.address})}`},le.default.createElement(Ue.Item,{token:r},le.default.createElement("div",{className:"rc-mode-select__token__balance"},le.default.createElement("div",{className:"rc-mode-select__token__amount"},M.thousandFormat(r.balance||0))))),emptyText:le.default.createElement(Vr.State,{className:"rc-mode-select__token__empty",title:t?l("developer_mode_send_toast_addnewtoken",{crypto:le.default.createElement("span",{className:"rc-mode-select__token__empty__title__special"},o.value)}):l("developer_mode_send_toast_nonetoken")})}))};n();s();var Xe=a(_()),Ca=a(W()),ya=a(j());v();n();s();n();s();var er=a(_()),ul=({children:e})=>er.default.createElement("div",{className:"token-detail-container"},e),_a=(0,er.memo)(ul);n();s();var He=a(_()),fl=({image:e,symbol:t,name:o})=>He.default.createElement("div",{className:"token-detail-intro"},He.default.createElement("div",{className:"token-detail-intro__image"},e),He.default.createElement("div",{className:"token-detail-intro__desc"},He.default.createElement("div",{className:"token-detail-intro__symbol"},t),He.default.createElement("div",{className:"token-detail-intro__name"},o))),Ta=(0,He.memo)(fl);n();s();var he=a(_()),ga=a(te());var _l=({className:e,title:t,text:o,copyText:r,copyNotificationTitle:i,copyNotificationDesc:m})=>{let c=(0,ga.default)("token-detail-row",e),[p,d]=os();return he.default.createElement("div",{className:c},he.default.createElement("div",{className:"token-detail-row__title"},t),he.default.createElement("div",{className:"token-detail-row__content"},he.default.createElement("div",{className:"token-detail-row__text"},o),r&&he.default.createElement("div",{className:"token-detail-row__copy",onClick:()=>{p||(d(r),to.success({title:i,desc:he.default.createElement("div",{className:"token-detail-row__copy-desc"},m)}))}},he.default.createElement(F,{className:"okx-wallet-plugin-copy"}))))},or=(0,he.memo)(_l);n();s();var ot=a(_()),ha=a(te());var Tl=({details:e})=>ot.default.createElement("div",{className:"token-detail-details"},e.map((t,o)=>{let r=o===0?"":"token-detail-details__split",i=(0,ha.default)(t?.className,r);return ot.default.createElement(or,{...t,className:i})})),xa=(0,ot.memo)(Tl);var tr={Container:_a,Intro:Ta,Row:or,Details:xa};n();s();function gl(){let e=(0,Ca.useHistory)(),o=ne().get("address"),r=A(o,!0),{extensionConfig:i}=D("rpc_info"),m=[{title:l("developer_mode_infor_subtitle_contractadd"),text:G(o),copyText:o,copyNotificationTitle:l("developer_mode_infor_toast_success"),copyNotificationDesc:o},{title:l("developer_mode_infor_subtitle_tokendecimal"),text:r.decimals},{title:l("developer_mode_infor_subtitle_network"),text:i.name}];return(0,ya.useMount)(()=>{o||e.replace(Q)}),Xe.default.createElement("div",{className:"rpc-evm-token-detail"},Xe.default.createElement(z,{title:l("developer_mode_infor_maintitle_tokendetails")}),Xe.default.createElement(tr.Container,null,Xe.default.createElement(tr.Intro,{image:Xe.default.createElement(Y,{text:r.symbol,size:"large",theme:"black"}),symbol:r.symbol,name:r.name}),Xe.default.createElement(tr.Details,{details:m})))}var Ea=gl;n();s();var K=a(_()),ba=a(W()),wa=a(te()),Ar=a(Za());v();n();s();var Ia=a(_()),ka=a(w()),va=a(j());var Na=()=>{let e=(0,ka.useDispatch)(),{extensionConfig:t}=D("rpc_info"),{chainId:o}=t,r=ue(!0,!0),i=(0,Ia.useMemo)(()=>{let c=[],p=[];return r.forEach(d=>{d.isDeleted?p.push(d):c.push(d)}),{usedChainTokens:c,disusedChainTokens:p}},[r]),m=(0,va.useMemoizedFn)(({address:c,isDeleted:p})=>{e(an({chainId:o,address:c,isDeleted:!p}))},[o]);return[i,m]};n();s();var Aa=()=>{let[{usedChainTokens:e,disusedChainTokens:t},o]=Na();return K.default.createElement("div",{className:"rpc-mode-manage-crypto"},K.default.createElement(z,{closeable:!1,title:l("developer_mode_home_maintitle_managecpt")}),K.default.createElement(ba.Link,{to:_t},K.default.createElement("div",{className:"rpc-mode-manage-crypto__custom"},K.default.createElement("span",{className:"rpc-mode-manage-crypto__custom__title"},l("developer_mode_manage_text_customcpt")),K.default.createElement(F,{className:"okds-arrow-chevron-right-centered-md rpc-mode-manage-crypto__custom__icon"}))),K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_addedcpt")),K.default.createElement(Ue,{component:Ar.default,className:"rc-mode-home__tokens",dataSource:e,transitionName:"fade",transitionEnterTimeout:300,transitionLeaveTimeout:300,renderItem:r=>{let i=!r.address;return K.default.createElement(Ue.Item,{token:r},K.default.createElement(F,{className:(0,wa.default)("okx-wallet-plugin-take","rc-mode-home__token__action","rc-mode-home__token__action__minus",{"rc-mode-home__token__action__disabled":i}),onClick:()=>o(r)}))}}),!!t.length&&K.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_adding")),K.default.createElement(Ue,{component:Ar.default,className:"rc-mode-home__tokens",dataSource:t,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade",renderItem:r=>K.default.createElement(Ue.Item,{token:r,key:r?.address},K.default.createElement(F,{className:"okx-wallet-plugin-add rc-mode-home__token__action rc-mode-home__token__action__add",onClick:()=>o(r)}))}))};n();s();var B=a(_());v();n();s();var Ne=a(_()),Pa=a(W()),Pr=a(j());Re();v();var hl="0x",xl=()=>{let e=Nt();return async t=>{try{return!fo(t)||await(await e()).eth.getCode(t)===hl}catch(o){return console.log(o),!0}}},Sa=()=>{let e=H.useForm(),t=(0,Pa.useHistory)(),[o,r]=Ne.default.useState(null),[i,m]=Ne.default.useState(!1),[c,p]=Ne.default.useState(!1),d=An(),f=vn(),T=bn(),g=xl(),h=ue(!0,!0),{extensionConfig:x}=D("rpc_info");Ne.default.useEffect(()=>{e?.setFieldsValue({network:x.name})},[x]);let E=(0,Pr.useMemoizedFn)(()=>{let{chainId:q}=x,V=e.getFieldsValue();d(q,V.address,V),T({chainId:q,address:V.address}),to.success({title:l("developer_mode_manage_toast_added")}),t.go(-1)},[x]),I=(0,Pr.useMemoizedFn)(Or(async()=>{r(null),p(null);let q=e.getFieldValue("address");if(e.cleanErrors(),!q)return!1;let V=h.find(ee=>ee.address===q);if(V&&!V.isDeleted)return e.setErrors({address:l("developer_mode_manage_errortip_duplicate_add")});if(m(!0),p(!1),await g(q))return m(!1),e.setErrors({address:l("developer_mode_manage_errortip_request_failed")});try{let ee=await f(q);r(ee),e.setFieldsValue(ee)}catch(ee){p(!0),e.setErrors({address:""}),console.log("error",ee)}finally{m(!1)}},250),[h]),se=(0,Ne.useMemo)(()=>c?Ne.default.createElement("div",{className:"rpc-mode-custom-crypto__address__error"},l("developer_mode_manage_errortip_request_failed"),Ne.default.createElement("span",{className:"rpc-mode-custom-crypto__address__refresh",onClick:I},l("developer_mode_manage_errortip_refresh"))):null,[c]);return{form:e,token:o,rpcInfo:x,fetching:i,addressError:se,onConfirm:E,onAddressTrigger:I}};n();s();var Cl=11,Da=()=>{let{form:e,token:t,rpcInfo:o,fetching:r,onConfirm:i,addressError:m,onAddressTrigger:c}=Sa();return B.default.createElement("div",{className:"rpc-mode-custom-crypto"},B.default.createElement(z,{title:l("developer_mode_manage_maintitle_customcpt")}),B.default.createElement(H,{form:e,size:H.SIZE.lg,validateTrigger:["onBlur","onChange"],className:"rpc-mode-custom-crypto__form"},B.default.createElement(H.Item,{name:"network",label:l("developer_mode_manage_title_network")},B.default.createElement(S,{size:H.SIZE.xl,innerClassName:"rpc-mode-custom-crypto__form__input__disabled",prefix:B.default.createElement(Y,{theme:"lightGray",icon:o.icon,text:o?.name,className:"rpc-mode-custom-crypto__icon"})})),B.default.createElement(H.Item,{name:"address",label:l("developer_mode_manage_title_contractadd"),extra:m},B.default.createElement(S.TextArea,{autoResize:!0,size:H.SIZE.xl,onChange:c,errorType:S.TIP_TYPE.always,suffix:r&&B.default.createElement(lr.Circle,{size:lr.SIZE.sm})})),B.default.createElement(H.Item,{name:"symbol",hidden:!t,label:l("developer_mode_manage_title_symbol"),rules:[{validator:(p,d)=>d?.length>Cl?Promise.reject(l("developer_mode_manage_errortip_symbollimit")):Promise.resolve()}]},B.default.createElement(S,{size:H.SIZE.xl})),B.default.createElement(H.Item,{hidden:!t,name:"decimals",label:l("developer_mode_manage_title_decimals")},B.default.createElement(S,{size:H.SIZE.xl,disabled:!0})),B.default.createElement(H.Item,{hidden:!0,name:"name"},B.default.createElement(S,{size:H.SIZE.xl})),B.default.createElement(H.Item,{noStyle:!0,shouldUpdate:!0},({getFieldsError:p,getFieldValue:d})=>B.default.createElement(be.FooterActions,{usePortal:!0,offsetBottom:0},B.default.createElement(L,{size:L.SIZE.lg,type:L.TYPE.highlight,category:L.CATEGORY.fill,disabled:p().length||!d("symbol"),onClick:i},l("developer_mode_manage_btn_confirm"))))))};var Oa=()=>Z.default.createElement(Z.default.Fragment,null,Z.default.createElement(R.Switch,null,Z.default.createElement(R.Route,{path:pt,component:Ks,exact:!0}),Z.default.createElement(R.Route,{path:no,component:ti,exact:!0}),Z.default.createElement(R.Route,{path:pe,component:hi,exact:!0}),Z.default.createElement(R.Route,{path:dt,component:Ci,exact:!0}),Z.default.createElement(R.Route,{path:ut,component:fa,exact:!0}),Z.default.createElement(R.Route,{path:ft,component:Aa,exact:!0}),Z.default.createElement(R.Route,{path:_t,component:Da,exact:!0}),Z.default.createElement(R.Route,{path:Tt,component:Ki,exact:!0}),Z.default.createElement(R.Route,{path:so,component:na,exact:!0}),Z.default.createElement(R.Route,{path:gt,component:Ea,exact:!0})),Z.default.createElement(ei,null));var bE=()=>{let e=(0,vo.useHistory)(),{isRpcMode:t}=(0,La.useSelector)(ao);return(0,tt.useEffect)(()=>{t||e.replace(Q)},[t]),tt.default.createElement(vo.Switch,null,tt.default.createElement(vo.Route,{path:en,component:Oa}))};export{bE as default};

window.inOKXExtension = true;
window.inMiniApp = false;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=rpc-mode-JO2DSS36.js.map
